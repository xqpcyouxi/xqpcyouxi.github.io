(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["shared~bundle.Compose~bundle.RichTextCompose","icons/IconAccessibilityCircle-js","icons/IconBarChartHorizontalStroke-js","icons/IconDraggable-js","icons/IconPersonCheckmarkStroke-js","icons/IconProfanity-js","icons/IconSchedule-js"],{12725:function _(e){"use strict";var t,n,r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"tweetText"}],kind:"Fragment",metadata:null,name:"QuickPromoteLiteRecommendedKeywordsQuery",selections:n=[{alias:null,args:[{kind:"Literal",name:"s",value:"2589"},{kind:"Variable",name:"tweet_text",variableName:"tweetText"}],kind:"ScalarField",name:"get_recommended_keywords",storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"QuickPromoteLiteRecommendedKeywordsQuery",selections:n},params:{id:"WQ2-bNb5RVhDy2g1Dc3DtA",metadata:{},name:"QuickPromoteLiteRecommendedKeywordsQuery",operationKind:"query",text:null}};r.hash="4949fae550baf9803602cc4e80e7364c",e.exports=r;},558355:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return R;}});var r=n(807896),i=n(459740),a=n(196234),o=n(202784),s=n(304642),l=n(212408),c=(n(467321),n(358188),n(108532),n(325686)),d=n(436934),u=n(229496),m=n(527519),p=n(973186),h=n(473228),f=n.n(h),g=n(801815),v=n(268117),y=n(840685),_=n(535102),b=n(796014),w=f().g6185a9e,T=f().g2d04222,Z=f().baffe39a,C=f().af293dc2,E=f().h1053f7e,x=f().bf994ab2,S=f().cf7f7e3a,I=f().cfd2f35e,P=p.Z.create(function(e){return{root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}};});var k=function k(e){var t,n,r=e.dismiss,i=e.isModal,a=e.midConversationTweet,s=e.value,l=function l(t){return function(){e.onChange(t),e.dismiss();};},p=!!a,h=p&&!(null!=a&&null!==(t=a.entities)&&void 0!==t&&null!==(n=t.user_mentions)&&void 0!==n&&n.some(function(e){return e.id_str!==a.user.id_str;})),f=E;return h?f=x:p&&(f=S),o.createElement(c.Z,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[P.root,i?P.modal:P.popover]},o.createElement(c.Z,{style:P.title},o.createElement(d.ZP,{nativeID:"conversation-controls-title",weight:"bold"},w),o.createElement(d.ZP,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},T)),o.createElement(c.Z,null,o.createElement(m.Z,{Icon:v["default"],actionText:Z,isSelected:b.k.all===s,onClick:l(b.k.all),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),o.createElement(m.Z,{Icon:y["default"],actionText:C,isSelected:b.k.community===s,onClick:l(b.k.community),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),o.createElement(m.Z,{Icon:h?_["default"]:g["default"],actionText:f,isSelected:b.k.by_invitation===s,onClick:l(b.k.by_invitation),selectable:!0,style:P.menuRow,withIconAsThumbnail:!0}),e.isModal?o.createElement(u.ZP,{key:"button_cancel",onPress:r,size:"large",style:P.cancelButton,type:"primaryOutlined"},I):null));};var A=["children","controlled"];var R=function R(e){var t=e.children,n=e.controlled,c=void 0!==n&&n,d=e.disabled,u=o.useState(!1),m=(0,a.Z)(u,2),p=m[0],h=m[1],f=o.useCallback(function(){return h(!0);},[]),g=o.useCallback(function(){return h(!1);},[]),v=c?p?s.Z.VISIBILITY_BEHAVIOR.forceVisible:s.Z.VISIBILITY_BEHAVIOR.forceHidden:void 0,y="function"==typeof t?t({openPopover:f,closePopover:g}):t;return o.createElement(l.Z,{disabled:d,onDismiss:g,renderContent:function renderContent(t,n){e.children,e.controlled;var a=(0,i.Z)(e,A);return o.createElement(k,(0,r.Z)({},a,{dismiss:t,isModal:"sheet"===n}));},visibilityBehavior:v},y);};},35539:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return p;}});var r=n(202784),i=n(436934),a=n(973186),o=n(473228),s=n.n(o),l=n(707038),c=n(481371),d=n(781768),u=s().bfb895b1,m=a.Z.create(function(e){return{icon:{fontSize:e.fontSizes.body,paddingEnd:e.spaces.space12,textAlignVertical:"middle"}};});var p=function p(e){var t=e.onPress,n=e.scheduledFor,a=e.testID,o=(0,c.R)()(),s=(0,d.o3)(n),p=!!s&&(0,d.TO)(n)&&!(0,d.Ul)(s,o)&&!(0,d.bJ)(s,o),h=Boolean(t);return s&&p?r.createElement(i.ZP,{color:"gray700",onPress:t,size:"subtext2",testID:a,withInteractiveStyling:h},r.createElement(l["default"],{style:m.icon}),u({date:(0,d.vh)(s),time:(0,d.g6)(s)})):null;};},42100:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return ve;}});var r=n(196234),i=n(202784),a=n(229496),o=n(973186),s=n(473228),l=n.n(s),c=n(331261),d=(n(372147),n(358188),n(888233),n(368995),n(332501),n(315735),n(73439),n(428673),n(906886),n(326936),n(108532),n(325686)),u=(n(585488),n(107267)),m=n(436934),p=n(868472),h=n(888769),f=n(73206),g=n(854044),v=n(51600),y=n(472599),_=n(890465),b=n(669210),w=n(188328),T=n(123791),Z=(n(995342),n(543450),n(203978)),C=n(392160),E=n(414854),x=n(310531),S=function S(e){return function(t){var n,r,i=(0,E.WK)(t)(e);return null===(n=e.ads.typeahead.forecastAudience[i])||void 0===n||null===(r=n.result)||void 0===r?void 0:r.estimatedImpressions;};};var I=(0,C.Z)().propsFromState(function(){return{getAudience:S};}).propsFromActions(function(){return{fetchBoostForecastedReachForBudgetIfNeeded:x.Lm};}).withAnalytics();var P=l().h7c29de6,k=l().hd435bf1;var A=I(function(e){var t=e.analytics,n=e.budget,r=e.fetchBoostForecastedReachForBudgetIfNeeded,a=e.getAudience;i.useEffect(function(){r(n,t);},[t,n,r]);var o=a(n);if(!o)return null;var s=o.high,c=o.low,d=l().cf8abf59(c),u=l().cf8abf59(s);return i.createElement(i.Fragment,null,i.createElement(m.ZP,{size:"subtext1",weight:"bold"},P),i.createElement(m.ZP,{size:"subtext1"},k({audienceLow:d,audienceHigh:u})));});var R=n(807896),D=n(459740),N=n(24921),F=n(133028),M=(n(334115),n(200634),n(818178),n(825301)),L=n(174062),B=n(354484),O=n(801206),V=function V(e){var t=e.accessibilityLabel,n=e.accessibilityPosInSet,r=e.accessibilitySetSize,a=e.checked,o=e.description,s=e.disabled,l=e.endContent,c=e.horizontal,u=e.illustration,p=e.label,h=e.name,f=e.onChange,g=e.pillText,v=e.pillType,y=e.reverseLabels,_=e.secondaryDescription,b=e.switchStyle,w=e.testID,T=B.b(),Z=B.b(),C=B.b(),E=i.createElement(m.ZP,{accessibilityRole:"label",color:b?a?"text":"gray700":"text",nativeID:T,size:b?"subtext1":"headline2",testID:"headline-label",weight:"bold"},p),x=!!o&&i.createElement(m.ZP,{color:"gray700",nativeID:Z,size:"subtext1",style:g?z.descriptionWithPill:z.description,testID:"description-label"},o),S=i.createElement(m.ZP,{accessibilityRole:"label",color:"gray700",size:"subtext2",style:z.description},_),I=g?i.createElement(M.ZP,{style:z.marginStart8,type:v},g):null,P=i.createElement(i.Fragment,null,i.createElement(d.Z,{style:z.row},y?x:E,I),i.createElement(d.Z,{style:[z.row,y&&z.marginTop4]},y?E:x),_?S:null),k="".concat(r?100/r:100,"%"),A=b?[z.padding4,z.borderRadiusInfinite,a?z.backgroundDefault:z.backgroundGrey]:[z.padding16,z.boxShadow,z.borderRadiusLarge,a?z.checked:null,z.backgroundDefault];return i.createElement(L.Z,{disabled:s,style:[z.root].concat(A,[c?(0,F.Z)({maxWidth:k},z.grow):null,1===n||c?null:z.withMarginTop,n!==r&&c&&z.withMarginEnd,!s&&z.interactive]),testID:w,withInteractiveStyling:!b},!!u&&i.createElement(d.Z,{style:z.iconContainer,testID:"illustration"},u),i.createElement(d.Z,{style:[z.labelContainer,b&&z.alignCenter]},P),!!l&&i.createElement(d.Z,{style:z.endContentContainer,testID:"endContent"},l),i.createElement("input",{"aria-describedby":"".concat(Z," ").concat(C),"aria-label":t,"aria-labelledby":T,"aria-posinset":n,"aria-setsize":r,checked:a,disabled:s,name:h,onChange:a?O.Z:f,style:U,type:"radio"}));},z=o.Z.create(function(e){return{backgroundGrey:{backgroundColor:e.colors.gray100},backgroundDefault:{backgroundColor:e.colors.elevatedBackground},root:{overflow:"hidden",flexDirection:"row",justifyContent:"space-between",gap:e.spaces.space16,flexGrow:1,borderColor:e.colors.transparent,borderWidth:e.borderWidths.medium},alignCenter:{alignItems:"center"},padding16:{padding:e.spaces.space16},padding4:{padding:e.spaces.space4},boxShadow:{boxShadow:"0px 2px 12px rgba(15, 20, 25, 0.12)"},withMarginTop:{marginTop:e.spaces.space20},borderRadiusLarge:{borderRadius:e.borderRadii.large},borderRadiusInfinite:{borderRadius:e.borderRadii.infinite},checked:{borderColor:e.colors.primary},interactive:{cursor:"pointer"},withMarginEnd:{marginEnd:e.spaces.space20},grow:{flexGrow:1},iconContainer:{alignSelf:"flex-start",flexDirection:"column",justifyContent:"center",width:e.spaces.space40,height:e.spaces.space40},labelContainer:{flexDirection:"column",justifyContent:"center",flex:2},inlineCalloutContainer:{marginTop:e.spaces.space8},description:{marginTop:e.spaces.space4},descriptionWithPill:{marginTop:e.spaces.space2},endContentContainer:{justifyContent:"center",flexDirection:"column",flex:3},row:{flexDirection:"row",alignItems:"center"},marginStart8:{marginStart:e.spaces.space8},marginTop4:{marginTop:e.spaces.space4}};}),U=(0,F.Z)((0,F.Z)({},o.Z.absoluteFillObject),{},{cursor:"inherit",height:"100%",margin:0,opacity:0,padding:0,width:"100%"}),H=["value"];var W=function W(e){var t=i.useCallback(function(e){var t=e.value,n=(0,D.Z)(e,H);return i.createElement(V,(0,R.Z)({},n,{key:t}));},[]);return i.createElement(N.Z,(0,R.Z)({},e,{renderSelector:t}));};var j=n(467935);function q(e){var t;return null!==(t=e.quickPromote.budget.availableBudgets)&&void 0!==t?t:[];}function K(e){var t;return null!==(t=e.quickPromote.budget.currency)&&void 0!==t?t:"USD";}function G(e){return e.quickPromote.budget.dailyBudget;}var Q=(0,C.Z)().propsFromState(function(){return{availableBudgets:q,currency:K,dailyBudget:G,language:j.VT};}).propsFromActions(function(){return{fetchBoostForecastedReachForBudgetIfNeeded:x.Lm,setDailyBudget:E.p_};}).withAnalytics();var $=l().i3656b52;function Y(e,t,n){return e.toLocaleString((0,Z.It)(t),{currency:n,style:"currency",maximumFractionDigits:0,minimumFractionDigits:0});}var X=Q(function(e){var t=e.availableBudgets,n=e.currency,r=e.dailyBudget,a=e.language,o=e.setDailyBudget,s=i.useMemo(function(){return[t[3],t[5],t[6],t[8]].filter(Boolean);},[t]),l=i.useMemo(function(){return s.map(function(e,t){return{label:Y(e,a,n),value:e,endContent:i.createElement(A,{budget:e})};});},[s,n,a]);return i.createElement(d.Z,{style:J.tileRadioPadding},i.createElement(m.ZP,{style:J.radioTextSpacing},$),i.createElement(W,{name:"budget-select",onChange:function onChange(e,t){o(t);},options:l,value:r}));});var J=o.Z.create(function(e){return{radioTextSpacing:{marginBottom:e.spaces.space8},tileRadioPadding:{marginVertical:e.spaces.space24}};}),ee=n(923335),te=n(157659),ne=n(823803),re=function re(e){return(0,ne.h1)(e.quickPromote.budget.availableBudgetsFetchStatus,e.quickPromote.targeting.initialTargetedLocationsFetchStatus,e.quickPromote.account.accountDataFetchStatus);},ie=function ie(e){return e.quickPromote.account.adsAccount;},ae=function ae(e){return e.quickPromote.account.selectedFundingInstrument;},oe=function oe(e){return e.quickPromote.targeting.contextualKeywords;};var se=(0,C.Z)().propsFromState(function(){return{fetchStatus:re,viewerUser:te.ZP.selectViewerUser,adsAccount:ie,fundingInstrument:ae,selectContextualKeywords:oe};}).propsFromActions(function(){return{createLocalApiErrorHandler:(0,ee.createLocalApiErrorHandlerWithContextFactory)("QUICK_PROMOTE_SCREEN"),createPromotion:E.kb,fetchCurrentTargetingLocationIfNeeded:E.yW,fetchAvailableBudgetsIfNeeded:E.WS,fetchAdsAccountDataIfNeeded:E.Ek,resetState:E.oA,setBudgetDuration:E.g_,setTargetedAgeBucket:E.l$};}).withAnalytics(T.EP);var le,ce=l().f11264ac,de=l().e7719126,ue=l().c5c0b3bc,me=void 0!==le?le:le=n(12725),pe={context:"RECOMMENDED_KEYWORDS_QUERY"};var he=se(function(e){var t=e.analytics,n=e.fetchAdsAccountDataIfNeeded,s=e.fetchAvailableBudgetsIfNeeded,Z=e.fetchCurrentTargetingLocationIfNeeded,C=e.resetState,E=e.selectContextualKeywords,x=e.setBudgetDuration,S=e.setTargetedAgeBucket,I=e.tweetText,P=i.useState("main"),k=(0,r.Z)(P,2),A=k[0],R=k[1],D=(0,u.k6)(),N=(0,c.QZ)().viewerUserId,F=(0,g.F)().windowWidth,M=E.length>0,L=(0,b.p)(me,{tweetText:I}),B=i.useMemo(function(){var e;return(null!==(e=L.get_recommended_keywords)&&void 0!==e?e:[]).slice();},[L.get_recommended_keywords]);if(i.useEffect(function(){N&&(C(),Promise.all([Z(),n(N,t)]).then(function(){return s();}));},[t,n,s,Z,C,N]),i.useEffect(function(){x(1),S(_.s.AGE_OVER_18);},[x,S]),!N)return null;function O(){R("payment");}function V(e){e&&"quick_promote"===e.name&&("close"===e.type&&R("main"),"cardAdded"===e.type&&(n(N,t,!0),R("main")));}function z(){var n,r=null===(n=e.viewerUser)||void 0===n?void 0:n.screen_name;r&&((0,T.hq)(t)(T.Ur.promotionClick()),e.sendAndGetTweetId().then(function(n){if(n){var i=(0,T.gC)(r,n);e.createPromotion({analytics:t,history:D,statusId:n,nextPath:i});}}));}var U=F<o.Z.theme.breakpoints.small?fe.mobileTitleContainer:fe.titleContainer,H="payment"===A?fe.fullHeight:void 0,W="payment"===A?[U,fe.fullHeight]:U;return i.createElement(f.Z,{onMaskClick:e.onDismiss,style:H,type:"bottom",withMask:!0},i.createElement(d.Z,{style:W},i.createElement(p.Z,{fetchStatus:e.fetchStatus,render:function render(){var t,n;if("payment"===A){var r,o=(n=null===(r=e.adsAccount)||void 0===r?void 0:r.id,"https://twitter.com/i/payments/".concat(parseInt(n,10).toString(36),"/quick-promote/new"));return i.createElement(h.Z,{allowForms:!0,onMessage:V,reportError:y.ZP,src:o,style:fe.iframe,title:"Payment Form"});}return i.createElement(i.Fragment,null,i.createElement(m.ZP,{accessibilityLevel:1,accessibilityRole:"heading",align:"left",size:"title4",weight:"heavy"},ue),i.createElement(v.H,{errorConfig:pe},i.createElement(w.LW,{recommendedKeywords:B})),i.createElement(X,null),i.createElement(d.Z,{style:fe.bottomElements},!e.fundingInstrument||null!==(t=e.adsAccount)&&void 0!==t&&t.needs_vat?i.createElement(a.ZP,{onPress:O,size:"xLarge",type:"primaryFilled"},ce):i.createElement(a.ZP,{disabled:!M,onPress:z,size:"xLarge",type:"primaryFilled"},de)),i.createElement(m.ZP,{color:"gray700",style:fe.adsDisclaimer},i.createElement(l().I18NFormatMessage,{$i18n:"d7ffd6d9"},i.createElement(m.ZP,{link:"https://legal.twitter.com/ads-terms/us.html"},l().fb35ac8f))));}})));});var fe=o.Z.create(function(e){return{titleContainer:{paddingHorizontal:e.spaces.space80,paddingVertical:e.spaces.space24},mobileTitleContainer:{paddingHorizontal:e.spaces.space32,paddingVertical:e.spaces.space40},bottomElements:{marginTop:e.spaces.space12,marginBottom:e.spaces.space20},paymentContainer:{height:"100%"},fullHeight:{height:"100%"},iframe:{flexGrow:1,paddingTop:0},adsDisclaimer:{fontSize:e.fontSizes.subtext2}};}),ge=l().cfa1ef16;function ve(e){var t,n,o=(0,c.QZ)().featureSwitches,s=i.useState(!1),l=(0,r.Z)(s,2),d=l[0],u=l[1],m=e.isModal,p=e.viewer,h=m?"medium":"small";return!!(null!=p&&p.is_blue_verified||null!=p&&p.verified_type)&&e.shouldShow&&e.isComposerValid&&!e.isEdit&&!e.isQuote&&!e.isReply&&!e.isScheduled&&!e.isSelfThreadReply&&!e.isThread&&o.isTrue("rweb_tweets_boosting_enabled")?i.createElement(i.Fragment,null,i.createElement(a.ZP,{disabled:e.disabled,onPress:function onPress(){u(!0);},size:h,style:m?ye.inModal:void 0,type:"brandOutlined"},ge),d?i.createElement(he,{onDismiss:function onDismiss(){u(!1);},sendAndGetTweetId:e.onTweetWithBoostPress,tweetText:e.tweetText}):null):null!==(t=null===(n=e.renderFallback)||void 0===n?void 0:n.call(e))&&void 0!==t?t:null;}var ye=o.Z.create(function(e){return{inModal:{marginStart:e.spaces.space12}};});},480833:function _(e,t,n){"use strict";n.d(t,{L:function L(){return I;},Z:function Z(){return A;}});n(22144),n(332501),n(543450),n(326936),n(334115),n(200634);var r=n(202784),i=n(325686),a=n(436934),o=n(359124),s=n(949758),l=n(973186),c=n(539274),d=n(473228),u=n.n(d),m=r.createElement(u().I18NFormatMessage,{$i18n:"i5ba24f5"},r.createElement(a.ZP,{link:"https://help.twitter.com/en/rules-and-policies/twitter-rules",withInteractiveStyling:!1},u().g3631342));var p=function p(e){var t=e.containerStyle,n=e.explanation,o=e.explanationStyle,s=e.heading;return r.createElement(i.Z,{style:t},s,r.createElement(a.ZP,{color:"gray700",style:o},n||m));};var h=n(510364);var f=function f(e){var t=e.getPivotLink,n=e.renderBadge,i=e.rules;return r.createElement(r.Fragment,null,i.map(function(e,i){var o=e.description,s=e.name,l=e.rest_id,c=t(e),d=n(i+1),u=r.createElement(a.ZP,{weight:"bold"},s);return r.createElement(h.Z,{description:o,key:l,label:u,link:c,thumbnail:d});}));};var g=n(807896),v=n(196234),y=(n(827233),n(428673),n(99805),n(335287)),_=n(865625),b=n(515834),w="rules-container",T="rules-order-badge",Z="rules-reorder-item",C=l.Z.create(function(e){return{icon:{color:e.colors.gray300,flexShrink:0,paddingStart:e.spaces.space12}};});var E=function E(e){var t=e.badge,n=e.rule,i=n.description,o=n.name,s=r.createElement(a.ZP,{weight:"bold"},o);return r.createElement(h.Z,{description:i,label:s,renderRightContent:function renderRightContent(){return r.createElement(b["default"],{style:C.icon});},testID:Z,thumbnail:t});};var x=function x(e,t,n){if(e.destination){var r=function(e,t,n){var r=Array.from(e),i=r.splice(t,1),a=(0,v.Z)(i,1)[0];return r.splice(n,0,a),r;}(t,e.source.index,e.destination.index);n(r);}};var S=function S(e){var t=e.onReorder,n=e.renderBadge,i=e.rules,a=r.useCallback(function(e){x(e,i,t);},[t,i]);return r.createElement(_.Xi,{onDragEnd:a},r.createElement(_.$p,{droppableId:"droppable"},function(e,t){return r.createElement("div",(0,g.Z)({},e.droppableProps,{ref:e.innerRef}),i.map(function(e,i){var a=e.rest_id;return r.createElement(y.ZP,{draggableId:a,index:i,isBeingDragged:t.draggingFromThisWith===a,key:a},r.createElement(E,{badge:n(i+1),rule:e}));}),e.placeholder);}));};var I=Object.freeze({Default:"Default",Pivot:"Pivot",Reorder:"Reorder"}),P=function P(e,t){var n=t.badgeStyle,s=t.theme,l=o.Z.getCommunityBackgroundColor(s);return r.createElement(i.Z,{style:[k.badge,{backgroundColor:l},n],testID:T},r.createElement(a.ZP,{align:"center",color:"white",weight:"bold"},e));},k=l.Z.create(function(e){return{badge:{backgroundColor:e.colors.primary,borderRadius:e.borderRadii.infinite,justifyContent:"center",overflow:"hidden",height:e.spaces.space32,width:e.spaces.space32},bottomMargin:{marginBottom:c.h$}};});var A=function A(e){var t=e.badgeStyle,n=e.displayType,a=void 0===n?I.Default:n,o=e.explanation,l=e.getPivotLink,c=e.headerContainerStyle,d=e.headerExplanationStyle,u=e.heading,m=e.limit,h=e.onReorder,g=e.ruleContainerStyle,v=e.rules,y=e.theme,_=e.withBottomMargin,b=void 0!==_&&_,T=e.withHeader,Z=void 0===T||T,C={theme:y,badgeStyle:t},E=function(e,t,n){return(t?e.slice(0,t):e).map(function(e,t){return{label:e.name,description:e.description,decoration:P(t+1,n)};});}(v,m,C),x=function x(e){return P(e,C);};return E.length>0?r.createElement(i.Z,{style:b?k.bottomMargin:null,testID:w},Z?r.createElement(p,{containerStyle:c,explanation:o,explanationStyle:d,heading:u}):null,a===I.Pivot&&l?r.createElement(f,{getPivotLink:l,renderBadge:x,rules:v}):a===I.Reorder&&h?r.createElement(S,{onReorder:h,renderBadge:x,rules:v}):r.createElement(s.Z,{containerStyle:g,items:E})):null;};},120192:function _(e,t,n){"use strict";n.d(t,{CB:function CB(){return h;},Qg:function Qg(){return m;},TT:function TT(){return p;},of:function of(){return u;}});n(739529),n(231235),n(136728);var r=n(473228),i=n.n(r),a=n(796014),o=i().g34f2c63,s=i().f70a36d0,l=i().d17df548,c=i().h735a98e,d=i().h3701ffe,u=function u(e){var t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?c:e.isEdit?d:t?l:e.isThread?s:o({verb:""});},m=function m(e,t,n){return function(){if(n){var r,i;(null===(r=t.state)||void 0===r||null===(i=r.previousPath)||void 0===i?void 0:i.includes(n))&&"/compose/tweet"===t.pathname?window.scrollTo(0,0):e.push("/i/communities/".concat(n),{lockScroll:!0});}else{var a,o,s=(null===(a=t.state)||void 0===a||null===(o=a.previousPath)||void 0===o?void 0:o.includes("/home"))&&"/compose/tweet"===t.pathname;t.pathname.includes("/home")||s?window.scrollTo(0,0):e.push("/home",{lockScroll:!0});}};},p=function p(e){var t=e.isInline,n=e.isSelfThreadReply,r=e.parentTweetId;return t?{pathname:"/compose/tweet",state:{inReplyToStatusId:r,isSelfThreadReply:n}}:void 0;},h=function h(e,t){var n;return null!=e&&e.exclusivity_info?{_type:"super_followers_exclusive",conversationControlsValue:a.k.super_followers_exclusive,exclusivityControlValue:{}}:null!=e&&e.community_id_str?{_type:"community_members",communityIdValue:e.community_id_str,conversationControlsValue:a.k.community_members}:null!=e&&e.trusted_friends_info&&null!=t&&t.length?{_type:"trusted_friends_tweet",conversationControlsValue:a.k.trusted_friends_tweet,trustedFriendsValue:{trusted_friends_list_id:t[0].rest_id}}:{_type:"conversation_controls",conversationControlsValue:(null===(n=e.conversation_control)||void 0===n?void 0:n.policy)||a.k.all};};},837370:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return zl;}});var r=n(968079),i=n(86522),a=n(196234),o=n(133028),s=n(709249),l=n(887371),c=n(580753),d=n(545754),u=n(486906),m=n(256666),p=(n(543450),n(438695),n(358188),n(201939),n(467321),n(477950),n(621850),n(73439),n(821515),n(416781),n(22144),n(315735),n(428673),n(906886),n(739529),n(231235),n(136728),n(472508),n(818178),n(385940),n(327072),n(267694),n(995342),n(827233),n(628986),n(334769),n(374083),n(108532),n(202784)),h=n(476984),f=n.n(h),g=n(928316),v=n(325686),y=n(611731),_=(n(332501),n(17500)),b=Object.freeze({"in":"in",out:"out","static":"static"});var w=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++){i[a]=arguments[a];}return e=t.call.apply(t,[this].concat(i)),(0,m.Z)((0,c.Z)(e),"state",{isAnimating:!1,renderChildren:p.Children.toArray(e.props.children).map(function(e){return{status:b["static"],child:e};})}),(0,m.Z)((0,c.Z)(e),"_handleEachAnimateComplete",function(){var t=e.state.isAnimating,n=e.props,r=n.children,i=n.onAnimateComplete;t&&(i&&i(),e.setState({renderChildren:p.Children.toArray(r).map(function(e){return{status:b["static"],child:e};}),isAnimating:!1}));}),e;}return(0,l.Z)(n,[{key:"render",value:function value(){var e=this;return this.state.renderChildren.map(function(t){var n=t.child,r=t.status;return p.createElement(y.Z,{animateMount:r!==b["static"],key:n.key,onAnimateComplete:e._handleEachAnimateComplete,show:r!==b.out},n);});}}],[{key:"getDerivedStateFromProps",value:function value(e,t){var n=function(e,t){for(var n=0,i=0,a=[],o=function o(){if(n>=t.length)return a.push.apply(a,(0,r.Z)(e.slice(i).map(function(e){return{child:e,status:b.out};}))),"break";var o=t[n],s=e[i];if(o.key===s.key)a.push({child:o,status:b["static"]}),n+=1;else{var l=(0,_.Z)(t,function(e){return e.key===s.key;});l>=0?(a.push.apply(a,(0,r.Z)(t.slice(n,l).map(function(e){return{child:e,status:b["in"]};})).concat([{child:t[l],status:b["static"]}])),n=l+1):a.push({child:s,status:b.out});}i+=1;};i<e.length&&"break"!==o();){;}return n<t.length&&a.push.apply(a,(0,r.Z)(t.slice(n).map(function(e){return{child:e,status:b["in"]};}))),a;}(t.renderChildren.map(function(e){return e.child;}),p.Children.toArray(e.children));return{renderChildren:n,isAnimating:!n.every(function(e){return e.status===b["static"];})};}}]),n;}(p.Component);var T=n(180717),Z=n(436934),C=n(229496),E=n(484292),x=n(323507),S=n(805252),I=n(973186),P=n(822685),k=n(473228),A=n.n(k),R=n(142683),D=n(951171),N=n(958955),F=n(32307),M=n(16587),L=n(871768),B=n(539466),O=n(503614),V=n(660812);var z=n(31862),U=n(773036),H=n(463174),W=n(807896),j=n(459740),q=n(460673),K=n(229006),G=n(745784),Q=(n(326936),n(594836)),$=n(650984),Y=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,s.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++){i[a]=arguments[a];}return e=t.call.apply(t,[this].concat(i)),(0,m.Z)((0,c.Z)(e),"_setInputRef",function(t){e._inputRef=t;}),e;}return(0,l.Z)(n,[{key:"render",value:function value(){var e=this.props,t=e.autoFocus,n=e.defaultValue,r=e.editable,i=e.label,a=e.name,o=e.onBlur,s=e.onChange;return p.createElement(v.Z,{style:X.root},p.createElement(Q.Z,{autoCapitalize:"none",autoCorrect:!1,autoFocus:t,defaultValue:n,editable:r,label:i,maxLength:25,name:a,onBlur:o,onChange:s,ref:this._setInputRef,spellCheck:"false",style:X.formTextInput}));}},{key:"value",get:function get(){return this._inputRef&&this._inputRef.getValue();}},{key:"isValid",get:function get(){var e=this.props.optional;return!this.value&&e||this.value&&!(0,$.Z)(this.value)&&this._inputRef&&this._inputRef.isValidLength();}}]),n;}(p.Component);(0,m.Z)(Y,"defaultProps",{autoFocus:!1,editable:!0,optional:!1});var X=I.Z.create(function(e){return{root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}};});var J=Y;n(368995);var ee="addPollChoice",te="selectPollDays",ne="selectPollHours",re="selectPollMinutes",ie="removePollButton";n(372147),n(888233);var ae=n(585204),oe=n(653471),se=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments);}return(0,l.Z)(n,[{key:"render",value:function value(){var e=this.props,t=e.editable,n=e.label,r=e.last,i=e.max,a=e.min,o=e.onChange,s=e.testID,l=!t||a===i,c=e.value.toString(),d=(0,oe.Z)(a,i+1).map(function(e){return{label:"".concat(A().ia24dc8d(e)),value:"".concat(e)};});return p.createElement(ae.ZP,{disabled:l,label:n,onChange:o,options:d,style:[le.selector,!r&&le.rightMargin],testID:s,value:c});}}]),n;}(p.PureComponent);(0,m.Z)(se,"defaultProps",{last:!1});var le=I.Z.create(function(e){return{rightMargin:{marginEnd:e.spaces.space20},selector:{flexGrow:1}};});var ce=se;var de=A().caf8edc4,ue=A().g93586be,me=A().d073b644,pe=A().a2f0728e,he=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i;return(0,s.Z)(this,n),i=t.call(this,e,r),(0,m.Z)((0,c.Z)(i),"_handleDaysChange",function(e){var t=i.props.onChange,n=parseInt(e,10);i.setState(function(e){var r=e.duration,i=r.hours,a=r.minutes,o=0===n&&0===i&&0===a?1:7===n?0:i,s={days:n,hours:o,minutes:7===n?0:0===n&&0===o&&a<5?5:a};return t&&t(s),{duration:s};});}),(0,m.Z)((0,c.Z)(i),"_handleHoursChange",function(e){var t=i.props.onChange,n=parseInt(e,10);i.setState(function(e){var r=e.duration,i=r.days,a=r.minutes,o={days:i,hours:n,minutes:0===i&&0===n&&a<5?5:a};return t&&t(o),{duration:o};});}),(0,m.Z)((0,c.Z)(i),"_handleMinutesChange",function(e){var t=i.props.onChange,n=parseInt(e,10);i.setState(function(e){var r=e.duration,i={days:r.days,hours:r.hours,minutes:n};return t&&t(i),{duration:i};});}),i.state={duration:e.initialDuration},i;}return(0,l.Z)(n,[{key:"render",value:function value(){var e=this.props,t=e.isActive,n=e.style;return p.createElement(v.Z,{style:n},p.createElement(Z.ZP,{style:fe.durationLabel},t?de:""),this._renderPicker());}},{key:"_renderPicker",value:function value(){var e=this.props,t=e.editable,n=e.isActive,r=this.state.duration,i=r.days,a=r.hours,o=r.minutes;return p.createElement(v.Z,{style:fe.durationControls},p.createElement(ce,{editable:t&&n,label:ue,max:7,min:0,onChange:this._handleDaysChange,testID:te,value:i}),p.createElement(ce,{editable:t&&n,label:me,max:7===i?0:23,min:0,onChange:this._handleHoursChange,testID:ne,value:a}),p.createElement(ce,{editable:t&&n,label:pe,last:!0,max:7===i?0:59,min:0===i&&0===a?5:0,onChange:this._handleMinutesChange,testID:re,value:o}));}},{key:"duration",get:function get(){return this.state.duration;}}]),n;}(p.Component);(0,m.Z)(he,"defaultProps",{editable:!0,initialDuration:{days:1,hours:0,minutes:0}});var fe=I.Z.create(function(e){return{durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}};});var ge=he;var ve=A().g589c2e2,ye=A().a1e6c3a2,_e=A().a739e006,be=A().d89a5b92,we=A().c2a8118e,Te=A().a8ede1de,Ze=A().af40a8e0,Ce=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this,e,r),(0,m.Z)((0,c.Z)(i),"_setChoice1Ref",function(e){i._choice1=e;}),(0,m.Z)((0,c.Z)(i),"_setChoice2Ref",function(e){i._choice2=e;}),(0,m.Z)((0,c.Z)(i),"_setChoice3Ref",function(e){i._choice3=e;}),(0,m.Z)((0,c.Z)(i),"_setChoice4Ref",function(e){i._choice4=e;}),(0,m.Z)((0,c.Z)(i),"_setDurationPickerRef",function(e){i._durationPicker=e;}),(0,m.Z)((0,c.Z)(i),"_handleValidation",function(){var e=i.props,t=e.onChange,n=e.onInvalid,r=e.onValid,a=i.choices,o=(0,c.Z)(i),s=[o._choice1,o._choice2,o._choice3,o._choice4].filter(Boolean).every(function(e){return e.isValid;});a&&a.length>=2&&s?r():n(),t&&t({choices:a,duration:i.duration});}),(0,m.Z)((0,c.Z)(i),"_handleAdd",function(){i.props.analytics.scribe({element:"add_poll_option",action:"click"}),i.setState(function(e){return{autoFocus:!0,choiceCount:e.choiceCount+1};});}),(0,m.Z)((0,c.Z)(i),"_handleDurationChange",function(e){var t=i.props.onChange;t&&t({choices:i.choices,duration:e});}),(0,m.Z)((0,c.Z)(i),"_handleBlur",function(){var e=i.props.onBlur;null==e||e();});var a=e.initialChoices,o=void 0===a,l=(a||[]).length,d=l>2?l:2;return i.state={autoFocus:o,choiceCount:d},i;}return(0,l.Z)(n,[{key:"_renderChoices",value:function value(){var e=this.props,t=e.editable,n=e.initialChoices,r=void 0===n?[]:n,i=e.isActive,a=this.state,o=a.autoFocus,s=a.choiceCount,l=p.createElement(v.Z,{style:Ee.rightColumn},s<4?p.createElement(C.ZP,{accessibilityLabel:Te,disabled:!(t&&i),hoverLabel:{label:Ze},icon:p.createElement(G["default"],null),onPress:this._handleAdd,size:"medium",style:Ee.addButton,testID:ee,type:"brandText"}):null);return p.createElement(v.Z,{style:Ee.choicesAndAddButton},p.createElement(v.Z,{style:Ee.choices},p.createElement(J,{autoFocus:o,defaultValue:r[0],editable:t&&i,label:ve,name:"Choice1",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice1Ref}),p.createElement(J,{defaultValue:r[1],editable:t&&i,label:ye,name:"Choice2",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice2Ref}),s>=3?p.createElement(J,{autoFocus:o,defaultValue:r[2],editable:t&&i,label:_e,name:"Choice3",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===s?p.createElement(J,{autoFocus:o,defaultValue:r[3],editable:t&&i,label:be,name:"Choice4",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),l);}},{key:"render",value:function value(){var e=this.props,t=e.editable,n=e.initialDuration,r=e.isActive,i=e.onRemove;return p.createElement(v.Z,{style:Ee.root},this._renderChoices(),p.createElement(ge,{editable:t,initialDuration:n,isActive:r,onChange:this._handleDurationChange,ref:this._setDurationPickerRef,style:Ee.durationPicker}),p.createElement(v.Z,{style:Ee.removePollButton},p.createElement(K.Z,{color:"red500",label:we,onPress:i,testID:ie})));}},{key:"choices",get:function get(){var e=this._choice1,t=this._choice2,n=this._choice3,r=this._choice4;return[e&&e.value,t&&t.value,n&&n.value,r&&r.value].filter(Boolean);}},{key:"duration",get:function get(){return this._durationPicker?this._durationPicker.duration:void 0;}}]),n;}(p.Component),Ee=I.Z.create(function(e){return{root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomStartRadius:e.borderRadii.xLarge,borderBottomEndRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginStart:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}};});var xe=(0,q.Z)(Ce);var Se=["onChange"];var Ie=function Ie(e){var t=e.composerIndex,n=e.editable,r=e.initialChoices,i=e.initialDuration,a=e.isActive,o=e.isPollValid,s=e.updateComposer,l=(0,q.z)(),c=p.useMemo(function(){return{onChange:function onChange(e){s({pollChoices:null==e?void 0:e.choices,pollDuration:null==e?void 0:e.duration},t);},onValid:function onValid(){!o&&s({pollValid:!0},t);},onInvalid:function onInvalid(){o&&s({pollValid:!1},t);},onRemove:function onRemove(){l.scribe({element:"remove_poll",action:"click"}),s({pollActive:!1},t);}};},[l,o,s,t]),d=c.onChange,u=(0,j.Z)(c,Se),m=p.useMemo(function(){return(0,B.Z)(function(e){var t=e.choices,n=e.duration;d({choices:t,duration:n});},200,{leading:!0,trailing:!0});},[d]),h=p.useCallback(function(){m.flush();},[m]);return p.createElement(xe,(0,W.Z)({editable:n,initialChoices:r,initialDuration:i,isActive:a,onBlur:h,onChange:m},u));};var Pe=n(841361),ke=(n(43105),n(743108),n(693244),n(449228),n(571372),n(99805),n(301503)),Ae=n(614983),Re=n.n(Ae),De=n(137541),Ne=n(186454),Fe=n(863214),Me=n(750721),Le=n(684999),Be=n(322150),Oe=n(87571),Ve=n(519261),ze=n(664815),Ue=n(796458),He=n(249089),We=n(887191),je=n(391883),qe=n(418958),Ke=n(685464),Ge=n(616888),Qe=n(440271),$e=n(446493),Ye=n(511258),Xe=n(673707),Je=n(240811),et=n(535102),tt=n(707038),nt=n(99496);function rt(e){var t=e.store.useState(function(e){return e;}),n=e.store.useActions();return e.children({state:t,actions:n});}var it=n(359124),at=n(212408),ot=n(845907),st=n(765526),lt=n(435131),ct=["children"];function dt(e){var t=e.children,n=(0,j.Z)(e,ct);return p.createElement(C.ZP,n,t,p.createElement(lt["default"],{style:ut.icon}));}var ut=I.Z.create(function(e){var t=e.spaces.space16;return{icon:{marginStart:e.spaces.space4,width:t,height:t}};}),mt=n(24949),pt=n(923335),ht=n(392160),ft=n(72314),gt=n(922892),vt=n(944529),yt=n(929170),_t=n(467935),bt=n(20434),wt=n(820288),Tt=function Tt(e,t){var n=t.audienceControlsValue.communityIdValue||void 0;return n?ft.ZP.select(e,n):void 0;},Zt=function Zt(e,t){return(0,yt.t5)(e,yt.Us);},Ct=function Ct(e,t){return(0,yt.t5)(e,yt.kr);},Et=function Et(e){var t=(0,bt.Ln)(e);return t.length?t[0]:void 0;};var xt=(0,ht.Z)().propsFromState(function(){return{communities:ft.W0,educationalVisibilityFlag:Zt,trustedFriendsEducationVisibilityFlag:Ct,hasMemberships:vt.fn,selectedCommunity:Tt,sliceModule:(0,mt.P1)(_t.o1,function(e){return e?(0,gt.Z)(e):void 0;}),selectTrustedFriendsList:Et};}).propsFromActions(function(){return{createLocalApiErrorHandler:(0,pt.createLocalApiErrorHandlerWithContextFactory)("COMMUNITIES_CONTROLS"),addEducationFlag:function addEducationFlag(){return(0,yt.pj)(yt.Us);},addTrustedFriendsEducationFlag:function addTrustedFriendsEducationFlag(){return(0,yt.pj)(yt.kr);},updateSingleComposer:wt.zi,fetchOrCreateTrustedFriendsList:bt.BS};});var St=n(527519),It=n(204342),Pt=n(268117),kt=n(975081),At=n(764929),Rt=n(107333),Dt=n(958862),Nt=n(700831),Ft=function Ft(e,t){var n=t.communityId;return n?ft.ZP.select(e,n):void 0;};var Mt=(0,ht.Z)().propsFromState(function(){return{community:Ft};});var Lt=A().d58baa7f;var Bt=Mt(p.memo(function(e){var t=e.clickHandler,n=e.community,r=e.communityId,i=e.selectedCommunityId;if(!n)return null;var a,o=n.member_count;return p.createElement(St.Z,{actionSubText:(a=Lt(o),p.createElement(It.Z.Group,null,p.createElement(It.Z,null,p.createElement(A().I18NFormatMessage,{$i18n:"b38e130b"},p.createElement(It.Z.Value,null,A().ibd0106e({formattedCount:a})),p.createElement(It.Z.Label,null,A().cface2d1({count:o})))))),actionText:n.name,isSelected:i===r,key:r,media:n.media,onClick:t({_type:"community_members",communityIdValue:r,conversationControlsValue:"community_members"}),selectable:!0,style:Ot.menuItem});}));var Ot=I.Z.create(function(e){return{menuItem:{alignItems:"center"}};}),Vt=A().e815fc34,zt=A().c63602d4,Ut=A().d52a1caa,Ht=A().d0748dae,Wt=A().abd845fe,jt=A().d58baa7f,qt=I.Z.create(function(e){return{hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flex:1,flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"},superFollowsIcon:{backgroundColor:e.colors.plum500},viewport:{borderBottomStartRadius:e.borderRadii.xLarge,borderBottomEndRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto",zIndex:void 0}};});var Kt=function Kt(e){var t,n,r,i,a,o=e.audienceControlsValue,s=e.dismiss,l=e.everyoneLabel,c=e.hasMemberships,d=e.history,u=e.isC9sParticipationEnabled,m=e.isSuperFollowsCreator,h=e.isTrustedFriendsEnabled,f=e.onAudienceControlsValueChange,g=e.sliceModule,y=e.updateSingleComposer,_=o.communityIdValue||void 0,b=o.exclusivityControlValue||void 0,w=o.trustedFriendsValue||void 0,T=null===(t=e.trustedFriendsList)||void 0===t?void 0:t.rest_id,E=null!==(n=null===(r=e.trustedFriendsList)||void 0===r?void 0:r.member_count)&&void 0!==n?n:0,x=(0,q.z)(),S=p.useCallback(function(e){return function(){f(e),["super_followers_exclusive","community_members","trusted_friends_tweet"].indexOf(e._type)>-1&&y({updates:{scheduledFor:void 0,scheduledTweetId:void 0}}),s();};},[f,y,s]),I=p.useCallback(function(){if(T)return x.scribe({section:"audience_selector",component:"trusted_friends",element:"edit_list_button",action:"click"}),d.push("/i/circles/".concat(T,"/members"));},[x,d,T]);return p.createElement(v.Z,{style:qt.root},p.createElement(Dt.Z,{style:qt.viewport},p.createElement(p.Fragment,null,p.createElement(Z.ZP,{size:"headline1",style:qt.title,weight:"bold"},Vt),p.createElement(St.Z,{Icon:Pt["default"],actionText:l,isSelected:!b&&!_&&!w,onClick:S({_type:"conversation_controls",conversationControlsValue:"all"}),selectable:!0,style:qt.menuItem,withIconAsThumbnail:!0}),m?p.createElement(St.Z,{Icon:At["default"],actionText:Ut,iconThumbnailColor:"exclusive",isSelected:!!b,onClick:S({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}),selectable:!0,style:qt.menuItem,withIconAsThumbnail:!0}):null,h&&e.trustedFriendsList&&T?p.createElement(St.Z,{Icon:kt["default"],actionSubText:(i=E,a=jt(i),p.createElement(It.Z.Group,null,p.createElement(It.Z,null,p.createElement(A().I18NFormatMessage,{$i18n:"g8ffaf17"},p.createElement(It.Z.Value,null,A().a5f7b700({formattedCount:a})),p.createElement(It.Z.Label,null,A().a7daec1e({count:i}))),p.createElement(C.ZP,{onPress:I,size:"xSmall",type:"primaryText"},Wt)))),actionText:Ht,iconThumbnailColor:"success",isSelected:!!w,onClick:S({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:E,trustedFriendsValue:{trusted_friends_list_id:T}}),selectable:!0,style:qt.menuItem,withIconAsThumbnail:!0}):null),c&&g&&u?p.createElement(v.Z,null,p.createElement(Z.ZP,{style:qt.title,weight:"bold"},zt),p.createElement(Nt.Z,{module:g,noItemsRenderer:Rt.Z,renderer:function renderer(e){return p.createElement(Bt,{clickHandler:S,communityId:e,dismiss:s,key:e,selectedCommunityId:_});},withoutHeadroom:!0})):null));};var Gt=n(35953),Qt=n(744329);var $t=n.p+"twitter-circle.b1a74a9a.svg";var Yt=A().f0598964,Xt=A().ceec051c,Jt=A().fc5bfd96,en=A().f5b3dc1e,tn=I.Z.create(function(e){return{root:{flexDirection:"column",paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,paddingTop:e.spaces.space12},createButton:{marginTop:e.spaces.space16,marginHorizontal:e.spaces.space16},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16},coverContainer:{height:"170px",width:"100%"}};});var nn=function nn(e){var t=e.onAction,n=e.setShowTrustedFriendsModal;return p.createElement(p.Fragment,null,p.createElement(v.Z,{accessibilityDescribedBy:"trusted-friends-education-popover",accessibilityLabelledBy:"trustd-friends-education-title",accessibilityRole:"dialog",style:tn.root},p.createElement(v.Z,{style:tn.coverContainer},p.createElement(Gt.Z,{accessibilityLabel:"",aspectMode:Qt.Z.COVER,image:$t})),p.createElement(v.Z,{style:tn.title},p.createElement(Z.ZP,{nativeID:"conversation-controls-title",size:"title3",style:tn.title,weight:"bold"},Yt),p.createElement(Z.ZP,{color:"gray700",nativeID:"conversation-controls-details",size:"body",style:tn.createButton},Xt),p.createElement(C.ZP,{onPress:function onPress(){t(),n(!0);},size:"xLarge",style:tn.createButton,type:"primaryFilled"},Jt),p.createElement(C.ZP,{key:"button_cancel",onPress:function onPress(){t();},size:"xLarge",style:tn.cancelButton,type:"primaryOutlined"},en))));};var rn=n(888990),an=n(45680),on=n(905618),sn=n(789504),ln=n(845855),cn=A().e76b4486,dn=A().j24c37b2,un=A().bb55e8ee,mn=A().h3fad86e,pn=A().g31872be,hn=A().b28ec850,fn=A().h031847a;function gn(e){var t=e.changeAudienceToTrustedFriends,n=e.history,r=e.setShowModal,i=e.trustedFriendsListId,a=p.useCallback(function(){t(),i&&(r(!1),n.push("/i/circles/".concat(i,"/members/suggested")));},[n,r,i,t]),o=p.useCallback(function(){r(!1),t();},[r,t]),s=p.createElement(p.Fragment,null,p.createElement(v.Z,{style:vn.contentWrapper},p.createElement(v.Z,null,p.createElement(an["default"],{style:vn.icon})),p.createElement(v.Z,{style:vn.subtextContainer},p.createElement(Z.ZP,{align:"left",color:"text",style:vn.subtextContainer,weight:"bold"},un),p.createElement(Z.ZP,{align:"left",color:"gray700"},mn))),p.createElement(v.Z,{style:vn.contentWrapper},p.createElement(v.Z,null,p.createElement(sn["default"],{style:vn.icon})),p.createElement(v.Z,{style:vn.subtextContainer},p.createElement(Z.ZP,{color:"text",weight:"bold"},pn),p.createElement(Z.ZP,{color:"gray700"},hn))),p.createElement(v.Z,{style:vn.contentWrapper},p.createElement(v.Z,null,p.createElement(on["default"],{style:vn.icon})),p.createElement(v.Z,{style:vn.subtextContainer},p.createElement(Z.ZP,{color:"text",weight:"bold"},fn),p.createElement(Z.ZP,{color:"gray700"},p.createElement(A().I18NFormatMessage,{$i18n:"c97dfde5"},p.createElement(Z.ZP,{color:"text",link:"https://help.twitter.com/using-twitter/twitter-circle",style:vn.learnMore,weight:"bold",withUnderline:!0},A().i08a2509))))));return p.createElement(ln.nO,null,p.createElement(rn.Z,{actionLabel:dn,headline:cn,onAction:a,onClose:o,subtext:s,withCloseButton:!0}));}var vn=I.Z.create(function(e){return{subtextContainer:{display:"flex",flexDirection:"column",width:"100%"},icon:{color:e.colors.green500,paddingTop:e.spaces.space4,paddingEnd:e.spaces.space24},learnMore:{whiteSpace:"nowrap"},contentWrapper:{display:"flex",flexDirection:"row",paddingTop:e.spaces.space32}};}),yn=A().baffe39a,_n=A().e815fc34,bn=A().d52a1caa,wn=A().d0748dae,Tn=A().c33a97d6,Zn=A().a68885de;var Cn=I.Z.create(function(e){return{button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}};});var En=xt(function(e){var t,n=p.useState(!1),r=(0,a.Z)(n,2),i=r[0],o=r[1],s=p.useState(!1),l=(0,a.Z)(s,2),c=l[0],d=l[1],u=e.addEducationFlag,m=e.addTrustedFriendsEducationFlag,h=e.audienceControlsValue,f=e.disabled,g=e.educationalVisibilityFlag,y=e.experiments,_=e.hasMemberships,b=e.isAccountProtected,w=e.isSuperFollowsCreator,T=e.onAudienceControlsValueChange,Z=e.selectTrustedFriendsList,C=e.selectedCommunity,E=e.sliceModule,x=e.trustedFriendsEducationVisibilityFlag,S=e.updateSingleComposer,I=y.isC9sParticipationEnabled,P=y.isTrustedFriendsEnabled,k=y.trustedFriendsAudienceControlExp,R="default_everyone"===k,D="public_followers_copy"===k&&!w&&!_&&!P,N=h.communityIdValue||!1,F=h.exclusivityControlValue||!1,M=h.trustedFriendsValue||!1,L=null==Z?void 0:Z.rest_id,B=P&&x,O=g&&!C||B,V=yn=!D||P||w||_||b?!D||!b||P||w||_?A().baffe39a:Zn:Tn;if(N&&null!=C&&C.name?V=C.name:F?V=bn:M&&(V=wn),F)t={color:"plum500",borderColor:"plum500",backgroundColor:"transparent"};else if(M)t={color:"green500",borderColor:"green500",backgroundColor:"transparent"};else if(N&&null!=C&&C.theme){var z=it.Z.getCommunityUIColorName(C.theme);t={color:z,borderColor:z,backgroundColor:"transparent"};}else t={type:"brandOutlined"};(0,st.q)(function(){var t=e.fetchOrCreateTrustedFriendsList;P&&(null==t||t());});var U,H=p.useCallback(function(){d(!1),u(),m();},[u,m]),j=p.useCallback(function(e){return B&&!N?p.createElement(nn,{history:ot["default"],onAction:e,setShowTrustedFriendsModal:o}):p.createElement(Kt,{audienceControlsValue:h,dismiss:e,everyoneLabel:yn,hasMemberships:_,history:ot["default"],isC9sParticipationEnabled:I,isSuperFollowsCreator:w,isTrustedFriendsEnabled:P,onAudienceControlsValueChange:function onAudienceControlsValueChange(e){H(),T(e);},sliceModule:E,trustedFriendsList:Z,updateSingleComposer:S});},[H,E,S,h,_,I,w,Z,T,N,B,P]),q=p.useCallback(function(){L&&T({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:null==Z?void 0:Z.member_count,trustedFriendsValue:{trusted_friends_list_id:L}});},[T,L,Z]);return R||D||w||_||P&&e.selectTrustedFriendsList?(U=O&&!i?"forceVisible":"interactive",p.createElement(v.Z,{style:Cn.container},i?p.createElement(gn,{changeAudienceToTrustedFriends:q,history:ot["default"],setShowModal:o,trustedFriendsListId:L}):null,p.createElement(at.Z,{disabled:f,onDismiss:H,onOpen:function onOpen(){d(!0);},renderContent:j,visibilityBehavior:U},p.createElement(dt,(0,W.Z)({accessibilityExpanded:c,accessibilityHasPopup:"menu",accessibilityLabel:_n,accessibilityRole:"button",disabled:f,size:"xSmall"},t),V)))):null;});var xn=n(191300),Sn=n(824797),In=n(480833),Pn=function Pn(e,t){var n=t.selectedCommunityId;return n?ft.ZP.select(e,n):void 0;};var kn=(0,ht.Z)().propsFromState(function(){return{community:Pn};}).propsFromActions(function(){return{createLocalApiErrorHandler:(0,pt.createLocalApiErrorHandlerWithContextFactory)("COMMUNITY_RULES"),fetchCommunityIfNeeded:ft.ZP.fetchOneIfNeeded};});var An=A().gfca5254,Rn=A().f510c8b2,Dn=p.createElement(Z.ZP,{weight:"bold"},Rn),Nn=I.Z.create(function(e){return{button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},badgeStyle:{marginEnd:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"}};});var Fn=kn(function(e){var t=e.community,n=e.createLocalApiErrorHandler,r=e.fetchCommunityIfNeeded,i=e.selectedCommunityId,o=e.showMiddot;p.useEffect(function(){i&&(0,Sn.Z)(t)&&r(i)["catch"](n());},[t,i,n,r]);var s=p.useState(!1),l=(0,a.Z)(s,2),c=l[0],d=l[1],u=p.useCallback(function(e){if(null!=t&&t.rules){var n=t.rules,r=t.theme;return p.createElement(In.Z,{badgeStyle:Nn.badgeStyle,headerContainerStyle:Nn.rulesHeader,heading:Dn,ruleContainerStyle:Nn.ruleContainerStyle,rules:n,theme:r});}return null;},[t]);if(null!=t&&t.rules&&t.rules.length>0){var m=t.theme,h={color:it.Z.getCommunityUIColorName(m),borderColor:"transparent",backgroundColor:"transparent"};return p.createElement(v.Z,{style:Nn.container},o?p.createElement(xn.Z,null):null,p.createElement(at.Z,{onDismiss:function onDismiss(){return d(!1);},onOpen:function onOpen(){return d(!0);},renderContent:u},p.createElement(C.ZP,(0,W.Z)({accessibilityExpanded:c,accessibilityHasPopup:"dialog",accessibilityRole:"button",size:"xSmall",style:Nn.button},h),An)));}return null;});var Mn=n(325559),Ln=A().g46f363e,Bn=function Bn(){var e=(0,Mn.m)(yt.qF),t=(0,a.Z)(e,2),n=t[0],r=t[1];return p.useEffect(function(){return r;},[r]),n?p.createElement(v.Z,{style:On.container},p.createElement(x.Z,{onClose:r,text:Ln,withCloseButton:!0})):null;},On=I.Z.create(function(e){return{container:{marginBottom:e.spaces.space8}};});var Vn=p.memo(Bn);var zn=n(999571),Un=n(178780),Hn=n(331261),Wn=n(586348),jn=n(158804),qn=n(119884),Kn=n(455358),Gn=n(809739),Qn=n(865625),$n=n(795254),Yn=n(593477),Xn=n(715973),Jn=n(58041),er=n(212530),tr=n(548492),nr=n(781768),rr=n(740997),ir=n(868673),ar=n(187191),or=n(342184),sr=n(248734),lr=function lr(e,t){return(0,yt.t5)(e,yt.Oe);};var cr=(0,ht.Z)().propsFromState(function(){return{shouldShowEducation:lr};}).propsFromActions(function(){return{addEducationFlag:function addEducationFlag(){return(0,yt.pj)(yt.Oe);}};});var dr=A().aa65a44a;var ur=I.Z.create(function(e){return{container:{width:"100%"}};});var mr=cr(function(e){var t=e.addEducationFlag,n=e.buttonRef,r=e.shouldShowEducation,i=p.useContext(Hn.rC).featureSwitches,a=function a(){t();};return p.useEffect(function(){return a;},[]),!0===i.getValueWithoutScribeImpression("conversation_controls_persistence_enabled")&&r?p.createElement(v.Z,{style:ur.container},p.createElement(sr.Z,{containerRef:n,onClose:a,text:dr})):null;});var pr=n(558355),hr=n(796014),fr=["analytics"],gr=p.createElement(ar["default"],null),vr=p.createElement(ir["default"],null),yr=p.createElement(or["default"],null),_r=p.createElement(an["default"],null),br=p.createElement(sn["default"],null);Object.freeze(["community","by_invitation"]);var wr=(0,q.Z)(function(e){var t=e.analytics,n=(0,j.Z)(e,fr),r=e.disabled,i=e.isAccountProtected,o=e.isReply,s=e.trustedFriendsTweetAuthorScreenName,l=e.value,c=i?A().b939aa61:A().d5751711,d=i?A().h420b366:A().b7bd6cbc,u=i?A().c2e19f94:A().d472f63c;o&&l===hr.k.trusted_friends_tweet&&(d=s?c({screenName:s}):u);var m=Object.freeze({all:{icon:gr,label:A().i8ea6d4e},community:{icon:yr,label:A().ec5a4a26},by_invitation:{icon:vr,label:A().b454300a},community_members:{icon:_r,label:A().i13be5a0},super_followers_exclusive:{icon:gr,label:A().feb7560a},trusted_friends_tweet:{icon:br,label:d}})[l],h=m.icon,f=m.label,g=p.useState(!1),y=(0,a.Z)(g,2),_=y[0],b=y[1],w=p.useRef(null);(0,st.q)(function(){l!==hr.k.all&&l!==hr.k.community_members&&b(!0);});var T=p.useCallback(function(e){t.scribe({element:"conversation_control",action:"click"});},[t]);return p.createElement(v.Z,{style:Tr.educationContainer},_?p.createElement(mr,{buttonRef:w}):null,p.createElement(v.Z,{style:Tr.controlsContainer},p.createElement(pr.Z,n,p.createElement(C.ZP,{accessibilityLabel:f,disabled:r,icon:h,onPress:T,ref:w,size:"xSmall",style:Tr.button,type:"brandText"},f))));});var Tr=I.Z.create(function(e){return{button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},educationContainer:{display:"inline-flex",flexDirection:"column"},controlsContainer:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}};}),Zr=n(724376),Cr=n(954477),Er=n(865221),xr=n(35539),Sr=n(637680),Ir=n(567694),Pr=n(639002),kr=n(466999),Ar=n(362106),Rr=n(67181),Dr=function Dr(e){return e;};function Nr(e){var t,n=e.count,r=e.finalMaxCount,i=e.finalWarningCount,a=e.initialMaxCount,o=e.formatNumber,s=void 0===o?Dr:o,l=e.initialWarningCount,c=a-n,d=r-n;t=c>=0?Mr.charactersRemainingInStandardTweetAndTotalMessage({standardTweetCount:s(c),totalCount:s(d)}):d>=0?Mr.charactersRemainingMessage({count:s(d)}):Mr.characterOverLimitMessage({count:s(n-r)});var u=null;n>=l&&(u=p.createElement(kr.Z,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:I.Z.visuallyHidden},t));var m=(0,Ar.Z)(c,a),h=c>0||d<0?0:(0,Ar.Z)(d,r),f="primary";n>=r?f="red500":n>=i&&(f="yellow500");var g=p.createElement(Rr.Z,{color:f,colorInner:f,progress:m,progressInner:h,size:n>=l?30:20,style:[Fr.progressCircle,d<=-10&&Fr.hide]}),y=null;return n>=l&&n<a?y=p.createElement(kr.Z,{style:[Fr.text,Fr.gray700],testID:"dual-phase-countdown-circle-text"},s(c)):n>=i&&(y=p.createElement(kr.Z,{style:[Fr.text,n>r?Fr.red500:Fr.white],testID:"dual-phase-countdown-circle-text"},s(d))),p.createElement(v.Z,{style:[Fr.root,Fr.center],testID:"dual-phase-countdown-circle"},u,g,p.createElement(v.Z,{style:[I.Z.absoluteFill,Fr.center]},y));}var Fr=I.Z.create(function(e){var t=e.colors;return{root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:"0.8",minWidth:16,textAlign:"center"},gray700:{color:t.gray700},red500:{color:t.red500},white:{color:t.white}};}),Mr={characterOverLimitMessage:A().c2fc878d,charactersRemainingInStandardTweetAndTotalMessage:A().b919a9ff,charactersRemainingMessage:A().db11b27f},Lr=n(437756);function Br(e){var t=e.isThread,n=(0,Hn.QZ)(),r=rr.kh.maxWeightedTweetLength,i=e.data.text,a=p.useMemo(function(){return(0,Lr.k)(i).weightedLength;},[i]),s=rr.g0(e.userLanguage),l=(0,o.Z)((0,o.Z)({},n),{},{isThread:t});if(tr.Oc(l)){var c=rr.WT.max_count(l),d=rr.WT.warning_count(l);return p.createElement(Nr,{count:a,finalMaxCount:c,finalWarningCount:d,formatNumber:s,initialMaxCount:r,initialWarningCount:rr.pD});}return p.createElement(Pr.Z,{count:a,formatNumber:s,maxCount:r,warningCount:rr.pD});}var Or=n(506281),Vr=n(768469),zr=["editorStateRaw"];function Ur(e){var t=e.isThread,n=(0,Hn.QZ)();if(!e.isActive)return null;var r=(0,o.Z)((0,o.Z)({},n),{},{isThread:t}),i=e.data,a=(i.editorStateRaw,(0,j.Z)(i,zr));return tr.SC(a,r)?p.createElement(Hr,null):null;}function Hr(){var e=p.useState(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],i=p.useCallback(function(){return r(!0);},[]),o=Vr.k.maxWeightedTweetLength;return n?null:p.createElement(sr.Z,{backgroundColor:"primary",onClose:i,text:Wr.tooltip({count:o})});}var Wr={tooltip:A().hb36f723},jr=n(578793),qr=n(14170),Kr=n(177953),Gr=n(5255),Qr=n(918255),$r=["id"];function Yr(e){e.id;var t=(0,j.Z)(e,$r);return p.createElement(St.Z,t);}function Xr(e){return e.children;}var Jr=["id","onClick"];function ei(e){var t=e.children,n=p.useState(!1),r=(0,a.Z)(n,2),i=r[0],o=r[1],s=ni(Xr,t),l=(0,a.Z)(s,1)[0],c=ni(Yr,t);return p.createElement(at.Z,{onDismiss:function onDismiss(){return o(!1);},onOpen:function onOpen(){return o(!0);},preferredHorizontalOrientation:"end",renderContent:function renderContent(e,t){var n=["sheet"===t&&ti.sheet_container];return p.createElement(v.Z,{style:n},c.map(function(n){return function(e){var t=e.child,n=e.dismiss,r=(e.type,t.props),i=r.id,a=r.onClick,o=(0,j.Z)(r,Jr),s=function s(e){"function"==typeof a&&a(e),n();};return p.createElement(St.Z,(0,W.Z)({key:i},o,{onClick:s}));}({child:n,dismiss:e,type:t});}));}},p.createElement(dt,{accessibilityExpanded:i,accessibilityHasPopup:"menu",accessibilityRole:"button",size:"xSmall",type:"primaryOutlined"},l));}ei.Selected=Xr,ei.Item=Yr;var ti=I.Z.create(function(e){return{sheet_container:{paddingHorizontal:e.spacesPx.space8,paddingVertical:e.spacesPx.space16}};});function ni(e,t){var n=[];return p.Children.forEach(t,function(t){t.type===e&&n.push(t);}),n;}function ri(e){var t=(0,Kr.I0)(),n=(0,Hn.QZ)(),r=n.featureSwitches,i=n.userClaims;if(!r.isTrue("media_async_upload_longer_video_resolution_selector"))return null;var a=e.mediaItem,o=a.enable_1080p_variant,s=a.id,l=a.mediaFile;if((0,Gr.SB)({featureSwitches:r,userClaims:i})<1||null==l||!l.isVideo)return null;var c,d=l.height,u=l.width,m=Math.min(d,u),h=Math.max(d,u);if(!(m>=1080||h>=1920))return null;function f(e){t((0,Qr._J)({id:s,enable_1080p_variant:e})),t((0,Qr.dD)(s));}return c=o?p.createElement(Z.ZP,null,"1080p"):p.createElement(p.Fragment,null,p.createElement(Z.ZP,null,"720p"),p.createElement(Ue.Z,{size:"space4"}),p.createElement(Z.ZP,{size:"subtext2",weight:"heavy"},ai.recommended)),p.createElement(v.Z,null,p.createElement(Ue.Z,{size:"space8"}),p.createElement(v.Z,{style:ii.container},p.createElement(ei,null,p.createElement(ei.Selected,null,p.createElement(Z.ZP,{color:"text",size:"subtext1",weight:"medium"},c)),p.createElement(ei.Item,{actionSubText:ai.recommended,actionText:"720p",id:"720p",onClick:function onClick(){return f(!1);}}),p.createElement(ei.Item,{actionSubText:ai.rarely_needed,actionText:"1080p",id:"1080p",onClick:function onClick(){return f(!0);}}))));}var ii=I.Z.create(function(e){return{container:{display:"inline-flex",flexDirection:"row"}};}),ai={recommended:A().ef8f5d90,rarely_needed:A().a7046fb0};function oi(e){var t,n=e.mediaItem,r=1024*(0,Hn.QZ)().featureSwitches.getNumberValue("media_async_upload_longer_video_max_video_size");return null!=n&&null!==(t=n.mediaFile)&&void 0!==t&&t.isVideo?p.createElement(v.Z,null,p.createElement(ri,{mediaItem:n}),p.createElement(Ue.Z,{size:"space8"}),p.createElement(jr.Z.Primary,{action:si(n),headline:ci(n,r),text:li(n,r)})):null;}function si(e){return{label:di.learn_more,link:pi};}function li(e,t){var n;if((null===(n=e.mediaFile)||void 0===n?void 0:n.size)>t){var r=t/1073741824;return di.callout_text_file_too_big({human_readable_max_size:r});}return di.callout_text;}function ci(e,t){var n,r=ui(e.uploadProgress||0);if((null===(n=e.mediaFile)||void 0===n?void 0:n.size)>t)return di.file_too_big_error;if(e.uploadFailed)return di.error;if(r>=1){var i=Math.floor(100*r);return di.uploaded({percent:i});}var o=qr.mL(r);if((0,a.Z)(o,1)[0]===qr.Hf.processing){var s=mi(r);return di.processing({percent:s});}var l=mi(r);return di.uploading({percent:l});}var di={error:A().c20aaf3e,uploaded:A().e4472565,processing:A().a06fa8fd,uploading:A().h7f340e5,learn_more:A().i859a9d4,callout_text:A().ee016dd6,file_too_big_error:A().daad8822,callout_text_file_too_big:A().i8ff6261,deliver_1080p_variant:A().b2c961a6},ui=function ui(e){return Math.max(0,Math.min(e,1));},mi=function mi(e){return Math.floor(100*e);},pi="https://help.twitter.com/using-twitter/twitter-videos",hi=n(25440);function fi(e){var t,n=e.maxMediaCount,r=void 0===n?Yn.e_:n,i=e.media,a=e.mediaAttachDisabled,o=e.onFilesAdded,s=e.setActiveParentKey,l=e.withMixedMedia,c=a||i.length>=r,d=i.length<r-1,u=l||0===i.length;return i.length>0&&(t=l?vi.addMedia:vi.addPhotos),p.createElement(hi.Z,{acceptGifs:u,acceptVideo:u,accessibilityLabel:t,disabled:c,multiple:d,onChange:o,onPress:s,style:[gi.toolBarButton,gi.firstToolBarButton],type:"brandText"});}var gi=I.Z.create(function(e){return{firstToolBarButton:{marginStart:"-".concat(e.spaces.space8)},toolBarButton:{marginHorizontal:0}};}),vi={addMedia:A().acf3ecf4,addPhotos:A().bdbcdd94},yi=I.Z.create(function(e){return{container:{marginBottom:e.spaces.space4},link:{color:"black"}};}),_i=A().i859676c,bi=p.createElement(A().I18NFormatMessage,{$i18n:"a02c8d75"},p.createElement(Z.ZP,{link:"/settings/audience_and_tagging",style:yi.link,withInteractiveStyling:!0,withUnderline:!0},A().i3a8d60a));function wi(){return p.createElement(v.Z,{style:yi.container},p.createElement(x.Z,{headline:_i,text:bi}));}var Ti=n(331688);var Zi="addButton",Ci="addSubtitlesLabel",Ei="altTextLabel",xi="altTextWrapper",Si="tagPeopleLabel",Ii="attachments",Pi="createPollButton",ki="geoButton",Ai="gifSearchButton",Ri="scheduleOption",Di="tweetTextarea_",Ni="toolBar",Fi="scheduledTweetIndicator";var Mi=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(e,r){var i;return(0,s.Z)(this,n),i=t.call(this,e,r),(0,m.Z)((0,c.Z)(i),"_TypeaheadWrapper_onInputChange",function(){}),(0,m.Z)((0,c.Z)(i),"_isRichTextInput",function(){switch(i.props.withTextInputOverride){case"plain":return!1;case"rich":return!0;}return!!i.context.featureSwitches.isTrue("longform_notetweets_mobile_richtextinput")||!U.ZP.isMobileOS();}),(0,m.Z)((0,c.Z)(i),"_init_editorState",(0,M.Z)(function(){var e=i._isRichTextInput();if(e){var t=i.props.data,n=t.editorStateRaw,r=t.text,a=n||r;return{isRichTextInput:e,editorState:ze.Z.initEditorState(a)};}return{isRichTextInput:e};})),(0,m.Z)((0,c.Z)(i),"_renderControlsAndToolbar",function(e){return p.createElement(p.Fragment,null,i._renderControls(),p.createElement(y.Z,{show:i.props.isActive&&i.props.isExpanded},i._renderToolbar(e)));}),(0,m.Z)((0,c.Z)(i),"_handleConversationControlsValueChange",function(e){i._handleAudienceControlsValueChange({_type:"conversation_controls",conversationControlsValue:e});}),(0,m.Z)((0,c.Z)(i),"_handleAudienceControlsValueChange",function(e){i.props.updateAudienceControlsValue(e);}),(0,m.Z)((0,c.Z)(i),"_triggerConversationControlsImpression",(0,M.Z)(function(){return i.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled");})),(0,m.Z)((0,c.Z)(i),"_shouldRenderControls",function(e,t,n){var r=i.props,a=r.audienceControlsValue,o=r.isActive,s=r.isInline,l=r.isReply;return!("conversation"!==n||a.conversationControlsValue!==hr.k.community_members&&a.conversationControlsValue!==hr.k.super_followers_exclusive&&a.conversationControlsValue!==hr.k.trusted_friends_tweet||!l)||o&&!l&&(!s||t||e);}),(0,m.Z)((0,c.Z)(i),"_renderConversationControls",function(e){return p.createElement(rt,{store:Ti.Z},function(t){var n=i.props,r=n.audienceControlsValue,a=n.isAccountProtected,o=n.isInline,s=n.isReply,l=n.trustedFriendsTweetAuthorScreenName;if(s||!t.state.isFocused&&o||i._triggerConversationControlsImpression(),!i._conversationControlsCreationEnabled)return null;var c=r.conversationControlsValue,d=i._shouldRenderControls(e,t.state.isFocused,"conversation"),u=i._areConversationControlsDisabled();return d?p.createElement(wr,{disabled:u,isAccountProtected:a,isReply:s,onChange:i._handleConversationControlsValueChange,trustedFriendsTweetAuthorScreenName:l,value:c}):null;});}),(0,m.Z)((0,c.Z)(i),"_renderTaggedLocation",function(e){return p.createElement(v.Z,{style:_a.taggedLocationContainer},p.createElement(C.ZP,{icon:p.createElement(Ye["default"],null),onPress:i._handleGeoButtonClick,size:"xSmall",style:_a.taggedLocationButton,type:"brandText"},e.place.full_name));}),(0,m.Z)((0,c.Z)(i),"_renderMainContent",function(){var e=i.props,t=e.additionalToolbarContent,n=e.audienceControlsValue,r=e.data,a=e.index,o=e.isExpanded,s=e.isInline,l=e.isInlineReply,c=e.onTypeaheadStateChange,d=i._isRichTextInput(),u=(0,Un.s)(r.cardUrl),m=(0,zn.dm)(r.text);m||!r.cardUrl||u||(m=[r.cardUrl]);var h=!!r.media.length||r.pollActive||!!r.quotedStatus,f=d?Ir.Z:Sr.Z,g=!i._isEmpty(),y=i.context.featureSwitches.isTrue("c9s_community_composer_hashtag_suggestions_enabled")&&n.communityIdValue||void 0;return p.createElement(v.Z,{style:_a.textInputArea},p.createElement(v.Z,{style:o?_a.inputStyle:_a.collapsedInputStyle},i._renderAudienceControls(g),p.createElement(rt,{store:Ti.Z},function(e){var t=e.actions.select.anchorOffsetContextText(e.state),n=d?i._handleRichTextChange:i._handlePlainTextChange;return p.createElement(Sa,i.props,function(r){var a=r.dragPlaceholder;return p.createElement(f,{composeCommunityId:y,contextText:t,isInline:s,isInlineReply:l,onTextUpdated:n,onTypeaheadStateChange:c},function(t){return i._TypeaheadWrapper_onInputChange=t,i._renderFieldTextInput({Store:e,dragPlaceholder:a});});});}),p.createElement(Ur,i.props),!m||h?null:p.createElement(zn.ZP,{index:a,isCardPreviewTombstoned:u,urls:m})),o?null:t);}),(0,m.Z)((0,c.Z)(i),"_fieldTextInputProps",function(e){var t,n=i.props,r=n.autoFocus,a=n.data,o=n.editable,s=n.index,l=n.isActive,c=n.isExpanded,d=n.isInline,u=n.isInlineReply,m=n.isLast,h=n.onTextInputBlur,f=n.positionCursorAtBeginning,g=0===s&&m,v=Object.assign({},i.props.keyCommandHandlers),y=[_a.textInputStyle];return!u||e.state.isRichTextInput||c||y.push(_a.textInputMobileCollapsed),l&&!g&&(i._deleteNonemptyTweetstormComposerEnabled||i._isEmpty())&&(t=p.createElement(C.ZP,{accessibilityLabel:Wi,hoverLabel:{label:qi},icon:fa,onPress:i.props.onRemoveComposer,size:"xSmall",type:"brandText"})),{appTextSize:"headline1",ariaLabel:Vi,autoFocus:r||l&&!d,closeButton:t,contentBelow:i._renderTweetAttachment(),editable:o,inputStyle:y,keyCommandHandlers:v,multiline:!0,numberOfLines:i._calcNumberOfLines(),onBlur:h,onFilesAdded:i._handleFilesAdded,placeholder:i._getPlaceHolderText(),positionCursorAtBeginning:f,positionCursorAtEnd:!f,ref:i._setTextInputRef,styleType:"selection",testID:"".concat(Di).concat(s),useCacheForDOMMeasurements:e.state.isFocused,value:a.text};}),(0,m.Z)((0,c.Z)(i),"_renderFieldTextInput",function(e){var t=e.Store,n=e.dragPlaceholder,r=i._fieldTextInputProps(t);if(!t.state.isRichTextInput)return p.createElement(Be.Z,(0,W.Z)({},r,{maxNumberOfLines:10,onChange:i._handlePlainTextChange}));var a=t.state.editorState,s={sendTweetCommandName:Xn.NF,dismissComposerCommandName:Xn.Bp,editorState:a,element:Ve.Z,dragPlaceholder:n,stripPastedStyles:!0,blockRendererFn:void 0,blockRenderMap:void 0};if(tr.v$.writeEnabled(i._note_tweet_context)){s.stripPastedStyles=!1;var l={renderMedia:function renderMedia(e){var t,n=(0,Pe.Z)(i.props.data.media);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e){var a={is_inline:!0};return i._renderMediaList([r],a);}}}catch(o){n.e(o);}finally{n.f();}return null;}};s.blockRendererFn=function(e){if(e.getType()===Fe.UP)return{component:Ea,props:l,editable:!1};};var c=ke.DefaultDraftBlockRenderMap;c=(c=c.set(Fe.UP,{wrapper:p.createElement(Or.q,null)})).set(Fe.Wo,(0,o.Z)((0,o.Z)({},ke.DefaultDraftBlockRenderMap.get(Fe.Wo)),{},{wrapper:p.createElement(Or.q,null)})),s.blockRenderMap=c,Object.assign(r.keyCommandHandlers,{bold:function bold(){return t.actions.mut.toggleInlineStyle("Bold");},italic:function italic(){return t.actions.mut.toggleInlineStyle("Italic");}});}return p.createElement(Be.Z,(0,W.Z)({},r,{maxNumberOfLines:30,onChange:i._handleRichTextChange,richTextInputContext:s}));}),(0,m.Z)((0,c.Z)(i),"_renderCommunityTweetFromProtectedUserCallout",function(){return 0===i.props.index&&i.props.isCommunityTweetFromProtectedUser?p.createElement(wi,null):null;}),(0,m.Z)((0,c.Z)(i),"_renderAudienceControls",function(e){var t=i.props,n=t.audienceControlsValue,r=t.index,a=t.isAccountProtected,o=t.isEdit,s=t.isSuperFollowsCreator,l=i.context.featureSwitches.isTrue("c9s_participation_enabled"),c=i.context.featureSwitches.isTrue("super_follow_exclusive_tweet_creation_api_enabled"),d=i.context.featureSwitches.isTrue("trusted_friends_tweet_creation_enabled"),u=i.context.featureSwitches.getStringValue("trusted_friends_audience_control_exp_variant");return p.createElement(rt,{store:Ti.Z},function(t){var m=i._shouldRenderControls(e,t.state.isFocused,"audience"),h={isC9sParticipationEnabled:l,isTrustedFriendsEnabled:d,trustedFriendsAudienceControlExp:u};return m&&0===r&&(l||c||d)?p.createElement(En,{audienceControlsValue:n,disabled:o,experiments:h,isAccountProtected:a,isSuperFollowsCreator:s&&c,onAudienceControlsValueChange:i._handleAudienceControlsValueChange}):null;});}),(0,m.Z)((0,c.Z)(i),"_calcNumberOfLines",function(){var e=i.props,t=e.data,n=e.isActive,r=e.isInline,a=i._isRichTextInput(),o=t.media,s=t.pollActive,l=t.quotedStatus,c=!!o.length||!!s||!!l;return a&&(r||c)||!n?ha:pa;}),(0,m.Z)((0,c.Z)(i),"_renderScheduledTweetLegend",function(){return p.createElement(xr.Z,{onPress:i._handlePressScheduledTweetLegend,scheduledFor:i.props.scheduledFor,testID:Fi});}),(0,m.Z)((0,c.Z)(i),"_handlePressScheduledTweetLegend",function(){i.props.history.push("/compose/tweet/schedule"),i.props.analytics.scribe({element:"tweet_legend",action:"click"}),i.props.setActiveParentKey();}),(0,m.Z)((0,c.Z)(i),"_maybeRenderEmojiPicker",function(){return i._isRichTextInput()?p.createElement(rt,{store:Ti.Z},function(e){var t=e.state.editorState;if(!t)return null;return p.createElement(Zr.Z,{onEmojiSelect:function onEmojiSelect(e){var n=ze.Z.insertTextAtCursor(t,e.text);i._handleRichTextChange(n);},size:"medium",style:_a.iconEmojiPicker,textInputRef:i._textInputRef||void 0});}):null;}),(0,m.Z)((0,c.Z)(i),"_areConversationControlsDisabled",function(){var e=i.props,t=e.audienceControlsValue,n=e.isEdit,r=t.conversationControlsValue;return r===hr.k.community_members||r===hr.k.super_followers_exclusive||r===hr.k.trusted_friends_tweet||n||i._isScheduled();}),(0,m.Z)((0,c.Z)(i),"_isSchedulingDisabled",function(){var e=i.props,t=e.audienceControlsValue,n=e.data,r=e.index,a=e.isEdit,o=e.isLast,s=0===r&&o,l=t.conversationControlsValue!==hr.k.all,c=tr.SC(n,i._note_tweet_context),d=n.media,u=n.quotedStatus,m=n.text,p=c||i.props.data.pollActive||a||!s||u&&""===m&&!d.length||l||i.props.data.mediaTags.length>0;return Boolean(p);}),(0,m.Z)((0,c.Z)(i),"_renderSchedulingButton",function(){return p.createElement(C.ZP,{accessibilityLabel:Oi,disabled:i._isSchedulingDisabled(),hoverLabel:{label:Gi},icon:ya,onClick:i._handleClickScheduler,size:"medium",testID:Ri,type:"brandText"});}),(0,m.Z)((0,c.Z)(i),"_handleClickScheduler",function(){i.props.history.push("/compose/tweet/schedule"),i.props.analytics.scribe({element:"schedule_tweet",action:"click"}),i.props.setActiveParentKey();}),(0,m.Z)((0,c.Z)(i),"_renderMediaList",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.length)return null;var n,r,a,s=i.ComposerStore,l=i.context,c=(0,o.Z)({},s.state),d=tr.v$.enabled({context:l,state:c});if(i.isEditMediaEnabled){if(i.hasAttachedImage)r=n=i._handleClickMediaDetail(Kn.P.Crop);else if(i.hasAttachedVideo){var u=i._videoTrimmerEnabled?Kn.P.Trimmer:Kn.P.Subtitles;r=i._handleClickMediaDetail(u);}if(i.hasAttachedImage||i.hasAttachedVideo){var m=Kn.P.SensitiveMedia;a=i._handleClickMediaDetail(m);}}var h,f,g=function g(e){i._mediaPreviewRef=e;},v=function v(e){return function(){i.props.onRemoveMedia(i.props.index,e),d.features.inline_media&&i.ComposerStore.actions.mut.defer_editorState(function(t){var n=t.editorState;return Ta({media_id:e,editorState:n});});};};if(d.features.inline_media){if(t.is_inline)h=e;else{h=[];for(var y=s.state.editorState,_=Za({editorState:y}),b=0;b<e.length;b++){var w=e[b];_.has(w.id)||h.push(w);}f=function f(e){for(var t,n=0;n<h.length;n++){h[n].id===e&&(t=n);}return Re()("number"==typeof t,"invalid [".concat(e,"]")),ba({index:t,media_id:e,Store:s});};}}else h=e;return p.createElement(Er.Z,{editable:i.props.editable,getDraggableIndex:f,isActive:i.props.isActive,media:h,onClickMedia:n,onEditMedia:r,onEditSensitiveWarning:a,onRemoveMedia:v,onSetMediaPreviewRef:g});}),(0,m.Z)((0,c.Z)(i),"_renderTweetAttachment",function(){var e=i.props.data;if(0===e.media.length&&!e.pollActive&&!e.quotedStatus)return null;var t=(0,a.Z)(e.media,1)[0];return p.createElement(v.Z,{onClick:i._handleFocus,style:[_a.attachmentContainer,_a.tweetAttachmentArea],testID:Ii},p.createElement(Ue.Z,{size:"space4"}),i._renderMediaList(e.media),i.props.isActive?i._renderMediaActions():null,p.createElement(oi,{mediaItem:t}),e.pollActive?p.createElement(Ie,{composerIndex:i.props.index,editable:i.props.editable,initialChoices:e.pollChoices,initialDuration:e.pollDuration,isActive:i.props.isActive,isPollValid:e.pollValid,updateComposer:i.props.updateSingleComposer}):null,e.quotedStatus?i._renderQuoteTweet(e.quotedStatus):null);}),(0,m.Z)((0,c.Z)(i),"_renderQuoteTweet",function(e){var t=i.props.data.media,n=e.tombstoneInfo;return n&&n.richText?p.createElement(Gn.Z,null,p.createElement(qn.Z,{entities:n.richText.entities,rtl:n.richText.rtl,text:n.richText.text})):p.createElement(jn.Z,{isCondensed:t.length>0,style:_a.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1});}),(0,m.Z)((0,c.Z)(i),"_renderToolbar",function(e){var t=i.props,n=t.additionalToolbarContent,r=t.data.media,a=t.hidePoll,o=t.hideScheduling,s=t.isInlineReply,l=t.isReply,c=t.isSelfThreadReply,d=t.setActiveParentKey,u=!s&&!a,m=!s&&!o,h=i.context.featureSwitches.isTrue("responsive_web_reply_storm_enabled"),f=e&&(!l||c||h);return p.createElement(v.Z,{style:_a.toolBar,testID:Ni},p.createElement(v.Z,{style:_a.toolBarIconsContainer},p.createElement(fi,{media:r,mediaAttachDisabled:i.mediaAttachDisabled,onFilesAdded:i._handleFilesAdded,setActiveParentKey:d}),i._renderGifButton(),u?i._renderPollButton():null,i._maybeRenderEmojiPicker(),m?i._renderSchedulingButton():null,i._renderGeoButton(),p.createElement(Ti.Z.InlineStyleButton,{style:"Bold"}),p.createElement(Ti.Z.InlineStyleButton,{style:"Italic"})),p.createElement(v.Z,{style:_a.toolBarIconsContainer},e?p.createElement(Br,i.props):null,f&&p.createElement(p.Fragment,null,p.createElement(v.Z,{style:_a.separator}),i._renderAddComposerButton()),n));}),(0,m.Z)((0,c.Z)(i),"_handleRichTextChange",function(e){i._TypeaheadWrapper_onInputChange(e),i.ComposerStore.actions.mut.editorState(e);}),(0,m.Z)((0,c.Z)(i),"_handlePlainTextChange",function(e){i._TypeaheadWrapper_onInputChange(e);var t=He.Z.replaceCarriageReturns(e.target.value);i._handleTextChange({text:t});}),(0,m.Z)((0,c.Z)(i),"_handleTextChange",function(e){i.props.onTextChange(i.props.data.key,e),i._handleNoteTweetScribes(e);}),(0,m.Z)((0,c.Z)(i),"_handleNoteTweetScribes",function(e){if(tr.SC(e,i._note_tweet_context)){var t=i._getParsedTweet(e.text).weightedLength;i._scribeOnlyOnceEvents.hasStartedNoteTweet||(i.props.analytics.scribe({element:"note_tweet",action:"start"}),i._scribeOnlyOnceEvents.hasStartedNoteTweet=!0),t>rr.WT.warning_count(i._note_tweet_context)&&!i._scribeOnlyOnceEvents.hasSeenNoteTweetWarningCount&&(i.props.analytics.scribe({element:"note_tweet",action:"limit_warning"}),i._scribeOnlyOnceEvents.hasSeenNoteTweetWarningCount=!0),t>rr.WT.max_count(i._note_tweet_context)&&!i._scribeOnlyOnceEvents.hasExceededNoteTweetCharacterCount&&(i.props.analytics.scribe({element:"note_tweet",action:"limit_exceeded"}),i._scribeOnlyOnceEvents.hasExceededNoteTweetCharacterCount=!0);}}),(0,m.Z)((0,c.Z)(i),"_handleClickAltTextShortcut",function(){i.props.analytics.scribe({element:"alt_text_button",action:"click"});}),(0,m.Z)((0,c.Z)(i),"_handleClickSubtitlesShortcut",function(){i.props.analytics.scribe({element:"subtitles_button",action:"click"});}),(0,m.Z)((0,c.Z)(i),"_handleClickMediaDetail",function(e){return function(t){return function(){if(i.props.analytics.scribe({element:"media_detail_button",action:"click"}),i.hasAttachedImage||i.hasAttachedVideo){var n={mediaId:t,tab:e};i.props.history.push("/compose/tweet/media",n);}};};}),(0,m.Z)((0,c.Z)(i),"_handleFilesAdded",function(e){var t=i.props,n=t.addToast,r=t.data.pollActive,a=t.onFilesAdded;r?n({text:zi}):i.isEditMediaEnabled&&a(e);}),(0,m.Z)((0,c.Z)(i),"_validateMedia",function(e){var t=i.props.data.media;return Yn.X2(t.concat(e));}),(0,m.Z)((0,c.Z)(i),"_handlePollAdd",function(){i.props.analytics.scribe({element:"add_poll",action:"click"}),i.props.updateSingleComposer({pollActive:!0},i.props.index);}),(0,m.Z)((0,c.Z)(i),"_handleGeoButtonClick",function(){i.props.history.push("/compose/tweet/place_picker"),i.props.analytics.scribe({element:"tag_location",action:"click"}),i.props.setActiveParentKey();}),(0,m.Z)((0,c.Z)(i),"_handleWrapperClick",function(e){e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||i.focus();}),(0,m.Z)((0,c.Z)(i),"_handleFocus",function(){var e=i.props,t=e.index,n=e.isActive,r=e.onFocus;(0,e.setActiveParentKey)(),n||(window.requestAnimationFrame(function(){i._mediaPreviewRef&&i._mediaPreviewRef.playVideo();}),r(t));}),(0,m.Z)((0,c.Z)(i),"_getPlaceHolderText",function(){var e=i.props,t=e.data,n=t.pollActive,r=t.quotedStatus,a=e.index,o=e.isReply,s=e.isSelfThreadReply;return"en"===e.userLanguage?r?da:n?ma:i.isReplyOrReplyThread&&0===a?ua:o&&!s&&a>0?ca:s||a>0?la:sa:r?ia:n?oa:i.isReplyOrReplyThread&&0===a?aa:o&&!s&&a>0?ra:s||a>0?na:ta;}),(0,m.Z)((0,c.Z)(i),"_getNumberOfAltTextEntries",function(){return i.props.data.media.reduce(function(e,t){var n;return null!==(n=t.mediaMetadata)&&void 0!==n&&n.altText?e+1:e;},0);}),(0,m.Z)((0,c.Z)(i),"_getParsedTweet",(0,M.Z)(function(e){return rr.k2(e,i._note_tweet_context);})),(0,m.Z)((0,c.Z)(i),"_isEmpty",function(){var e=i.props.data;return(0,Jn._2)(e);}),(0,m.Z)((0,c.Z)(i),"_isScheduled",function(){var e=i.props.data.scheduledFor;return(0,nr.TO)(e);}),(0,m.Z)((0,c.Z)(i),"_autotagLocationIfNeeded",function(){var e=i.props,t=e.data.taggedLocation,n=e.fetchAutotaggedLocationIfNeeded,r=e.index,a=e.updateSingleComposer;n().then(function(e){void 0===t&&a({taggedLocation:null!=e?e:null},r);});}),(0,m.Z)((0,c.Z)(i),"_setTextInputRef",function(e){i._textInputRef=e;}),i._conversationControlsCreationEnabled=!0===i.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),i._deleteNonemptyTweetstormComposerEnabled=i.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),i._autotagLocationIfNeeded(),i._scribeOnlyOnceEvents={hasStartedNoteTweet:!1,hasSeenNoteTweetWarningCount:!1,hasExceededNoteTweetCharacterCount:!1},i;}return(0,l.Z)(n,[{key:"componentDidUpdate",value:function value(e){(this.hasExternalMedia||this.props.data.media.some(function(e){return e.mediaFile&&!(e.mediaFile instanceof nt.ZP)&&e.mediaFile.isVideo;}))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef.pauseVideo();}},{key:"focus",value:function value(){this._textInputRef&&this._textInputRef.focus();}},{key:"render",value:function value(){var e=this,t=this.props,n=t.isActive,r=t.isExpanded,i=t.withAvatar,a=!this._isEmpty(),o=function(e){var t,n,r;e.delegateUser?(t=e.delegateUser.userName,n=e.delegateUser.userScreenName,r=e.delegateUser.userAvatarImageUrl):e.loggedInUser&&(t=e.loggedInUser.name,n=e.loggedInUser.screen_name,r=e.loggedInUser.profile_image_url_https);return{name:t,screen_name:n,profile_image_url_https:r};}(this.props),s=this._init_editorState(),l=this._isRichTextInput(),c=this.props,d=c.isInline,u={init:s,state:{isThread:c.isThread,isRichTextInput:l}};return p.createElement(Ti.Z.Provider,u,p.createElement(rt,{store:Ti.Z},function(t){return e.ComposerStore=t,null;}),p.createElement(Ti.Z.DeveloperDebug,null),p.createElement(Ti.Z.ConvertEmojiEffect,null),p.createElement(Ti.Z.OverflowHighlightEffect,null),p.createElement(Ti.Z.PreserveUnstyledEntitiesEffect,null),p.createElement(Ti.Z.TextChangeEffect,{onTextChange:this._handleTextChange}),p.createElement(Ti.Z.TrackFocusView,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[_a.root,!n&&_a.blurStyle]},this._renderCommunityTweetFromProtectedUserCallout(),p.createElement(De.Z,{avatarCell:p.createElement(p.Fragment,null,i?p.createElement(Ne.Z.Consumer,null,function(t){var n=t.avatarSize;return p.createElement(We["default"],{accessibilityLabel:o.name,screenName:o.screen_name,size:n,style:_a.avatar,uri:o.profile_image_url_https,withLink:e.props.isInline});}):null,this.props.isLast?null:p.createElement(v.Z,{style:[_a.conversationLine,!i&&_a.conversationLineWithOverflow]})),avatarCellStyle:r?_a.avatarContainerExpanded:_a.avatarContainer,cellStyle:_a.rightColumn},this._renderScheduledTweetLegend(),p.createElement(v.Z,{style:_a.inputArea},p.createElement(Le.ZP,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleFilesAdded,style:_a.dragDrop},function(t){return p.createElement(v.Z,{style:_a.composeBoxContainer},e._renderMainContent());})),d?this._renderControlsAndToolbar(a):null),d?null:this._renderControlsAndToolbar(a)));}},{key:"_renderControls",value:function value(){var e=this,t=this.props,n=t.data.taggedLocation,r=t.windowWidth,i=!this._isEmpty(),a=r<I.Z.theme.breakpoints.small,o=this.props.audienceControlsValue.communityIdValue||void 0;return p.createElement(rt,{store:Ti.Z},function(t){var r,s,l=e._shouldRenderControls(i,t.state.isFocused),c=(r=e.context.featureSwitches.isTrue("c9s_enabled")&&o,s=e._shouldRenderControls(!1,t.state.isFocused,"conversation"),Boolean(s&&r));return p.createElement(p.Fragment,null,c?p.createElement(Vn,null):null,p.createElement(v.Z,{style:[(l||n)&&_a.controlsContainer,a?_a.mobileControlsLayout:_a.controlsLayout]},e._renderConversationControls(i),c&&o?p.createElement(Fn,{selectedCommunityId:o,showMiddot:!a}):null,n?e._renderTaggedLocation(n):null));});}},{key:"_renderGifButton",value:function value(){var e=this.props,t=e.data,n=t.media,r=t.pollActive,i=e.history,a=e.loggedInUser,o=e.setActiveParentKey,s=r||n.length||!a||!this.isEditMediaEnabled;return p.createElement(Cr.Z,{enabled:!s,gifSearchKeySource:er.AD.Composition,history:i,onPress:o,testID:Ai});}},{key:"_renderPollButton",value:function value(){var e,t,n,r,i,a,o,s,l=this.props,c=l.data,d=l.isEdit,u=l.loggedInUser,m=(e={composerData:c,isEditMode:d,isScheduled:this._isScheduled(),isUserLoggedIn:!!u},t=e.composerData,n=e.isEditMode,r=e.isScheduled,i=e.isUserLoggedIn,a=t.media,o=t.pollActive,s=t.quotedStatus,!!(o||a.length||s||r||!i||n));return p.createElement(C.ZP,{accessibilityLabel:Bi,disabled:m,hoverLabel:{label:Ki},icon:va,onPress:this._handlePollAdd,size:"medium",testID:Pi,type:"brandText"});}},{key:"_renderGeoButton",value:function value(){var e=this.props,t=e.data.taggedLocation,n=e.geoEnabled,r=e.loggedInUser,i=!(n&&r),a=t?p.createElement(Ye["default"],null):p.createElement(Xe["default"],null);return p.createElement(C.ZP,{accessibilityLabel:Qi,disabled:i,hoverLabel:{label:Qi},icon:a,onPress:this._handleGeoButtonClick,size:"medium",testID:ki,type:"brandText"});}},{key:"_renderMediaActions",value:function value(){var e=this.props.data,t=e.gifMetadata,n=e.media,r=0!==e.mediaTags.length,i=n.some(function(e){return e.mediaFile&&e.mediaFile.isGif;})||this.hasExternalMedia;if(!(this.hasAttachedImage||this.hasAttachedVideo||t||i))return null;var o=this.context.featureSwitches.isTrue("rweb_video_tagging_enabled"),s=(0,a.Z)(n,1)[0];return p.createElement(v.Z,{style:_a.imageActions},t&&t.url&&t.provider?p.createElement(v.Z,{style:_a.addImageTextPadding},p.createElement(Wn.Z,{gifUrl:t.url,provider:t.provider})):null,!this.hasAttachedImage&&!o||this._isScheduled()?null:p.createElement(Z.ZP,{accessibilityLabel:Xi,color:"gray700",link:"/compose/tweet/tags",style:[_a.addImageTextContainer,_a.addImageTextPadding]},r?this._renderTaggedUsers():this._renderTagPeopleLabel()),this.hasAttachedImage||i?p.createElement(Z.ZP,{accessibilityLabel:$i({numberOfImages:n.length}),color:"gray700",link:this.isEditMediaEnabled?{pathname:"/compose/tweet/media",state:{mediaId:s.id,tab:Kn.P.AltText}}:void 0,onPress:this.isEditMediaEnabled?this._handleClickAltTextShortcut:void 0,style:_a.addImageTextContainer,testID:xi},this._renderAltTextLabel()):null,this.hasAttachedVideo?this._renderSubtitlesLabel():null);}},{key:"_renderTagPeopleLabel",value:function value(){return p.createElement(Z.ZP,{color:"gray700",size:"subtext2",testID:Si},p.createElement(et["default"],{style:_a.addImageActionIcon}),Xi);}},{key:"_renderTaggedUsers",value:function value(){var e,t=this.props,n=t.data.mediaTags,r=t.delegateUser,i=t.loggedInUser,a=n.map(function(e){return{name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str};}),o=null!==(e=null==r?void 0:r.userId)&&void 0!==e?e:null==i?void 0:i.id_str;return p.createElement(Z.ZP,{color:"gray700",size:"subtext2"},p.createElement(Je["default"],{style:_a.addImageActionIcon}),p.createElement(Oe.Z,{loggedInUserId:o,users:a}));}},{key:"_renderAltTextLabel",value:function value(){var e=this.props.data.media,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?p.createElement(Z.ZP,{size:"subtext2",testID:Ei},p.createElement(Qe["default"],{style:_a.addImageActionIcon}),Yi({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):p.createElement(Z.ZP,{numberOfLines:1,size:"subtext2",testID:Ei},p.createElement(Qe["default"],{style:_a.addImageActionIcon}),null==t?void 0:t.altText):p.createElement(Z.ZP,{size:"subtext2",testID:Ei},p.createElement($e["default"],{style:_a.addImageActionIcon}),$i({numberOfImages:e.length}));}},{key:"_renderSubtitlesLabel",value:function value(){var e=this.props.data.media,t=this.attachedSubtitles?Ke["default"]:Ge["default"];return p.createElement(Z.ZP,{accessibilityRole:"button",color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:Kn.P.Subtitles}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:_a.addImageTextContainer,testID:Ci},p.createElement(t,{accessibilityLabel:this.attachedSubtitles?ea:void 0,style:_a.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:Ji);}},{key:"_renderAddComposerButton",value:function value(){var e=this.props,t=e.addComposerLink,n=e.disableAddTweet,r=e.isCommunityTweetFromProtectedUser,i=e.isEdit,a=e.loggedInUser,o=e.onAddComposer,s=this._isEmpty(),l=this._isScheduled(),c=i||n||s||l||!a||r;return p.createElement(C.ZP,{accessibilityLabel:this.isReplyOrReplyThread?Hi:Ui,disabled:c,hoverLabel:{label:ji},icon:ga,link:c?void 0:t,onPress:o,size:"xSmall",testID:Zi,type:"brandOutlined"});}},{key:"_note_tweet_context",get:function get(){var e=this.props.isThread;return(0,o.Z)((0,o.Z)({},this.context),{},{isThread:e});}},{key:"isEditMediaEnabled",get:function get(){var e=this.props.previousMedia;if(this.props.isEdit&&e){var t,n=new Set(),r=(0,Pe.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.add(i.uploadId);}}catch(l){r.e(l);}finally{r.f();}var a,o=(0,Pe.Z)(this.props.data.media);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(n.has(s.uploadId))return!1;}}catch(l){o.e(l);}finally{o.f();}}return!0;}},{key:"mediaAttachDisabled",get:function get(){var e=this.props.data.media.length,t=this.props.data.media.some(function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isGif;}),n=this.props.data.media.some(function(e){return e.mediaFile&&!(e.mediaFile instanceof nt.ZP)&&e.mediaFile.isVideo;}),r=4===e,i=t||n||this.hasExternalMedia;return r||i||this.props.data.pollActive||!this.props.loggedInUser||!this.isEditMediaEnabled;}},{key:"hasAttachedImage",get:function get(){return this.props.data.media.some(function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isImage;});}},{key:"hasAttachedVideo",get:function get(){var e=this.props.data.media.some(function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isVideo;});return e&&(this._videoTrimmerEnabled=this.context.featureSwitches.isTrue("responsive_web_video_trimmer_enabled")),e;}},{key:"attachedSubtitles",get:function get(){var e;if(this.hasAttachedVideo){var t=this.props.data.media.find(function(e){return e.mediaFile&&!(e.mediaFile instanceof nt.ZP)&&e.mediaFile.isVideo;});return null==t||null===(e=t.mediaMetadata)||void 0===e?void 0:e.subtitles;}}},{key:"hasAttachedAltText",get:function get(){return this._getNumberOfAltTextEntries()>0;}},{key:"hasExternalMedia",get:function get(){return this.props.data.media.some(function(e){return!!e.externalMediaDetails;});}},{key:"isReplyOrReplyThread",get:function get(){var e=this.props,t=e.isReply,n=e.isSelfThreadReply;return t&&!n;}}]),n;}(p.Component);(0,m.Z)(Mi,"contextType",Hn.rC),(0,m.Z)(Mi,"defaultProps",{withAvatar:!0});var Li=(0,q.Z)(Mi);var Bi=A().f0afcc0e,Oi=A().ha5e2e7a,Vi=A().a3de3b68,zi=A().cc2b28fc,Ui=A().g45af04e,Hi=A().j1d5791c,Wi=A().ee9c4014,ji=A().af40a8e0,qi=A().e68b09b4,Ki=A().ec10ee02,Gi=A().h735a98e,Qi=A().c4ccfbe2,$i=A().j499fbcb,Yi=A().b7d8e3f1,Xi=A().d1175c78,Ji=A().bf4e9d7a,ea=A().e0342f98,ta=A().e349147c,na=A().e3a24e4c,ra=A().fbd24526,ia=A().de4669e2,aa=A().d2c7a41c,oa=A().f7364fa2,sa=A().f8e5bf52,la=A().b1695ed6,ca=A().ad7cb5ba,da=A().f1352c90,ua=A().ad993b0e,ma=A().g1fb138a,pa=4,ha=1,fa=p.createElement(qe["default"],null),ga=p.createElement(G["default"],null),va=p.createElement(je["default"],null),ya=p.createElement(tt["default"],null),_a=I.Z.create(function(e){return{root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{marginStart:-e.spacesPx.space8,borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,flexWrap:"wrap",width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:$n.zF},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:$n.fr},iconEmojiPicker:{zIndex:$n.CX},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:$n.oH},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginEnd:e.spaces.space12,marginStart:"calc(".concat(e.spaces.space12," - 2px)")},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:"-".concat(e.spaces.space4)},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingStart:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4},taggedLocationButton:{paddingStart:e.spacesPx.space8+e.spacesPx.space2,paddingEnd:e.spacesPx.space8+e.spacesPx.space2,maxWidth:"100%"},taggedLocationContainer:{display:"inline-flex",flexDirection:"row",minWidth:0,flexShrink:1,paddingBottom:e.spaces.space12}};});function ba(e){var t,n=e.Store.state.editorState;if(wa(n,function(n){if(n.entity&&"number"!=typeof t){if(n.entity.type!==Me.Z.INLINE_IMAGE)throw new Error("unhandled entity [".concat(n.entity.type,"]"));n.entity.getData().media_id===e.media_id&&(t=n.i);}}),"number"!=typeof t){var r=n.getCurrentContent().getBlocksAsArray();t=r.length+e.index;}return t;}function wa(e,t){for(var n=e.getCurrentContent(),r=n.getBlocksAsArray(),i=0;i<r.length;i++){var a=r[i],o=null;if(a.getType()===Fe.UP)o=ze.Z.getAtomicEntity({block:a,contentState:n});t({block:a,entity:o,i:i,block_list:r});}}function Ta(e){var t=e.editorState,n=[];wa(t,function(t){var r=t.block,i=t.entity;if(i){if(i.type!==Me.Z.INLINE_IMAGE)throw new Error("unhandled entity [".concat(i.type,"]"));i.getData().media_id!==e.media_id&&n.push(r);}else n.push(r);});var r=ke.ContentState.createFromBlockArray(n);return t=ke.EditorState.push(t,r,"remove-range");}function Za(e){var t=new Set();return wa(e.editorState,function(e){var n=e.entity;if(n){if(n.type!==Me.Z.INLINE_IMAGE)throw new Error("unhandled entity [".concat(n.type,"]"));var r=n.getData();t.add(r.media_id);}}),t;}function Ca(e,t){var n,i=e,a=i.getCurrentContent();a=(n=a).createEntity.apply(n,(0,r.Z)(t)),i=ke.EditorState.createWithContent(a);var o=a.getLastCreatedEntityKey();i=ke.EditorState.moveSelectionToEnd(i);var s=(i=ke.AtomicBlockUtils.insertAtomicBlock(i,o," ")).getCurrentContent().getBlocksAsArray();return s[s.length-2];}function Ea(e){var t=ze.Z.getAtomicEntity(e);if(!t)return null;if(t.type===Me.Z.INLINE_IMAGE)return p.createElement(xa,(0,W.Z)({},e,{entity:t}));throw new Error("unhandled entity [".concat(t.type,"]"));}function xa(e){var t=e.entity.getData();return e.blockProps.renderMedia(t.media_id);}function Sa(e){var t=Ti.Z.useActions();if(!Ti.Z.useRichEnabled().features.inline_media){return e.children({dragPlaceholder:undefined});}return p.createElement(Qn._y,{onDragEnd:function onDragEnd(n){var r=t.getState();if(r.editorState){var i,a=e.data.media,o=r.editorState,s=o.getCurrentContent(),l=s.getBlocksAsArray(),c=s.getBlocksAsArray(),d=Za({editorState:o}),u=(0,Pe.Z)(a);try{for(u.s();!(i=u.n()).done;){var m=i.value.id;if(!d.has(m)){var p=Ca(o,[Me.Z.INLINE_IMAGE,Me.p.IMMUTABLE,{media_id:m}]);c.push(p);}}}catch(f){u.e(f);}finally{u.f();}var h=c[n.source.index];l.splice(n.source.index,1),l.splice(n.destination.index,0,h),s=ke.ContentState.createFromBlockArray(l),o=ke.EditorState.push(o,s,"move-block"),t.mut.editorState(o);}}},p.createElement(Qn.bK,{droppableId:e.data.key},function(t,n){var r=t.placeholder;return p.createElement("div",(0,W.Z)({ref:t.innerRef},t.droppableProps),e.children({dragPlaceholder:r}));}));}var Ia=n(330927),Pa=n(157659);var ka=(0,ht.Z)().propsFromState(function(){return{loggedInUser:Pa.ZP.selectLoggedInUser};}).adjustStateProps(function(e){var t=e.loggedInUser;return{userName:t&&t.name,userProfileImageUrl:t&&t.profile_image_url_https,userScreenName:t&&t.screen_name};}).withAnalytics();var Aa=n(378705),Ra=n(431165),Da=n(854044),Na=n(73206),Fa=I.Z.create(function(e){return{mainCard:{marginHorizontal:"auto",paddingVertical:e.spaces.space16,textAlign:"center",alignItems:"center"},largeScreenCard:{width:"70%"},smallScreenCard:{width:"85%"},sheetStyle:{justifyContent:"center"}};});var Ma=function Ma(e){var t=e.actionButtonType,n=e.children,r=e.onActionButtonClick,i=e.onMaskClick,a=e.sheetType,o=e.showActionButton;return p.createElement(Da.Z,null,function(e){var s=e.windowWidth>I.Z.theme.breakpoints.small;return p.createElement(Na.Z,{onMaskClick:i,style:Fa.sheetStyle,type:a,withMask:!0},o&&p.createElement(Aa.Z,{leftControl:p.createElement(Ra.Z,{backButtonType:t,onClick:r}),position:"absolute"}),p.createElement(v.Z,{style:[Fa.mainCard,s?Fa.largeScreenCard:Fa.smallScreenCard]},n));});};var La=I.Z.create(function(e){return{itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"}};});var Ba=function Ba(e){var t=e.onBack,n=e.onNo,r=e.onYes,i=e.payload;if(!i)return null;var a=i.cta_option1,o=i.cta_option2,s=i.heading,l=i.subheading,c=i.text;return p.createElement(Ma,{actionButtonType:"back",onActionButtonClick:t,onMaskClick:t,sheetType:"full",showActionButton:!0},p.createElement(Z.ZP,{size:"title4",style:La.itemPadding,weight:"heavy"},s),p.createElement(Z.ZP,{color:"gray700",style:La.itemPadding},c),p.createElement(v.Z,{style:La.buttonContainer},p.createElement(Z.ZP,{size:"title4",style:La.itemPadding,weight:"heavy"},l),p.createElement(C.ZP,{onPress:r,style:La.itemPadding,type:"brandOutlined"},a),p.createElement(C.ZP,{onPress:n,style:La.itemPadding,type:"brandOutlined"},o)));};var Oa=n(691974),Va=n(644515),za=n(695995),Ua=n(31735),Ha=n(58815),Wa=n(128428),ja=n(116257),qa=n(246874),Ka=n(900455),Ga=n(411839),Qa="icon-button",$a=I.Z.create(function(e){return{button:{width:e.spaces.space72,height:e.spaces.space72,marginBottom:e.spaces.space12}};});var Ya=function Ya(e){var t=e.icon,n=e.label,r=e.onPress;return p.createElement(Ga.Z,{interactiveStyles:null,onPress:r,testID:Qa},function(e){return p.createElement(p.Fragment,null,p.createElement(C.ZP,{icon:t,interactivityState:e,size:"xLarge",style:$a.button,type:"primaryOutlined"}),p.createElement(Z.ZP,{color:"gray700"},n));});};var Xa=A().abd845fe,Ja=A().bea869b4,eo=A().d96cf7ce,to=I.Z.create(function(e){return{itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"},profanityIcon:{backgroundColor:e.colors.primary,color:e.colors.whiteOnColor,width:e.spaces.space48,height:e.spaces.space48,borderRadius:e.borderRadii.infinite},tweetContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,width:"100%",textAlign:"start"},tweetContent:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},tweetBody:{flexDirection:"row"},userName:{paddingBottom:e.spaces.space4},mobileButtonContainer:{justifyContent:"space-around",flexDirection:"row",width:"100%",marginTop:e.spaces.space72},thanksContainer:{flexDirection:"row",alignItems:"center"},thanksCheckMark:{color:I.Z.theme.colors.primary,marginEnd:e.spaces.space8},photos:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",marginEnd:e.spaces.space12,flex:"3 1 0%"},textStyle:{flex:"8 1 0%"}};});var no=function no(e){var t=e.hasSentFeedback,n=e.media,r=e.onDeleteTweet,i=e.onDismiss,a=e.onEditTweet,o=e.onSendTweet,s=e.onWeGotItWrong,l=e.payload,c=e.tweetText,d=e.userName,u=e.userProfileImageUrl,m=e.userScreenName,h=l.heading,f=l.nudge_feedback_payload,g=l.subheading;if(!f)return null;var y=f.link_text,_=f.post_feedback_text;return p.createElement(Da.Z,null,function(e){var l,f,b,w=e.windowWidth;return p.createElement(Ma,{actionButtonType:"close",onActionButtonClick:i,onMaskClick:i,sheetType:"full",showActionButton:w>I.Z.theme.breakpoints.medium},p.createElement(Wa["default"],{style:[to.profanityIcon,to.itemPadding]}),p.createElement(Oa.Z,{size:"title4",style:to.itemPadding,weight:"heavy"},h),p.createElement(Z.ZP,{color:"gray700",style:to.itemPadding},g),p.createElement(v.Z,{style:[to.tweetContainer,to.itemPadding]},p.createElement(v.Z,{style:to.tweetContent},p.createElement(za.Z,{name:d,profileImageUrl:u,screenName:m,style:to.userName}),p.createElement(v.Z,{style:to.tweetBody},function(){if(0===n.length)return null;var e=n.map(function(e){var t,n,r,i="";if(e.externalMediaDetails)i=e.externalMediaDetails.stillMediaUrl;else if(e.mediaFile instanceof Ka.ZP)i=e.mediaFile.thumbnail;else if(null!==(t=e.mediaFile)&&void 0!==t&&t.url){var a;i=null===(a=e.mediaFile)||void 0===a?void 0:a.url;}return{accessibilityLabel:"",url:i,width:(null===(n=e.mediaFile)||void 0===n?void 0:n.width)||100,height:(null===(r=e.mediaFile)||void 0===r?void 0:r.height)||100,expandedUrl:"",shouldShowAltLabel:!1};});return p.createElement(v.Z,{style:to.photos},p.createElement(Va.Z,{containerAspectRatio:1,images:e,previewMode:!1,singleImageMaxAspectRatio:1,singleImageMinAspectRatio:1,withCenterCrop:!0,withLink:!1}));}(),p.createElement(Z.ZP,{style:to.textStyle},c)))),t?p.createElement(v.Z,{style:to.thanksContainer},p.createElement(Ua["default"],{style:to.thanksCheckMark}),p.createElement(Z.ZP,{align:"center",style:to.itemPadding},_)):p.createElement(Z.ZP,{align:"center",onPress:s,style:to.itemPadding,withUnderline:!0},y),w>I.Z.theme.breakpoints.small?p.createElement(v.Z,{style:to.buttonContainer},p.createElement(C.ZP,{onPress:a,style:to.itemPadding,type:"brandFilled"},Xa),p.createElement(C.ZP,{onPress:o,style:to.itemPadding,type:"brandOutlined"},Ja),p.createElement(C.ZP,{onPress:r,style:to.itemPadding,type:"destructiveText"},eo)):(l=p.createElement(ja["default"],{style:{color:I.Z.theme.colors.text}}),f=p.createElement(Ha["default"],{style:{color:I.Z.theme.colors.primary}}),b=p.createElement(qa["default"],{style:{color:I.Z.theme.colors.red500}}),p.createElement(v.Z,{style:to.mobileButtonContainer},p.createElement(Ya,{icon:l,label:Ja,onPress:o}),p.createElement(Ya,{icon:f,label:Xa,onPress:a}),p.createElement(Ya,{icon:b,label:eo,onPress:r}))));});};var ro,io=Object.freeze({Original:"original",Reply:"reply",Quote:"quote",Thread:"thread"}),ao=n(472599),oo=Object.freeze((ro={},(0,m.Z)(ro,io.Original,"original_tweet"),(0,m.Z)(ro,io.Quote,"quote_tweet"),(0,m.Z)(ro,io.Reply,"reply"),ro)),so=[{headlineText:A().f3a7a80c,subTextLine1:A().ge52d1de},{headlineText:A().d1a92642,subTextLine1:A().ae42ebf0,subTextLine2:A().aa350ab2},{headlineText:A().j18b2956,subTextLine1:A().f6bee896,subTextLine2:A().dddd0996},{headlineText:A().d02a94fa,subTextLine1:A().dddd0996},{headlineText:A().i018b746,subTextLine1:A().b8d85dfa,subTextLine2:A().d5ca11f0}],lo=A().de3bcf28,co=A().e710ce76,uo={cta_option1:A().b7ec04f4,cta_option2:A().i62a03aa,heading:A().cb7c0988,icon_name:"checkmark_circle",link_text:A().h11e5910,post_feedback_text:A().d3145da8,subheading:A().h11e5910,text:"".concat(lo,"\n\n").concat(co)},mo=function mo(e){var t=e.getNumberValue("responsive_web_reply_nudge_copy_version"),n=so[t=t>=0&&t<=4?t:0];return{heading:n.headlineText,subheading:"".concat(n.subTextLine1,"\n\n").concat(n.subTextLine2||""),icon_name:"profanity",nudge_feedback_payload:uo};},po=function po(e,t){if(t){if(function(e){var t=e.nudge_feedback_payload,n=e.subheading;return!!t&&[t.cta_option1,t.cta_option2,t.link_text,t.post_feedback_text,t.subheading,n].every(function(e){return Boolean(e);});}(t))return{isStandardized:!0,payload:t};(0,ao.ZP)("Toxicity nudge payload incomplete");}return{isStandardized:!1,payload:mo(e)};};var ho=ka(function(e){var t=e.analytics,n=e.media,r=e.nudgeId,i=e.onDeleteTweet,o=e.onDismiss,s=e.onEditTweet,l=e.onSendTweet,c=e.payload,d=e.tweetText,u=e.tweetType,m=e.userName,h=e.userProfileImageUrl,f=e.userScreenName,g=p.useState(!1),v=(0,a.Z)(g,2),y=v[0],_=v[1],b=p.useState(!1),w=(0,a.Z)(b,2),T=w[0],Z=w[1],C=p.useContext(Hn.rC).featureSwitches,E=po(C,c),x=E.isStandardized,S=E.payload;p.useEffect(function(){x&&I({action:"impression",page:"standardized_nudge"}),I({action:"impression",page:"nudge"});},[]);var I=function I(e){var n=e.action,i=e.element,a=e.page,o=[{nudge_id:r}];t.scribe({action:n,data:{items:o},element:i,page:a,section:"dialog",component:u});};return y?p.createElement(Ba,{onBack:function onBack(){I({action:"back",element:"action",page:"nudge_more_info"}),_(!1);},onNo:function onNo(){I({action:"got_it_wrong_no",element:"action",page:"nudge_more_info"}),Z(!0),_(!1);},onYes:function onYes(){I({action:"got_it_wrong_yes",element:"action",page:"nudge_more_info"}),Z(!0),_(!1);},payload:S.nudge_feedback_payload}):p.createElement(no,{hasSentFeedback:T,media:n,onDeleteTweet:function onDeleteTweet(){I({action:"cancel",element:"action",page:"nudge"}),i();},onDismiss:function onDismiss(){I({action:"dismiss",element:"action",page:"nudge"}),o();},onEditTweet:function onEditTweet(){I({action:"revise",element:"action",page:"nudge"}),s();},onSendTweet:function onSendTweet(){I({action:"send",element:"action",page:"nudge"}),l();},onWeGotItWrong:function onWeGotItWrong(){I({action:"more_info",element:"action",page:"nudge"}),I({action:"impression",page:"nudge_more_info"}),_(!0);},payload:S,tweetText:d,userName:m,userProfileImageUrl:h,userScreenName:f});});var fo={scribeNudgeDialogAction:function scribeNudgeDialogAction(e,t,n,r){var i,a=n.action,s=n.element;r&&(i={items:[{nudge_id:r}]});var l=(0,o.Z)((0,o.Z)({},function(e){return{page:"nudge",section:"dialog",component:oo[e]};}(t)),{action:a,element:s});e.scribe((0,o.Z)((0,o.Z)({},l),{},{data:i}));}};var go=n(42100),vo=n(310264),yo=n(765249),_o=n(963393),bo=n(696965),wo=n(414537),To=n(652008),Zo=n(691335),Co=n(619405),Eo=n(745610),xo=n(676275),So=n(114384),Io=n(750599),Po=n(801206),ko=n(296341),Ao=p.createElement(Z.ZP,{weight:"bold"}),Ro=p.createElement(Z.ZP,{color:"link",dir:"ltr"}),Do=function Do(e){return"@".concat(e);},No=function No(e){return(null==e?void 0:e.screen_name)||"";},Fo=function Fo(e){var t,n=e.communityName,r=e.excludedRecipients,i=e.inReplyToStatus,o=e.loggedInUser,s={replyToOne:function replyToOne(e){var t=e.userName;return p.createElement(A().I18NFormatMessage,{$i18n:"e34022a7"},p.cloneElement(Ro,null,A().b50e199a({userName:Do(t)})));},replyToTwo:function replyToTwo(e){var t=e.userOneName,n=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"bfd9c99b"},p.cloneElement(Ro,null,A().c3033e8a({replyUserName:Do(t),otherUserName:Do(n)})));},replyToThree:function replyToThree(e){var t=e.userOneName,n=e.userThreeName,r=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"g7a1000f"},p.cloneElement(Ro,null,A().e50dae2a({userOneName:Do(t),userTwoName:Do(r),userThreeName:Do(n)})));},replyToMany:function replyToMany(e){var t=e.othersCount,n=e.userOneName,r=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"i558c201"},p.cloneElement(Ro,null,A().h758cd23({userOneName:Do(n),userTwoName:Do(r),othersCount:t})));},communityReplyToOne:function communityReplyToOne(e){var t=e.communityName,n=e.userName;return p.createElement(A().I18NFormatMessage,{$i18n:"j935bcdf",communityName:t},p.cloneElement(Ro,null,A().fba61ad6({userName:Do(n)})));},communityReplyToTwo:function communityReplyToTwo(e){var t=e.communityName,n=e.userOneName,r=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"i7bd9c8f",communityName:t},p.cloneElement(Ro,null,A().ce87c872({replyUserName:Do(n),otherUserName:Do(r)})));},communityReplyToThree:function communityReplyToThree(e){var t=e.communityName,n=e.userOneName,r=e.userThreeName,i=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"cfa0049d",communityName:t},p.cloneElement(Ro,null,A().b45fa506({userOneName:Do(n),userTwoName:Do(i),userThreeName:Do(r)})));},communityReplyToMany:function communityReplyToMany(e){var t=e.communityName,n=e.othersCount,r=e.userOneName,i=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"jfc8e4b5",communityName:t},p.cloneElement(Ro,null,A().b8168f25({userOneName:Do(r),userTwoName:Do(i),othersCount:n})));},exclusiveReplyToOne:function exclusiveReplyToOne(e){var t=e.userName;return p.createElement(A().I18NFormatMessage,{$i18n:"fe06c9f5"},p.cloneElement(Ro,null,A().ab67a7ac({userName:Do(t)})),p.cloneElement(Ao,null,A().g571ef41));},exclusiveReplyToTwo:function exclusiveReplyToTwo(e){var t=e.userOneName,n=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"f7e12e15"},p.cloneElement(Ro,null,A().d48d6476({replyUserName:Do(t),otherUserName:Do(n)})),p.cloneElement(Ao,null,A().i9451241));},exclusiveReplyToThree:function exclusiveReplyToThree(e){var t=e.userOneName,n=e.userThreeName,r=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"eade6035"},p.cloneElement(Ro,null,A().hdf48104({userOneName:Do(t),userTwoName:Do(r),userThreeName:Do(n)})),p.cloneElement(Ao,null,A().dcbb6a0b));},exclusiveReplyToMany:function exclusiveReplyToMany(e){var t=e.othersCount,n=e.userOneName,r=e.userTwoName;return p.createElement(A().I18NFormatMessage,{$i18n:"da018b37"},p.cloneElement(Ro,null,A().ba74e38b({userOneName:Do(n),userTwoName:Do(r),othersCount:t})),p.cloneElement(Ao,null,A().c65916af));},trustedFriendsReplyToOne:function trustedFriendsReplyToOne(e){var t=e.isProtected,n=e.trustedFriendsTweetOwner,r=e.userName,i={recipientsText:Ro,boldAppText:Ao},a={userName:Do(r),trustedFriendsTweetOwner:Do(n)};return t?p.createElement(A().I18NFormatMessage,{$i18n:"fc276cb7",trustedFriendsTweetOwner:a.trustedFriendsTweetOwner},p.cloneElement(i.recipientsText,null,A().a828b60a({userName:a.userName}))):p.createElement(A().I18NFormatMessage,{$i18n:"b392dda9",trustedFriendsTweetOwner:a.trustedFriendsTweetOwner},p.cloneElement(i.recipientsText,null,A().e39e1360({userName:a.userName})));},trustedFriendsReplyToTwo:function trustedFriendsReplyToTwo(e){var t=e.isProtected,n=e.trustedFriendsTweetOwner,r=e.userOneName,i=e.userTwoName,a={recipientsText:Ro,boldAppText:Ao},o={userOneName:Do(r),userTwoName:Do(i),trustedFriendsTweetOwner:Do(n)};return t?p.createElement(A().I18NFormatMessage,{$i18n:"j316b6e3"},p.cloneElement(a.recipientsText,null,A().fb912eb3({userOneName:o.userOneName,userTwoName:o.userTwoName})),p.cloneElement(a.recipientsText,null,A().d1fdfe03({trustedFriendsTweetOwner:o.trustedFriendsTweetOwner}))):p.createElement(A().I18NFormatMessage,{$i18n:"c1378cbb"},p.cloneElement(a.recipientsText,null,A().b1bf4831({userOneName:o.userOneName,userTwoName:o.userTwoName})),p.cloneElement(a.recipientsText,null,A().ba60bdab({trustedFriendsTweetOwner:o.trustedFriendsTweetOwner})));},trustedFriendsReplyToThree:function trustedFriendsReplyToThree(e){var t=e.isProtected,n=e.trustedFriendsTweetOwner,r=e.userOneName,i=e.userThreeName,a=e.userTwoName,o={recipientsText:Ro,boldAppText:Ao},s={userOneName:Do(r),userTwoName:Do(a),userThreeName:Do(i),trustedFriendsTweetOwner:Do(n)};return t?p.createElement(A().I18NFormatMessage,{$i18n:"g7b81721"},p.cloneElement(o.recipientsText,null,A().ec689bfc({userOneName:s.userOneName,userTwoName:s.userTwoName,userThreeName:s.userThreeName})),p.cloneElement(o.recipientsText,null,A().he146533({trustedFriendsTweetOwner:s.trustedFriendsTweetOwner}))):p.createElement(A().I18NFormatMessage,{$i18n:"g390bde1"},p.cloneElement(o.recipientsText,null,A().i17c4d36({userOneName:s.userOneName,userTwoName:s.userTwoName,userThreeName:s.userThreeName})),p.cloneElement(o.recipientsText,null,A().bfa3b3d3({trustedFriendsTweetOwner:s.trustedFriendsTweetOwner})));},trustedFriendsReplyToMany:function trustedFriendsReplyToMany(e){var t=e.isProtected,n=e.othersCount,r=e.trustedFriendsTweetOwner,i=e.userOneName,a=e.userTwoName,o={recipientsText:Ro,boldAppText:Ao},s={userOneName:Do(i),userTwoName:Do(a),trustedFriendsTweetOwner:Do(r),othersCount:n};return t?p.createElement(A().I18NFormatMessage,{$i18n:"ad5b8753"},p.cloneElement(o.recipientsText,null,A().b64448c5({userOneName:s.userOneName,userTwoName:s.userTwoName,othersCount:s.othersCount})),p.cloneElement(o.recipientsText,null,A().ged962b7({trustedFriendsTweetOwner:s.trustedFriendsTweetOwner}))):p.createElement(A().I18NFormatMessage,{$i18n:"d1b80c9d"},p.cloneElement(o.recipientsText,null,A().e4625c2b({userOneName:s.userOneName,userTwoName:s.userTwoName,othersCount:s.othersCount})),p.cloneElement(o.recipientsText,null,A().b6c63977({trustedFriendsTweetOwner:s.trustedFriendsTweetOwner})));}},l=null==o?void 0:o.id_str,c=Yn.YT({inReplyToStatus:i,loggedInUserId:l}).filter(function(e){var t=e.id_str;return r.indexOf(t)<0;}),d=i.retweeted_status||i,u=d.exclusivity_info,m=d.trusted_friends_info,h=d.user,f=c.filter(function(e){return e.id_str!==h.id_str;}),g=(0,a.Z)(f,2),v=g[0],y=g[1],_=[h,v,y].map(No),b=(0,a.Z)(_,3),w=b[0],T=b[1],Z=b[2],C=c.length-2,E=null==i||null===(t=i.trusted_friends_info)||void 0===t?void 0:t.screen_name,x=null==o?void 0:o["protected"];switch(c.length){case 0:return(0,ao.ZP)("Compose reply context should not have 0 recipients"),null;case 1:return n?s.communityReplyToOne({communityName:n,userName:w}):u?s.exclusiveReplyToOne({userName:w}):m&&E?s.trustedFriendsReplyToOne({userName:w,trustedFriendsTweetOwner:E,isProtected:x}):s.replyToOne({userName:w});case 2:return n?s.communityReplyToTwo({communityName:n,userOneName:w,userTwoName:T}):u?s.exclusiveReplyToTwo({userOneName:w,userTwoName:T}):m&&E?s.trustedFriendsReplyToTwo({userOneName:w,userTwoName:T,trustedFriendsTweetOwner:E,isProtected:x}):s.replyToTwo({userOneName:w,userTwoName:T});case 3:return n?s.communityReplyToThree({communityName:n,userOneName:w,userTwoName:T,userThreeName:Z}):u?s.exclusiveReplyToThree({userOneName:w,userTwoName:T,userThreeName:Z}):m&&E?s.trustedFriendsReplyToThree({userOneName:w,userTwoName:T,userThreeName:Z,trustedFriendsTweetOwner:E,isProtected:x}):s.replyToThree({userOneName:w,userTwoName:T,userThreeName:Z});default:return n?s.communityReplyToMany({communityName:n,userOneName:w,userTwoName:T,othersCount:C}):u?s.exclusiveReplyToMany({userOneName:w,userTwoName:T,othersCount:C}):m&&E?s.trustedFriendsReplyToMany({userOneName:w,userTwoName:T,othersCount:C,trustedFriendsTweetOwner:E,isProtected:x}):s.replyToMany({userOneName:w,userTwoName:T,othersCount:C});}};var Mo=p.memo(Fo);function Lo(e){null==e||e.preventDefault();}var Bo=I.Z.create(function(e){return{replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}};});var Oo=function Oo(e){var t=e.communityName,n=e.excludedRecipients,r=e.inReplyToStatus,i=e.loggedInUser,a=e.onPress,o=e.shouldDisplayRepliesText,s=e.showParentTweet,l=void 0===s||s;return p.createElement(v.Z,null,l?p.createElement(ko.Z,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:Po.Z,onAvatarClick:Lo,onEntityClick:Lo,onMediaClick:Lo,onReplyContextClick:Lo,replyContext:Io.ZP.ReplyContextTypes.None,tweet:r,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,p.createElement(v.Z,{style:Bo.replyUsersContainer},p.createElement(De.Z,{avatarCell:l?p.createElement(v.Z,{style:Bo.conversationLine}):null,avatarCellStyle:Bo.conversationLineContainer,cellStyle:Bo.repliesTextContainer,style:Bo.grid},o?p.createElement(Z.ZP,{accessibilityRole:"button",color:"gray700",onPress:a,style:l&&Bo.repliesMessage},p.createElement(Mo,{communityName:t,excludedRecipients:n,inReplyToStatus:r,loggedInUser:i})):null)));};var Vo=n(517869),zo=n(199241);var Uo=n(210023),Ho=n(588027),Wo=n(615793),jo=n(526853),qo=n(823803),Ko=Object.freeze({LOCAL_STATE_LOADED:"rweb/editTweet/LOCAL_STATE_LOADED",LOCAL_STATE_REQUEST:"rweb/editTweet/LOCAL_STATE_REQUEST"}),Go=["fetchStatus"],Qo="editTweet",$o="rweb.editTweet",Yo=function Yo(e){return function(e){return e.editTweet.fetchStatus===qo.ZP.LOADED;}(e)&&!e.editTweet.editTweetLimitedMarketPromptDismissedEpochMilliseconds;},Xo=function Xo(e){return{payload:e,type:Ko.LOCAL_STATE_LOADED};},Jo=function Jo(){return e={editTweetLimitedMarketPromptDismissedEpochMilliseconds:Date.now()},function(t,n,r){var i=r.userPersistence,a=n().editTweet,s=(a.fetchStatus,(0,j.Z)(a,Go)),l=(0,o.Z)((0,o.Z)({},s),e);return t(Xo(l)),i.set($o,l);};var e;},es=Object.freeze({fetchStatus:qo.ZP.NONE,editTweetLimitedMarketPromptDismissedEpochMilliseconds:0});jo.Z.register((0,m.Z)({},Qo,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es,t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case Ko.LOCAL_STATE_REQUEST:return(0,o.Z)((0,o.Z)({},e),{},{fetchStatus:qo.ZP.LOADING});case Ko.LOCAL_STATE_LOADED:return(0,o.Z)((0,o.Z)({},e),{},{fetchStatus:qo.ZP.LOADED},t.payload);default:return e;}}),function(){return function(e,t,n){var r=n.userPersistence;return e({payload:{},type:Ko.LOCAL_STATE_REQUEST}),r.get($o).then(function(t){e(Xo(t));})["catch"](function(){e(Xo({}));});};});var ts=n(8727),ns=n(944139),rs=n(712171),is=n(924433),as=n(863854),os=n(361577),ss=n(799629),ls=n(362854),cs=n(933997),ds=n(120192),us=["mediaIds"];function ms(e){return e.parentTweetId||(e.isInline?So.x.homeTimeline:So.x.modal);}function ps(e,t){var n=ms(t);return wt.tS(e,n);}var hs=function hs(e,t){var n=ms(t);return wt.KS(e,n);},fs=function fs(e,t){var n=Zs(e,t),r=Us(e,t).communityIdValue||void 0,i=(null==n?void 0:n.community_id_str)||r,a=i?ft.ZP.select(e,i):void 0;return a?a.name:void 0;},gs=function gs(e,t){var n=ms(t);return wt.WQ(e,n);},vs=function vs(e,t){var n=ms(t);return wt.E_(e,n);},ys=function ys(e){return function(t,n){var r=function(e,t){return t.location.state;}(0,n);return r?e(r):void 0;};},_s=function _s(e,t){return t.activeUser||Pa.ZP.selectLoggedInUser(e);},bs=function bs(e,t){return t.parentTweetId||ws(e,t)||Ts(e,t);},ws=function ws(e,t){var n=t.location.query;return n&&"string"==typeof n.in_reply_to?n.in_reply_to:void 0;},Ts=ys(function(e){return e.inReplyToStatusId;}),Zs=function Zs(e,t){var n=bs(e,t);return n?ls.ZP.selectHydrated(e,n):void 0;},Cs=function Cs(e,t){return t.location.pathname.indexOf("/intent/")>-1;},Es=ys(function(e){return e.hasArticleNudge;}),xs=ys(function(e){return e.convoCardData;}),Ss=ys(function(e){return e.externalMedia;}),Is=ys(function(e){return e.externalMediaFiles;}),Ps=ys(function(e){return e.previewTweetId;}),ks=ys(function(e){return e.defaultText;});function As(e,t){var n=ks(e,t),r=(0,Zo.Z)(t.location),i=Cs(0,t),a=function(e,t){return t.location.pathname.indexOf("/compose/tweet")>-1;}(0,t);return(i||a)&&r?r:n;}var Rs=ys(function(e){return e.quotedStatusId;}),Ds=ys(function(e){return e.quotedStatus;}),Ns=function Ns(e,t){return function(e,t){return t.quotedStatus?t.quotedStatus:Ds(e,t);}(e,t)||function(e,t){var n=Rs(e,t);return n?ls.ZP.selectHydratedMemoized(e,n):void 0;}(e,t);},Fs=ys(function(e){return e.isSelfThreadReply;}),Ms=ys(function(e){return e.positionCursorAtBeginning;}),Ls=ys(function(e){return e.previousTweetId;}),Bs=ys(function(e){return e.isLastEdit;}),Os=function Os(e,t){var n=Ls(e,t);return n?ls.ZP.createHydratedSelector(e)(n):null;},Vs=(0,mt.P1)([function(e,t){var n=function(e,t){var n,r,i,a,o,s=Os(e,t),l=null==s||null===(n=s.extended_entities)||void 0===n||null===(r=n.media)||void 0===r||null===(i=r[0])||void 0===i||null===(a=i.features)||void 0===a||null===(o=a.all)||void 0===o?void 0:o.tags;return l?l.filter(function(t){return(0,Pa.K_)(["name"])(e,t.user_id)===qo.ZP.LOADED;}):[];}(e,t);return Pa.ZP.selectMany(e,n.map(function(e){return e.user_id;}));}],function(e){return e.map(function(e){return(0,cs.z4)(e,Ho.vA.Prefetch);});}),zs=(0,mt.P1)(Os,function(e){var t,n=null==e||null===(t=e.extended_entities)||void 0===t?void 0:t.media;return n?n.map(function(e){var t,n=e.ext_alt_text,r=e.features,i=e.id_str;return{url:e.media_url_https,uploadId:i,altText:null!=n?n:"",mediaTags:null==r||null===(t=r.all)||void 0===t?void 0:t.tags};}):[];}),Us=(0,mt.P1)(Os,function(e,t){return wt.oN(e,ms(t));},bt.Ln,function(e,t,n){return e?(0,ds.CB)(e,n):t;}),Hs=ys(function(e){return e.promotedContent;});function Ws(){return(0,mt.P1)(ps,Ns,Qr.gz,Os,function(e,t,n,r){return e.map(function(e,i){var a,s=(0,N.Z)(e.mediaIds||[]),l=n.filter(function(e){return s.has(e.id);}),c=e.editorStateRaw||function(e,t){if(!e)return;var n=e.split("\n"),r=function(e){var t,n=[];null!=e&&null!==(t=e.richtext_tags)&&void 0!==t&&t.length&&e.richtext_tags.forEach(function(e){e.richtext_types.forEach(function(t){n.push({style:t.toUpperCase(),offset:e.from_index,length:e.to_index-e.from_index});});});return n;}(t),i=0,a=[];return n.forEach(function(e){var t=i,n=i+e.length,o=[];r.forEach(function(e){var r=e.offset,i=e.offset+e.length;(r>=t&&r<=n||i<=n&&i>=t)&&o.push({style:e.style,offset:Math.max(e.offset-t,0),length:Math.min(e.length,n-t,n-e.offset)});}),a.push({type:"unstyled",text:e||"",depth:void 0,entityRanges:void 0,key:void 0,inlineStyleRanges:o}),i=n+1;}),{blocks:a,entityMap:{}};}(e.text,null==r?void 0:r.note_tweet);return(0,o.Z)((0,o.Z)({},((a=e).mediaIds,(0,j.Z)(a,us))),{},{media:l,quotedStatus:0===i?t:void 0,editorStateRaw:c});});});}var js=(0,ht.Z)().propsFromState(function(){return{activeComposerIndex:vs,activeUser:_s,altTextNudgeType:as.jW,audienceControlsValue:Us,composerData:Ws(),dataSaverMode:is.IX,delegateUser:_t.VX,withEditTweetLimitedMarketPrompt:Yo,excludedRecipients:hs,externalMedia:Ss,externalMediaFiles:Is,geoEnabled:is.JJ,hasArticleNudge:Es,isLastEdit:Bs,inReplyToStatus:Zs,inReplyToStatusId:bs,isIntentRoute:Cs,isSelfThreadReply:Fs,isSending:gs,isSuperFollowsCreator:_t.WM,positionCursorAtBeginning:Ms,loggedInUser:Pa.ZP.selectLoggedInUser,prepopulatedText:As,previewTweetId:Ps,previousTweetId:Ls,previousTweetMedia:zs,previousTweetTags:Vs,promotedContent:Hs,scheduledFor:wt.R5,selectedCommunityName:fs,sendingProgress:wt.ZE,convoCardData:xs,undoTweetSettings:os.Kc,userLanguage:_t.VT,quotedStatusId:Rs,showGraduatedAccess:ts.nQ};}).propsFromActions(function(){return{addComposer:wt.Bv,addToast:ss.fz,createLocalApiErrorHandler:(0,pt.createLocalApiErrorHandlerWithContextFactory)("SCREEN_COMPOSE_V2"),checkTweetForNudge:wt.WV,deletePreviewTweet:rs.Ox,disableEditTweet:ls.ZP.disableEdit,fetchAltTextPromptPreferenceIfNeeded:as.Xd,fetchAutotaggedLocationIfNeeded:ns.Px,fetchTweetIfNeeded:ls.ZP.fetchOneIfNeeded,fetchUsersIfNeeded:Pa.ZP.fetchManyIfNeeded,removeComposer:wt.$P,resetDraft:wt.Es,retweet:ls.ZP.retweet,schedule:wt.Os,draftTweet:wt.oI,send:wt.lW,updateActiveComposerIndex:wt.JC,updateAudienceControlsValue:wt.sU,updateConvoCardState:Wo.dy,setEditTweetLimitedMarketPromptDismissed:Jo,uploadMedia:Qr.$i,addMedia:Qr.rA,processMultipleMedia:Qr.G$,removeMediaUpload:Qr.WU,removeToast:ss.RS,updateSingleComposer:wt.zi,setSingleComposer:wt.tD,setActiveParentKey:wt.jr,copyDataFromInlineComposerToModalComposer:wt.Ol};});function qs(e,t){var n,r=(0,Pe.Z)(t.media);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.id===e)return i;}}catch(a){r.e(a);}finally{r.f();}return null;}var Ks="twc-cc-mask",Gs="tweetButton",Qs="tweetButtonInline";var $s=A().d28215f0,Ys=A().ec909a55,Xs=A().c7152355,Js=A().ffa5562a,el=A().dd4a14a1,tl=A().cc6d0a48,nl=A().j499fbcb,rl=A().bb8170da,il=A().dad5a4b8,al=A().fd7c845c,ol=A().g6fc48fa,sl=A().e65aed64,ll=A().bc2ceaf2,cl=A().f548d684,dl=A().d8222374,ul=A().j890123a,ml=A().af4d0a80,pl=A().bb01231c,hl=A().if69307c,fl=A().d4ab68e2,gl=A().d8af8a4c,vl=A().abb90544,yl=A().i2209530,_l=A().bf9b89e4,bl={uploading:{headline:A().i63bfbf0,text:A().e30dda9a,confirm:A().c3d89aca,cancel:A().d4ab68e2}},wl=A().b983f9e0,Tl=A().ed5c4342,Zl=A().j24c37b2,Cl=A().abc4afcc,El=A().aa15f5aa,xl=A().e839db3a,Sl=A().g4bcc5f4,Il=A().c5b474de,Pl=A().h3701ffe,kl=A().f277e94a,Al=A().b551cd23,Rl=A().f026a7fa,Dl=A().a5d4fda0,Nl=A().c091760c,Fl=A().ib067d6a,Ml=document.documentElement&&"scrollBehavior"in document.documentElement.style,Ll={element:"alt_text_prompt"},Bl={component:"article_nudge"},Ol=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(e,l){var d,u,h,f;(0,s.Z)(this,n),f=t.call(this,e,l),(0,m.Z)((0,c.Z)(f),"_isBoosting",!1),(0,m.Z)((0,c.Z)(f),"_getParentKey",function(){var e=f.props,t=e.isInline;return e.parentTweetId||(t?So.x.homeTimeline:So.x.modal);}),(0,m.Z)((0,c.Z)(f),"_setSingleComposer",function(e){var t=f._getParentKey();return f.props.setSingleComposer({data:e,parentKey:t});}),(0,m.Z)((0,c.Z)(f),"_updateSingleComposer",function(e,t){var n=f._getParentKey();return f.props.updateSingleComposer({updates:e,index:t,parentKey:n});}),(0,m.Z)((0,c.Z)(f),"_resetDraft",function(){var e=f._getParentKey(),t=f.isPreview;f.props.resetDraft({parentKey:e,isPreview:t});}),(0,m.Z)((0,c.Z)(f),"_fetchAutotaggedLocationIfNeeded",function(){return f.props.fetchAutotaggedLocationIfNeeded()["catch"](f.props.createLocalApiErrorHandler());}),(0,m.Z)((0,c.Z)(f),"_fetchTaggedUsersIfNeeded",function(e){var t=f.props,n=t.createLocalApiErrorHandler;return(0,t.fetchUsersIfNeeded)(e.map(function(e){return e.user_id;}))["catch"](n());}),(0,m.Z)((0,c.Z)(f),"_syncTexts",function(){var e=f.state.composerEditorContentMap;f.props.composerData.forEach(function(t,n){var r=e[t.key];r&&f._updateSingleComposer(r,n);});}),(0,m.Z)((0,c.Z)(f),"_hasGif",function(e){return e.gifMetadata||e.media.some(function(e){return e.mediaFile&&e.mediaFile.isGif;});}),(0,m.Z)((0,c.Z)(f),"_hasPhoto",function(e){return e.media&&e.media.some(function(e){return e.mediaFile&&e.mediaFile.isImage;});}),(0,m.Z)((0,c.Z)(f),"_hasVideo",function(e){return e.media&&e.media.some(function(e){return e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif;});}),(0,m.Z)((0,c.Z)(f),"_hasValidPoll",function(e){return e.pollActive&&e.pollValid;}),(0,m.Z)((0,c.Z)(f),"_handleDeletePreviewTweet",function(){var e=f.props,t=e.deletePreviewTweet,n=e.previewTweetId,r=e.removeToast;n&&(r(),t(n));}),(0,m.Z)((0,c.Z)(f),"_handleAnimateComplete",function(){var e=f.props,t=e.activeComposerIndex,n=e.onHandleAppBarHeight,r=g.findDOMNode(f._composerRefs[t]);if(r instanceof window.Element){var i=r.getBoundingClientRect(),a=i.bottom,o=i.top,s=Math.max(o,window.scrollY);if(s<window.pageYOffset||a>window.innerHeight){var l=n?s-n()-14:s-14,c=Math.max(l,0);window.requestAnimationFrame(function(){Ml?window.scrollTo({top:c,left:0,behavior:"smooth"}):window.scrollTo(0,c);});}}}),(0,m.Z)((0,c.Z)(f),"_handleFetchTweetIfNeeded",function(){var e=f.props,t=e.createLocalApiErrorHandler,n=e.fetchTweetIfNeeded,r=e.inReplyToStatus,i=e.inReplyToStatusId,a=e.quotedStatus,o=e.quotedStatusId;!r&&i&&n(i)["catch"](t(yo.c)),!a&&o&&n(o)["catch"](t(yo.c));}),(0,m.Z)((0,c.Z)(f),"_blockHistory",function(e,t){var n=f.props,r=n.audienceControlsValue,i=n.isInline,a=jl.composeTweetRoute.test(f._initialPathname),o=!i&&a&&jl.unsentRoutes.test(e.pathname),s=!i&&a&&!jl.composeTweetRoute.test(e.pathname);return f.shouldShowDiscardConfirmation&&"POP"===t&&s?(f.setState({showDiscardTweetConfirmation:!0}),!1):f._canSaveDraft&&o&&"PUSH"===t?f.shouldShowDiscardConfirmation?(f.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:o}),!1):(f._resetDraft(),!0):f.shouldShowBackgroundSendConfirmation&&"POP"===t&&s?(f._cancelAllMediaUploads(),!1):!("POP"===t&&s&&f._areComposersEmptyOrUnchanged&&!(0,Jn.Ph)(r))||(f._resetDraft(),!0);}),(0,m.Z)((0,c.Z)(f),"_getKeyCommandHandlers",function(){return f.state.typeaheadActive?f._keyCommandHandlersForActiveTypeahead:f._keyCommandHandlers;}),(0,m.Z)((0,c.Z)(f),"handleTweetOrRetweet",function(){var e;return f.isEdit?f._scribe({section:"composition",component:"edit_tweet",element:"update_tweet",action:"click"}):f._scribe({section:"composition",element:"send_tweet",action:"click"}),f._areComposersValid()?f.shouldShowAltTextPrompt?(f.setState({showAltTextPrompt:!0}),f._scribe((0,o.Z)((0,o.Z)({},Ll),{},{action:"show"})),Promise.resolve()):null!==(e=f._handleTweetOrRetweet())&&void 0!==e?e:Promise.resolve():Promise.resolve();}),(0,m.Z)((0,c.Z)(f),"handleTweetWithBoost",function(){return f._isBoosting=!0,f.handleTweetOrRetweet().then(function(e){var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.id_str;})["finally"](function(){f._isBoosting=!1;});}),(0,m.Z)((0,c.Z)(f),"_handleTweetOrRetweet",function(){return f.isRetweet?f._handleRetweet():f._handleTweet();}),(0,m.Z)((0,c.Z)(f),"_findDiscardHeadline",function(){return f.isThread?ul:f.isEdit&&f._editTweetCompositionEnabled()?ml:dl;}),(0,m.Z)((0,c.Z)(f),"_renderReplyContext",function(){var e=f.props,t=e.activeUser,n=e.excludedRecipients,r=e.inReplyToStatus,i=e.isInline,a=e.isSelfThreadReply,o=e.selectedCommunityName;if(r&&f._shouldBeExpanded())return p.createElement(Oo,{communityName:o,excludedRecipients:n,inReplyToStatus:r,key:n.join(),loggedInUser:t,onPress:f._handleViewRecipients,shouldDisplayRepliesText:!a,showParentTweet:!i});}),(0,m.Z)((0,c.Z)(f),"_renderAltTextPrompt",function(){var e=f._getAltTextMetadata().numberOfImages,t=p.createElement(p.Fragment,null,p.createElement(v.Z,null,Js),p.createElement(v.Z,{style:Vl.altTextPromptParagraph},el({numberOfImages:e})),p.createElement(v.Z,{style:Vl.altTextPromptParagraph},tl));return p.createElement(E.Z,{Icon:R["default"],cancelButtonLabel:rl,confirmButtonLabel:nl({numberOfImages:e}),headline:Xs({numberOfImages:e}),onCancel:f._handleIgnoreAltTextPrompt,onConfirm:f._handleAcceptAltTextPrompt,onMaskClick:f._handleCancelAltTextPrompt,text:t});}),(0,m.Z)((0,c.Z)(f),"_renderToxicReplyNudge",function(){var e=f._getSingleComposerDataWithLatestText(f.props.composerData[0]),t=e.text,n=e.media,r=f.state.nudgePayload;return p.createElement(ho,{media:n,nudgeId:f.state.nudgeId,onDeleteTweet:f._handleReplyNudgeDeleteTweet,onDismiss:f._handleReplyNudgeDismiss,onEditTweet:f._handleReplyNudgeEditTweet,onSendTweet:f._handleReplyNudgeSendTweet,payload:r,tweetText:t,tweetType:f.tweetType});}),(0,m.Z)((0,c.Z)(f),"_handleEditTweetLimitedMarketPromptDismissed",function(){(0,f.props.setEditTweetLimitedMarketPromptDismissed)();}),(0,m.Z)((0,c.Z)(f),"_renderEditTweetLimitedMarketPrompt",function(){var e=f.props.withEditTweetLimitedMarketPrompt&&f.isEditingWithTwitterBlue,t={text:Zl,onClick:f._handleEditTweetLimitedMarketPromptDismissed},n=p.createElement(v.Z,{style:Vl.editTweetLimitedMarketPrompt},p.createElement(Z.ZP,{weight:"bold"},Tl),p.createElement(Z.ZP,null,p.createElement(A().I18NFormatMessage,{$i18n:"i5fe3801"},p.createElement(Z.ZP,{link:"https://help.twitter.com/en/using-twitter/twitter-blue-labs#edit"},A().c3d98e06))));return p.createElement(T.Z,{actionPrimary:t,headline:wl,onDismiss:f._handleEditTweetLimitedMarketPromptDismissed,shouldDisplay:e,text:n});}),(0,m.Z)((0,c.Z)(f),"_renderDelegateAlertBanner",function(){var e=f._getDelegateUser();return e?p.createElement(Ia.Z,{delegateUserId:e.userId,isReply:f.isReply,type:"Tweet"}):null;}),(0,m.Z)((0,c.Z)(f),"_getDelegateUser",function(){var e=f.props.delegateUser;return f.context.featureSwitches.isTrue("twitter_delegate_enabled")?e:void 0;}),(0,m.Z)((0,c.Z)(f),"_handleAddComposer",function(){var e=f.props,t=e.addComposer,n=e.copyDataFromInlineComposerToModalComposer,r=e.isInline,i=e.parentTweetId;f.isInlineReply?n(i):r&&n(So.x.homeTimeline),t();}),(0,m.Z)((0,c.Z)(f),"_makeAddComposerLink",(0,M.Z)(function(e,t,n){return(0,ds.TT)({isInline:e,isSelfThreadReply:t,parentTweetId:n});})),(0,m.Z)((0,c.Z)(f),"_handleReplyNudgeDeleteTweet",function(){f._hideToxicityNudge(),f._handleConfirmDiscardTweet();}),(0,m.Z)((0,c.Z)(f),"_handleReplyNudgeDismiss",function(){f._hideToxicityNudge();}),(0,m.Z)((0,c.Z)(f),"_handleReplyNudgeEditTweet",function(){f._hideToxicityNudge();}),(0,m.Z)((0,c.Z)(f),"_handleReplyNudgeSendTweet",function(){f._hideToxicityNudge(),f._handleSendTweet();}),(0,m.Z)((0,c.Z)(f),"_setRootRef",function(e){e&&(f._root=e);}),(0,m.Z)((0,c.Z)(f),"_handleTweet",function(){if(f.state.showLastEditConfirmation||!f.props.isLastEdit){var e=f.props.composerData[0].scheduledFor;if(f.setState({errorMessage:void 0}),!e)return f._checkToxicityAndSendTweet();(0,nr.TO)(e)&&f._handleScheduleTweet();}else f.setState({showLastEditConfirmation:!0});}),(0,m.Z)((0,c.Z)(f),"_handleTweetError",function(e,t){return function(n){var r=f.props,i=r.analytics,a=r.createLocalApiErrorHandler;if((0,Eo.O9)(n)&&n.code===z.d.CANCELED)return i.scribeAction(e),Promise.resolve();var s=(0,Eo.ZP)(n);if(s)return f.setState({errorMessage:s}),Promise.resolve();var l=t||(0,wo.d)(void 0,!1);a((0,o.Z)({},l))(n);var c=n instanceof H.Z&&(null==t?void 0:t[n.errors[0].code]);f.setState({errorMessage:{text:c?c.toast.text:f.isEdit?Nl:Dl}});};}),(0,m.Z)((0,c.Z)(f),"_handleScheduleTweet",function(){var e=f.props,t=e.addToast,n=e.composerData,r=e.excludedRecipients,i=e.inReplyToStatus,a=e.schedule,s=f._getSingleComposerDataWithLatestText(n[0]);a({excludedRecipients:r,inReplyToStatus:i,scheduleData:s}).then(function(e){f.setState({tweetsSentOrScheduled:!0});var r=(0,nr.o3)(s.scheduledFor);if(r){var i=(0,nr.vh)(r),a=(0,nr.g6)(r),l=Al({scheduleDate:i,scheduleTime:a});t({text:l,action:{label:kl,link:{pathname:"/compose/tweet/unsent/scheduled"}}}),f._scribeTweetSent(n[0],(0,o.Z)((0,o.Z)({},e),{},{id_str:e.scheduled_id_str}),{isScheduled:!0});}f._updateConvoCardState(),f._close({withGraduateAccessCheck:!0});})["catch"](f._handleTweetError("schedule_tweet_cancel"));}),(0,m.Z)((0,c.Z)(f),"_handleDraftTweet",function(){var e=f.props,t=e.addToast,n=e.composerData;(0,e.draftTweet)({excludedRecipients:e.excludedRecipients,inReplyToStatus:e.inReplyToStatus,draftData:f._getSingleComposerDataWithLatestText(n[0])}).then(function(e){f.setState({showDiscardTweetConfirmation:!1}),t({text:_l,action:{label:kl,link:{pathname:"/compose/tweet/unsent/drafts"}}}),f._scribeTweetSent(n[0],(0,o.Z)((0,o.Z)({},e),{},{id_str:e.draft_id_str}),{isDraftTweet:!0}),f._updateConvoCardState(),f._close();})["catch"](f._handleTweetError("draft_tweet_cancel",bo.Z));}),(0,m.Z)((0,c.Z)(f),"_tweetTypeToNudgeTweetTypeMap",Object.freeze((d={},(0,m.Z)(d,io.Original,"OriginalTweet"),(0,m.Z)(d,io.Quote,"QuoteTweet"),(0,m.Z)(d,io.Reply,"Reply"),(0,m.Z)(d,io.Thread,"Retweet"),d))),(0,m.Z)((0,c.Z)(f),"_checkToxicTweet",function(){var e=f.props,t=e.checkTweetForNudge,n=e.composerData,r=e.inReplyToStatus,i=e.inReplyToStatusId,a=e.parentTweetId,o=f._tweetTypeToNudgeTweetTypeMap[f.tweetType],s=t({text:f._getSingleComposerDataWithLatestText(n[0]).text,tweetType:o,parentTweetId:a||i,conversationId:null==r?void 0:r.conversation_id_str}).then(function(e){var t,n,r,i,a,o=null===(t=e.create_nudge)||void 0===t||null===(n=t.nudge)||void 0===n?void 0:n.proposed_tweet_language;if(!o||!f._checkSupportedNudgeLanguage(o))return!1;var s=null==e||null===(r=e.create_nudge)||void 0===r?void 0:r.nudge;if(!s)return!1;var l=null===(i=s.nudge_type)||void 0===i?void 0:i.__typename,c=s.id,d=null===(a=s.tweet_nudge)||void 0===a?void 0:a.tweet_composition_nudge_payload;return c&&f.setState({nudgeId:c,nudgePayload:d}),!!l;}),l=new Promise(function(e,t){return setTimeout(e,1e3,!1);});return Promise.race([s,l]);}),(0,m.Z)((0,c.Z)(f),"_checkSupportedNudgeLanguage",function(e){var t=[];switch(f.tweetType){case io.Reply:t=f.context.featureSwitches.getArrayValue("responsive_web_reply_nudge_supported_languages");break;case io.Original:t=f.context.featureSwitches.getArrayValue("responsive_web_original_tweet_nudge_supported_languages");case io.Quote:case io.Thread:}return t.includes(e);}),(0,m.Z)((0,c.Z)(f),"_showToxicityNudge",function(){return f.setState({showToxicReplyNudge:!0});}),(0,m.Z)((0,c.Z)(f),"_hideToxicityNudge",function(){return f.setState({showToxicReplyNudge:!1});}),(0,m.Z)((0,c.Z)(f),"_shouldCheckForToxicity",function(){var e=f.state.nudgeId,t=f.props.composerData,n=f._getSingleComposerDataWithLatestText(t[0]);if(e||0===n.text.length)return!1;switch(f.tweetType){case io.Reply:var r=f.props.isSelfThreadReply;return!n.scheduledFor&&f.isReply&&!r&&f.context.featureSwitches.isTrue("responsive_web_reply_nudge_enabled");case io.Original:return(0,Yn.FI)(n.text)&&f.context.featureSwitches.isTrue("responsive_web_original_tweet_nudge_enabled");case io.Quote:case io.Thread:default:return!1;}}),(0,m.Z)((0,c.Z)(f),"_checkToxicityAndSendTweet",function(){if(!f._shouldCheckForToxicity())return f._handleSendTweet();f._checkToxicTweet().then(function(e){if(!e)return f._handleSendTweet();var t=!1;switch(f.tweetType){case io.Reply:t=f.context.featureSwitches.isTrue("responsive_web_reply_nudge_show_nudge");break;case io.Original:t=f.context.featureSwitches.isTrue("responsive_web_original_tweet_nudge_show_nudge");case io.Quote:case io.Thread:}if(!t)return f._handleSendTweet();f._showToxicityNudge();});}),(0,m.Z)((0,c.Z)(f),"_editTweetCompositionEnabled",function(){var e=f.context,t=e.featureSwitches,n=e.userClaims;return!!t.isTrue("responsive_web_edit_tweet_composition_enabled")&&((null==n?void 0:n.isTrueAndEnabled("subscriptions_feature_labs_1004"))||t.isTrue("responsive_web_edit_tweet_enabled"));}),(0,m.Z)((0,c.Z)(f),"_getToastMessage",function(e){var t=f.props,n=t.composerData,r=t.previousTweetId,i=!(f.isReply||f.isThread||f.isRetweet||f._hasValidPoll(n[0]));return f.isPreview?i&&f._editTweetCompositionEnabled()?cl:ll:r?al:i&&f._editTweetCompositionEnabled()?ol:e;}),(0,m.Z)((0,c.Z)(f),"_handleSendTweet",function(){var e=f.props,t=e.activeUser,n=e.addToast,r=e.analytics,i=e.audienceControlsValue,s=e.excludedRecipients,l=e.hasArticleNudge,c=e.history,d=e.inReplyToStatus,u=e.isSelfThreadReply,m=e.location,p=e.previousTweetId,h=e.promotedContent,g=e.selectedCommunityName,v=e.send,y=i.conversationControlsValue,_=i.exclusivityControlValue,b=void 0===_?void 0:_,w=i.trustedFriendsValue,T=void 0===w?void 0:w,Z=i.trustedFriendsMemberCount,C=void 0===Z?void 0:Z,E=f.isPreview,x=f.props.composerData.map(function(e){return f._getSingleComposerDataWithLatestText(e);}),S=(0,nr.o3)(x[0].scheduledFor);if(S){var I=(0,nr.vh)(S),k=(0,nr.g6)(S),A=Al({scheduleDate:I,scheduleTime:k});return n({text:A,action:{label:kl,link:""}}),void f._close({withGraduateAccessCheck:!0});}s.length>0&&r.scribe({element:"mentions",action:"edited"}),T&&r.scribe({action:"send_trusted_friends_tweet",data:{trusted_friends_control_details:{list_member_count:C}}});var R=(0,a.Z)(x,1)[0],D=f._getSingleComposerDataWithLatestText(R);if(f._conversationControlsCreationEnabled)if("community"===y)r.scribe({action:"send_community_tweet"});else if("by_invitation"===y){var N=(0,Yn.FI)(D.text);r.scribe({action:N?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"});}else"followers"===y&&r.scribe({action:"send_my_followers_tweet"});tr.SC(R,f.context)&&(r.scribe({element:"note_tweet",action:"send"}),function(e){var t=e.editorStateRaw;if(t)for(var n=0,r=Object.keys(t.entityMap);n<r.length;n++){var i=r[n],a=t.entityMap[i];if(a.type===Me.Z.INLINE_IMAGE){var o=a.data;if(!o){var s={level:"warning",extra:{entity:a}};(0,ao.ZP)("inline_image entity missing data",s);continue;}var l=qs(o.media_id,e),c=null==l?void 0:l.uploadId;if(!c){var d={level:"warning",extra:{entity:a,media:l}};(0,ao.ZP)("inline_image media missing upload id",d);continue;}o.media_id=c;}}}(R));var F=(null==d?void 0:d.community_id_str)||i.communityIdValue||void 0,M=[];f.props.composeSemanticCoreId&&M.push(f.props.composeSemanticCoreId),F&&M.push("8.31.".concat(F));var B=M.join(",");return v({sendData:x,communityIdValue:F,conversationControlsValue:y,excludedRecipients:s,exclusivityControlValue:b,inReplyToStatus:d,isSelfThreadReply:u,previousTweetId:p,promotedContent:h,composeSemanticCoreId:B,isPreview:E,trustedFriendsValue:T,tweetType:f.tweetType}).then(function(e){E||f.setState({tweetsSentOrScheduled:!0}),e.map(function(e,t){return f._scribeTweetSent(x[t],e,{hasArticleNudge:l});}),e.length>1&&f._scribeThreadSent(x,e,"thread_send_success");var r=e.length>1?sl:il;if(F&&g){var i=g,a=e.length;r=Ys({numOfTweets:a,communityName:i});}var o=E&&f.isReply,s={label:kl,link:void 0,onAction:void 0};if(o||!E){var d=o?e[0].in_reply_to_status_id_str:e[0].id_str;s.link={pathname:"/".concat(t?t.screen_name:"i","/status/").concat(d||"")};}else s.onAction=(0,ds.Qg)(c,m,F);if(n({text:f._getToastMessage(r),action:s}),f.isInlineReply&&f.setState({focused:!1}),e[0]&&p){var u=P.Z.getOriginalTweet(e[0]);if(c.getLastNonModalLocationPathname()==="/".concat(u.user.screen_name,"/status/").concat(p)){var h=P.Z.getTweetLatestVersionPermalink(u);c.replace({pathname:h});}}return f._updateConvoCardState(),f._close({withGraduateAccessCheck:!0}),e;})["catch"](function(e){var t,n=e.sentTweets,i=void 0===n?[]:n,a=Array.isArray(e.errors)&&(null===(t=e.errors[0])||void 0===t?void 0:t.code),s=null==e?void 0:e.url,d=null==e?void 0:e.status,u={message:e.type,event_info:a?"".concat(a):void 0,status_code:d,url:s};throw i.map(function(e,t){return f._scribeTweetSent(x[t],e);},{hasArticleNudge:l}),(0,Eo.O9)(e)&&e.code===z.d.CANCELED||r.scribe({action:"send_tweet_failure",data:u}),x.length>1&&f._scribeThreadSent(x,i,"thread_send_failure"),i.length&&c.replace({pathname:m.pathname,state:(0,o.Z)((0,o.Z)({},(0,L.Z)(m.state||{},"quotedStatus")),{},{inReplyToStatusId:i[i.length-1].id_str,isSelfThreadReply:!0})}),e;})["catch"](f._handleTweetError("send_tweet_cancel",bo.Z));}),(0,m.Z)((0,c.Z)(f),"_setActiveParentKey",function(){(0,f.props.setActiveParentKey)(f._getParentKey());}),(0,m.Z)((0,c.Z)(f),"_scribeSoftNudgeWithQuoteTweet",function(e,t,n){"soft_nudge_with_quote_tweet"===(null==e?void 0:e.limited_actions)&&f._scribe({action:t},n);}),(0,m.Z)((0,c.Z)(f),"_scribeTweetSent",function(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.hasArticleNudge,s=void 0!==a&&a,l=i.isDraftTweet,c=void 0!==l&&l,d=i.isScheduled,u=void 0!==d&&d,m=f.state.nudgeId,p=e.scheduledTweetId?"schedule_edit_":"schedule_",h=e.draftTweetId?"draft_edit_":"draft_",g=c?h:u?p:"send_",v={items:[xo.Z.getTweetItem(t)]},y=e.media.some(function(e){var t;return!(null===(t=e.mediaMetadata)||void 0===t||!t.altText);}),_=e.mediaTags.length,b=(0,N.Z)(e.media.map(function(e){var t,n=null===(t=e.mediaMetadata)||void 0===t?void 0:t.sensitiveMediaWarning;return n?Array.from(n):void 0;}).filter(Boolean).flat()),w=f.props.isInline?"inline_reply":"tweet_box_dialog";if(f._scribe({action:"".concat(g,"tweet")},v),c||!e.draftTweetId||e.scheduledTweetId||f._scribe({action:"".concat(g,"draft_tweet")},v),e&&(null===(n=f._getSingleComposerDataWithLatestText(e))||void 0===n||null===(r=n.text)||void 0===r?void 0:r.length)>0&&f._scribeSoftNudgeWithQuoteTweet(e.quotedStatus,"soft_nudge_with_qt_retweet_with_comment",v),f.isQuoteTweet&&(f._scribe({action:"retweet_with_comment"},v),s&&f._scribe((0,o.Z)((0,o.Z)({},Bl),{},{element:"result",action:"retweet_with_comment"}),v)),f.isReply&&f._scribe({component:w,action:"".concat(g,"reply")},v),f._hasValidPoll(e)&&f._scribe({action:"".concat(g,"poll_tweet")},v),f._hasPhoto(e)&&(f._scribe({action:"".concat(g,"photo_tweet")},v),y&&f._scribe({action:"".concat(g,"photo_tweet_with_alt_text")},v),_&&f._scribe({action:"".concat(g,"photo_tweet_with_tags")},v)),f._hasVideo(e)&&(f._scribe({action:"".concat(g,"video_tweet")},v),_&&f._scribe({action:"".concat(g,"video_tweet_with_tags")},v)),b.size){var T=f._hasPhoto(e)?"photo":"video";b.forEach(function(e){f._scribe({action:"".concat(g).concat(T,"_tweet_with_").concat(e,"_warning")},v);});}if(m&&f.isReply&&!u&&f._scribeNudgeEvent(c),m||c||!f.isReply||u||f._scribeNudgeNotSent(),e.gifMetadata){var Z=t.id_str&&xo.Z.getGifSearchItemForTweet(t.id_str,e.gifMetadata);f._scribe({element:"remote",action:"".concat(g,"gif_tweet")},{items:Z?[Z]:[]});var C=e.media.some(function(e){var t;return!(null===(t=e.mediaMetadata)||void 0===t||!t.defaultAltText);});(y||C)&&f._scribe({element:"remote",action:"".concat(g,"gif_tweet_with_alt_text")},{event_info:y?"user_entered":"from_provider",items:Z?[Z]:[]}),_&&f._scribe({action:"".concat(g,"gif_tweet_with_tags")},v);}else f._hasGif(e)&&(f._scribe({element:"local",action:"".concat(g,"gif_tweet")},v),y&&f._scribe({element:"local",action:"".concat(g,"gif_tweet_with_alt_text")},v));}),(0,m.Z)((0,c.Z)(f),"_scribeNudgeEvent",function(e){fo.scribeNudgeDialogAction(f.props.analytics,f.tweetType,{action:e?"save":"sent",element:"result"},f.state.nudgeId);}),(0,m.Z)((0,c.Z)(f),"_scribeNudgeNotSent",function(){fo.scribeNudgeDialogAction(f.props.analytics,f.tweetType,{action:"sent_no_nudge",element:"result"});}),(0,m.Z)((0,c.Z)(f),"_scribeThreadSent",function(e,t,n){var r=f.props.inReplyToStatus,i={items:[xo.Z.getSendThreadItem(e,t.length,!!r)]};f._scribe({action:n},i);}),(0,m.Z)((0,c.Z)(f),"_scribeRetweet",function(e){var t=f.props.hasArticleNudge,n={items:[xo.Z.getTweetItem(e)]};f._scribeSoftNudgeWithQuoteTweet(e,"soft_nudge_with_qt_retweet",n),f._scribe({action:"retweet"},n),t&&f._scribe((0,o.Z)((0,o.Z)({},Bl),{},{element:"result",action:"retweet"}),n);}),(0,m.Z)((0,c.Z)(f),"_handleRetweet",function(){var e=f.props,t=e.composerData,n=e.createLocalApiErrorHandler,r=e.retweet,i=t[0].quotedStatus;i&&(f._scribeRetweet(i),r(i.id_str,{}).then(function(e){f.setState({tweetsSentOrScheduled:!0}),f._close({withGraduateAccessCheck:!0});},n(_o.l)));}),(0,m.Z)((0,c.Z)(f),"handleDismissComposer",function(){f.shouldShowDiscardConfirmation?f.setState({showDiscardTweetConfirmation:!0}):f.shouldShowBackgroundSendConfirmation?f._cancelAllMediaUploads():f._close();}),(0,m.Z)((0,c.Z)(f),"handleEditTimeLimitExceeded",function(){f.setState({showEditTimeLimitExceededConfirmation:!0});}),(0,m.Z)((0,c.Z)(f),"_cancelAllMediaUploads",function(){f.props.composerData.forEach(function(e){return e.media.forEach(function(e){return e.uploading&&e.uploader&&e.uploader.cancel();});});}),(0,m.Z)((0,c.Z)(f),"_handleConfirmDiscardTweet",function(){var e=f.props,t=e.analytics,n=e.hasArticleNudge;f._cancelAllMediaUploads(),f.setState({showDiscardTweetConfirmation:!1}),f._close();var r=f._canSaveDraft?"draft":"send";t.scribeAction("".concat(r,"_tweet_discard")),n&&f._scribe((0,o.Z)((0,o.Z)({},Bl),{},{element:"result",action:"cancel"})),f.state.nudgeId&&fo.scribeNudgeDialogAction(f.props.analytics,f.tweetType,{action:"cancel",element:"result"},f.state.nudgeId);}),(0,m.Z)((0,c.Z)(f),"_handleCancelDiscardTweet",function(){f.setState({showDiscardTweetConfirmation:!1},function(){f._restoreFocusToActiveComposer();});}),(0,m.Z)((0,c.Z)(f),"_handleCancelLastEditConfirmation",function(){return f.setState({showLastEditConfirmation:!1});}),(0,m.Z)((0,c.Z)(f),"_handleAcceptAltTextPrompt",function(){f.setState({showAltTextPrompt:!1});var e=f.props.history,t=f._getAltTextMetadata().noDescriptionImageIDs;t[0]&&(f._scribe((0,o.Z)((0,o.Z)({},Ll),{},{action:"accepted"})),e.push("/compose/tweet/media",{mediaId:t[0],tab:Kn.P.AltText,hideTabs:!0,showAllMedia:!0}));}),(0,m.Z)((0,c.Z)(f),"_handleIgnoreAltTextPrompt",function(){f._scribe((0,o.Z)((0,o.Z)({},Ll),{},{action:"declined"})),f.setState({showAltTextPrompt:!1}),f._handleTweetOrRetweet();}),(0,m.Z)((0,c.Z)(f),"_handleCancelAltTextPrompt",function(){f._scribe((0,o.Z)((0,o.Z)({},Ll),{},{action:"cancel"})),f.setState({showAltTextPrompt:!1},function(){f._restoreFocusToActiveComposer();});}),(0,m.Z)((0,c.Z)(f),"_restoreFocusToActiveComposer",function(){var e=f.props.activeComposerIndex;void 0!==e&&f._composerRefs[e]&&f._composerRefs[e].focus();}),(0,m.Z)((0,c.Z)(f),"_close",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withGraduateAccessCheck,n=f.props,r=n.history,i=n.isSending,a=n.onCloseComposer,o=n.showGraduatedAccess,s=t&&o&&!f.isPreview;i||f._resetDraft(),f.state.navigatingToOutbox?f._canSaveDraft?r.push("/compose/tweet/unsent/drafts"):r.push("/compose/tweet/unsent/scheduled"):s?r.push({pathname:"/i/graduated-access",query:{graduatedAccessScribeSrc:"compose"}}):a&&a();}),(0,m.Z)((0,c.Z)(f),"_handleComposerFocus",function(e){f._composerRefs[e]?f.props.updateActiveComposerIndex(e):setTimeout(function(){f._restoreFocusToActiveComposer();},0);}),(0,m.Z)((0,c.Z)(f),"_handleFocus",function(){f.state.focused||(f.isInlineReply&&f._scribe({element:"inline_reply",action:"reply"}),f.setState({focused:!0}));}),(0,m.Z)((0,c.Z)(f),"_handleTypeaheadStateChange",function(e){f.setState({typeaheadActive:e});}),(0,m.Z)((0,c.Z)(f),"_handleRemoveComposer",function(){var e=f.props,t=e.activeComposerIndex,n=e.composerData,r=e.history,i=e.location,a=e.removeComposer;0===t&&n[0].quotedStatus&&r.replace({pathname:i.pathname,state:(0,L.Z)(i.state||{},"quotedStatus")}),a(),setTimeout(f._restoreFocusToActiveComposer);}),(0,m.Z)((0,c.Z)(f),"_handleViewRecipients",function(){var e=f.props,t=e.excludedRecipients,n=e.history,r=e.inReplyToStatus;f._setActiveParentKey(),n.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:t,inReplyToStatus:r}});}),(0,m.Z)((0,c.Z)(f),"_handleTextChange",function(e,t){var n=f.props,r=n.activeComposerIndex,i=n.isInline,a=n.setValidity,s=(0,o.Z)((0,o.Z)({},f.state.composerEditorContentMap),{},(0,m.Z)({},e,t));if(f.setState({composerEditorContentMap:s},function(){a&&a(f._areComposersValid());}),f.setState({errorMessage:void 0}),U.ZP.isIOS()){var l=i?0:r;f._updateSingleComposer(t,l);}}),(0,m.Z)((0,c.Z)(f),"_handleTextOnBlur",(0,M.Z)(function(e,t){return function(){if(f.props.composerData.some(function(t){return t.key===e;})&&!f.state.tweetsSentOrScheduled){var n=f.state.composerEditorContentMap[e];"object"===(0,i.Z)(n)&&f._updateSingleComposer(n,t);}};})),(0,m.Z)((0,c.Z)(f),"_updateAudienceControlsValue",function(e){var t=f.props,n=t.composerData,r=t.updateAudienceControlsValue,i=f.state.errorMessage;switch(e._type){case"conversation_controls":if(!f._conversationControlsCreationEnabled)return;break;case"community_members":if(!f._isCommunitiesEnabled)return;n[0].pollActive&&!f.context.featureSwitches.isTrue("c9s_poll_creation_enabled")&&(f._updateSingleComposer({pollActive:!1},0),f.setState({errorMessage:{text:$s}})),(null==i?void 0:i.text)===$s&&f.setState({errorMessage:void 0});}r(e,f._getParentKey());}),(0,m.Z)((0,c.Z)(f),"_renderProgressBar",function(){var e=f.props,t=e.isSending,n=e.sendingProgress,r=t?Math.max(n,.02):0;return p.createElement(S.Z,{progress:r,style:[Vl.progressBar,{visibility:r?"visible":"hidden"}]});}),(0,m.Z)((0,c.Z)(f),"_updateConvoCardState",function(){var e=f.props,t=e.convoCardData,n=e.updateConvoCardState;if(t){var r=t.cardId,i=t.nextState;i&&r&&n(r,{cardState:i});}}),(0,m.Z)((0,c.Z)(f),"_attachExternalMedia",function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return Promise.all(t.map(function(e){return(0,Co.f)(e);})).then(function(t){return f._handleAddMediaFiles(e)(t,n,r);});};}),(0,m.Z)((0,c.Z)(f),"_handleAddMediaFiles",function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=f.props,o=a.addMedia,s=a.addToast,l=a.composerData,c=a.dataSaverMode,d=a.processMultipleMedia,u=a.removeMediaUpload,m=a.uploadMedia,p=l[e],h=p.pollActive;h||o(t,{location:Gr.vC.Tweet,uploadIds:n,altTexts:i}).then(function(t){var n=t.map(function(e){return e.id;});if((0,Yn.X2)([].concat((0,r.Z)(p.media),(0,r.Z)(t)))){var i=p.media.map(function(e){return e.id;});f._updateSingleComposer({mediaIds:(0,O.Z)(i.concat(n))},e),d(t,{onFailure:f._handleMediaRemoveFactory(e)}).then(function(e){c||m(e.map(function(e){return e.id;}));});}else s({text:Fl}),u(n);});};}),(0,m.Z)((0,c.Z)(f),"_handleMediaRemoveFactory",function(e){return function(t){return f._handleMediaRemove(e,t);};}),(0,m.Z)((0,c.Z)(f),"_handleMediaRemove",function(e,t){var n=f.props,r=n.composerData,i=n.removeMediaUpload,a=r[e],o=a.media,s=a.mediaTags,l=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r];}return(0,V.Z)(e,n);}(o.map(function(e){return e.id;}),t),c=l.length>0?s:[];f._updateSingleComposer({mediaIds:l,gifMetadata:void 0,mediaTags:c},e),i(t),f.setState({errorMessage:void 0}),f._restoreFocusToActiveComposer();}),(0,m.Z)((0,c.Z)(f),"_setComposerRef",function(e){return function(t){f._composerRefs[e]=t;};}),(0,m.Z)((0,c.Z)(f),"_shouldBeExpanded",function(){var e=f.props,t=e.composerData,n=e.parentTweetId;if(f.state.focused)return!0;var r=!(0,Jn._2)(f._getSingleComposerDataWithLatestText(t[0]));return!n||r;}),(0,m.Z)((0,c.Z)(f),"_areComposersValid",function(){var e,t=f.props,n=t.audienceControlsValue._type,r=t.composerData,i=t.prepopulatedText,a=t.previousTweetMedia,s=t.previousTweetTags,l=r[0].quotedStatus,c=null==l?void 0:l.community_id_str,d="community_members"===n,u="trusted_friends_tweet"===n,m=l&&(0,Uo.$y)(f.context.featureSwitches,l,Uo.d.Retweet);return!(!f.isRetweet||c||d||u||m)||!!r.every(function(e){var t=f.isThread,n=(0,o.Z)((0,o.Z)({},f.context),{},{isThread:t});return(0,Jn.SP)(f._getSingleComposerDataWithLatestText(e),n);})&&!(f.isEdit&&(0,Jn.SZ)(f._getSingleComposerDataWithLatestText(r[0]),null!==(e=f.state.previousTweetText)&&void 0!==e?e:i,a.map(function(e){return e.uploadId;}),s));}),(0,m.Z)((0,c.Z)(f),"_areComposersEmptyOrUnchanged",function(){var e=f.props,t=e.composerData,n=e.prepopulatedText;return t.every(function(e){return(0,Jn._2)(e)||(0,Jn.SZ)(f._getSingleComposerDataWithLatestText(e),n);});}),(0,m.Z)((0,c.Z)(f),"_getAltTextMetadata",function(){var e=f.props.composerData,t={numberOfDescriptionsMissing:0,numberOfImages:0,noDescriptionImageIDs:[]};return e.forEach(function(e){var n,i=(e.media||[]).filter(function(e){var t=e.externalMediaDetails,n=e.mediaFile;return(null==n?void 0:n.isImage)||(null==n?void 0:n.isGif)||(null==t?void 0:t.mediaType)===D.Re;}),a=i.filter(function(e){var t=e.mediaMetadata;return!(null!=t&&t.altText);}).map(function(e){return e.id;});t.numberOfImages+=i.length,(n=t.noDescriptionImageIDs).push.apply(n,(0,r.Z)(a));}),t.numberOfDescriptionsMissing=t.noDescriptionImageIDs.length,t;}),(0,m.Z)((0,c.Z)(f),"_getSingleComposerDataWithLatestText",function(e){var t=f.state.composerEditorContentMap[e.key];return"object"===(0,i.Z)(t)?(0,o.Z)((0,o.Z)({},e),t):e;});var y=!(null===(u=e.location.state)||void 0===u||!u.focusComposer);return f.state={focused:y,showAltTextPrompt:!1,showDiscardTweetConfirmation:!1,showEditTimeLimitExceededConfirmation:!1,showLastEditConfirmation:!1,showToxicReplyNudge:!1,composerEditorContentMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1},f._composerRefs={},f._conversationControlsCreationEnabled=!0===f.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),f._throttledSyncTexts=(0,B.Z)(f._syncTexts,1e3,{leading:!0,trailing:!1}),f._keyCommandHandlers=(h={},(0,m.Z)(h,Xn.NF,f.handleTweetOrRetweet),(0,m.Z)(h,Xn.Bp,f.handleDismissComposer),h),f._keyCommandHandlersForActiveTypeahead=(0,m.Z)({},Xn.NF,f.handleTweetOrRetweet),f._isAltTextNudgeEnabled=!0===f.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_alt_text_nudges_enabled"),f._isCommunitiesEnabled=f.context.featureSwitches.isTrue("c9s_enabled"),f;}return(0,l.Z)(n,[{key:"UNSAFE_componentWillMount",value:function value(){var e=this.props.onRef;e&&e(this);}},{key:"componentDidMount",value:function value(){var e,t,n=this,r=this.props,i=r.composerData,a=r.convoCardData,o=r.externalMedia,s=r.externalMediaFiles,l=r.fetchAltTextPromptPreferenceIfNeeded,c=r.history,d=r.isInline,u=r.isIntentRoute,m=r.location,p=r.prepopulatedText,h=r.previousTweetMedia,f=r.setValidity,g=(null===(e=i[0].media)||void 0===e?void 0:e.length)>0;(this._initialPathname=c.location.pathname,this._unblockHistory=this.props.history.block(this._blockHistory),o.length>0&&this._attachExternalMedia(0)(o),s.length>0&&this._handleAddMediaFiles(0)(s),this.isEdit&&!g&&null!=h&&h.length)&&(this._attachExternalMedia(0)(h.map(function(e){return e.url;}),h.map(function(e){return e.uploadId;}),h.map(function(e){return e.altText;})),null!==(t=h[0].mediaTags)&&void 0!==t&&t.length&&this._fetchTaggedUsersIfNeeded(h[0].mediaTags).then(function(){return n._attachPreviousTweetTags();}));this._handleFetchTweetIfNeeded(),this._handleDeletePreviewTweet(),l();var v={};p&&(v.text=p),a&&a.cardUrl&&(v.cardUrl=a.cardUrl),Object.keys(v).length&&this._setSingleComposer(v),(p||a&&a.cardUrl||o.length>0||s.length>0)&&!u&&(this.isEdit&&p&&this.setState({previousTweetText:p}),c.replace({query:(0,Zo.U)(m.query),search:"",pathname:m.pathname,state:(0,L.Z)((0,Zo.U)(m.state||{}),["defaultText","externalMedia","externalMediaFiles"])})),f&&f(this._areComposersValid()),d||this._setActiveParentKey(),this.isEdit&&this.props.isModal&&this._scribe({section:"composition",component:"edit_tweet",action:"impression"}),this.isInlineReply&&this.state.focused&&(setTimeout(function(){n._root&&n._root.scrollIntoView(),window.scrollBy(0,-I.Z.theme.componentDimensions.appBarHeightPx);},0),this._scribe({element:"inline_reply",action:"reply"})),this._checkForPollEligibility();}},{key:"shouldComponentUpdate",value:function value(e,t){var n=["previousTweetTags"];return!f()((0,L.Z)(this.props,n),(0,L.Z)(e,n))||!(0,F.Z)(this.props.previousTweetTags,e.previousTweetTags)||!f()(this.state,t);}},{key:"componentDidUpdate",value:function value(e,t){var n=this.props,r=n.addToast,i=n.composerData,a=n.copyDataFromInlineComposerToModalComposer,o=n.externalMedia,s=n.externalMediaFiles,l=n.onRef,c=n.parentTweetId,d=n.replyPressToggle,u=n.setValidity;n.windowWidth!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==l&&e.onRef(void 0),l&&l!==e.onRef&&l(this);var m=this.context.featureSwitches;Wl(i.length,m)&&!Wl(e.composerData.length,m)&&r({text:Rl}),o.length>0&&o!==e.externalMedia?this._attachExternalMedia(0)(o):s.length>0&&s!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(s),u&&!(0,F.Z)(i,e.composerData)&&u&&u(this._areComposersValid()),d!==e.replyPressToggle&&a(c);}},{key:"componentWillUnmount",value:function value(){var e=this.props.onRef;this._unblockHistory&&this._unblockHistory(),e&&e(void 0),this._syncTexts();}},{key:"activeComposerData",get:function get(){var e=this.props,t=e.composerData,n=e.isInline,r=e.isModal,i=this.state.typeaheadActive,a=!r&&i,o=n?0:this.props.activeComposerIndex;return a||n?[t[o]]:t;}},{key:"is_uploading",get:function get(){return this.activeComposerData.some(function(e){return e.media.some(function(e){var t;return(null===(t=e.mediaFile)||void 0===t?void 0:t.isVideo)&&e.uploading&&"number"==typeof e.uploadProgress&&e.uploadProgress<1;});});}},{key:"has_video",get:function get(){return this.activeComposerData.some(function(e){return e.media.some(function(e){var t;return null===(t=e.mediaFile)||void 0===t?void 0:t.isVideo;});});}},{key:"is_composing_note_tweet",get:function get(){var e=(0,a.Z)(this.props.composerData,1)[0];return tr.SC(e,this.context);}},{key:"render",value:function value(){var e,t,n,r=this,i=this.props,a=i.activeUser,o=i.addToast,s=i.audienceControlsValue,l=i.composeHeader,c=i.composerData,d=i.geoEnabled,u=i.history,m=i.inReplyToStatus,h=i.isInline,f=i.isModal,g=i.isSelfThreadReply,y=i.isSending,_=i.isSuperFollowsCreator,b=i.parentTweetId,T=i.positionCursorAtBeginning,Z=i.previousTweetMedia,S=i.scheduledFor,I=i.userLanguage,P=i.windowWidth,k=this.state,A=k.errorMessage,R=k.focused,D=k.showAltTextPrompt,N=k.showEditTimeLimitExceededConfirmation,F=k.showLastEditConfirmation,M=k.showToxicReplyNudge,L=k.typeaheadActive,B=h?0:this.props.activeComposerIndex,O=this.activeComposerData,V=this._areComposersValid(),z=h?v.Z:w,U=h?{}:{onAnimateComplete:f?void 0:this._handleAnimateComplete},H=!V||y||this.isCommunityTweetFromProtectedUser||this.is_uploading,W=h&&To.Z.isOneColumnSquishedLayout(P),j=this.isCommunityTweet&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled"),q=W||j,K=W||this.isCommunityTweet||this.isExclusiveTweet,G=null==m||null===(e=m.trusted_friends_info)||void 0===e?void 0:e.screen_name;return p.createElement(v.Z,{ref:this._setRootRef,style:!b&&Vl.root},this._renderMask(),this._renderEditTweetLimitedMarketPrompt(),h?this._renderProgressBar():null,A&&p.createElement(v.Z,{style:Vl.inlineCallout},p.createElement(x.Z,{action:null!==(t=A.action)&&void 0!==t&&t.label&&null!==(n=A.action)&&void 0!==n&&n.link?{label:A.action.label,link:A.action.link}:void 0,text:A.text,type:"danger"})),p.createElement(v.Z,{onFocus:this._handleFocus,style:[Vl.content,b&&Vl.contentInlineReply,f&&Vl.contentModal]},this._renderDelegateAlertBanner(),m?this._renderReplyContext():null,l,p.createElement(z,U,O.map(function(e,t){var n=(0,nr.TO)(e.scheduledFor),i=c.indexOf(e),l=h||f?p.createElement(p.Fragment,null,p.createElement(go.Z,{disabled:H,isComposerValid:V,isEdit:r.isEdit,isModal:f,isQuote:!!r.isQuoteTweet,isReply:!!m,isScheduled:n,isSelfThreadReply:g,isThread:r.isThread,onTweetWithBoostPress:r.handleTweetWithBoost,shouldShow:f,tweetText:e.text,viewer:a}),p.createElement(C.ZP,{disabled:H,onPress:function onPress(){r.handleTweetOrRetweet();},size:"medium",style:Vl.inlineSendButton,testID:f?Gs:Qs,type:"brandFilled"},(0,ds.of)({inReplyToStatus:!!m,isSelfThreadReply:!!g,isQuoteTweet:!!r.isQuoteTweet,isRetweet:!!r.isRetweet,isScheduled:!!n,isThread:r.isThread,isEdit:!!r.isEdit}))):null,w=r._getSingleComposerDataWithLatestText(e),E=Wl(c.length,r.context.featureSwitches);return p.createElement(v.Z,{key:t},p.createElement(Li,{addComposerLink:r._makeAddComposerLink(h,g,b),addToast:o,additionalToolbarContent:l,audienceControlsValue:s,autoFocus:r.isInlineReply&&R,data:w,delegateUser:r._getDelegateUser(),disableAddTweet:E,editable:!y&&!!a,fetchAutotaggedLocationIfNeeded:r._fetchAutotaggedLocationIfNeeded,geoEnabled:d,hidePoll:q,hideScheduling:K,history:u,index:i,isAccountProtected:null==a?void 0:a["protected"],isActive:i===B&&!y,isCommunityTweetFromProtectedUser:r.isCommunityTweetFromProtectedUser,isEdit:!!r.isEdit,isExpanded:0!==t||r._shouldBeExpanded(),isInline:h,isInlineReply:r.isInlineReply,isLast:h||i===c.length-1,isReply:!!m||r.isInlineReply,isSelfThreadReply:!!g,isSuperFollowsCreator:_,isThread:r.isThread,key:e.key,keyCommandHandlers:r._getKeyCommandHandlers(),loggedInUser:a,onAddComposer:r._handleAddComposer,onFilesAdded:r._handleAddMediaFiles(i),onFocus:r._handleComposerFocus,onRemoveComposer:r._handleRemoveComposer,onRemoveMedia:r._handleMediaRemove,onTextChange:r._handleTextChange,onTextInputBlur:r._handleTextOnBlur(w.key,t),onTypeaheadStateChange:r._handleTypeaheadStateChange,positionCursorAtBeginning:!!T,previousMedia:Z,ref:r._setComposerRef(i),scheduledFor:S,setActiveParentKey:r._setActiveParentKey,trustedFriendsTweetAuthorScreenName:G,typeaheadActive:L,updateAudienceControlsValue:r._updateAudienceControlsValue,updateSingleComposer:r._updateSingleComposer,userLanguage:I,windowWidth:P}));})),this._renderDiscardConfirmation(),N?p.createElement(E.Z,{confirmButtonLabel:xl,headline:Cl,onConfirm:this._handleConfirmDiscardTweet,text:El,withCancelButton:!1}):null,F?p.createElement(E.Z,{confirmButtonLabel:Pl,confirmButtonType:"destructiveFilled",headline:Sl,onCancel:this._handleCancelLastEditConfirmation,onConfirm:function onConfirm(){r._handleTweet();},text:Il,withCancelButton:!0}):null,D?this._renderAltTextPrompt():null,M?this._renderToxicReplyNudge():null,p.createElement(v.Z,{style:y&&Vl.mask})));}},{key:"_renderMask",value:function value(){return this.props.isInline||this.props.withoutMask?null:p.createElement(v.Z,{onClick:this.handleDismissComposer,style:Vl.composerMask,testID:Ks});}},{key:"_renderDiscardConfirmation",value:function value(){var e=this;if(!this.state.showDiscardTweetConfirmation)return null;if(this._is_showing_upload_modal||this.is_uploading){this._is_showing_upload_modal=!0;var t=function t(_t2){return function(){e._is_showing_upload_modal=!1,_t2();};};return p.createElement(E.Z,{cancelButtonLabel:bl.uploading.cancel,confirmButtonLabel:bl.uploading.confirm,headline:bl.uploading.headline,onCancel:t(this._handleConfirmDiscardTweet),onConfirm:t(this._handleCancelDiscardTweet),onMaskClick:t(this._handleCancelDiscardTweet),text:bl.uploading.text});}return this._canSaveDraft?p.createElement(E.Z,{cancelButtonLabel:fl,confirmButtonLabel:yl,headline:gl,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:vl}):p.createElement(E.Z,{confirmButtonLabel:fl,confirmButtonType:"destructiveFilled",headline:this._findDiscardHeadline(),onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:this.isEdit&&this._editTweetCompositionEnabled()?hl:pl});}},{key:"_scribe",value:function value(e,t){this.props.analytics.scribe((0,o.Z)((0,o.Z)({},e),{},{data:t}));}},{key:"_checkForPollEligibility",value:function value(){var e=this.props,t=e.activeComposerIndex,n=e.composerData[t],r=(null==n?void 0:n.pollActive)&&!function(e){var t=e.composerData,n=t.gifMetadata,r=t.media,i=t.quotedStatus;return!n&&0===r.length&&!i;}({composerData:n});r&&this._updateSingleComposer({pollActive:!1});}},{key:"isEdit",get:function get(){return!!this.props.previousTweetId;}},{key:"isEditingWithTwitterBlue",get:function get(){var e=this.context.featureSwitches;return this.isEdit&&this._editTweetCompositionEnabled()&&!e.isTrue("responsive_web_edit_tweet_enabled");}},{key:"isInlineReply",get:function get(){return!!this.props.parentTweetId;}},{key:"isThread",get:function get(){return this.props.composerData.length>1;}},{key:"isRetweet",get:function get(){var e=this.props.composerData,t=0===e[0].media.length,n=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===n&&t;}},{key:"isQuoteTweet",get:function get(){var e=this.props.composerData,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0;}},{key:"shouldShowDiscardConfirmation",get:function get(){var e=this.props.composerData[0].scheduledTweetId;return!(this.props.isSending||this._areComposersEmptyOrUnchanged()||this.state.showDiscardTweetConfirmation||e);}},{key:"shouldShowBackgroundSendConfirmation",get:function get(){var e=this.props,t=e.composerData,n=e.isSending,r=t.some(function(e){return e.media.some(function(e){return e.uploading;});});return n&&r;}},{key:"shouldShowAltTextPrompt",get:function get(){var e=this.props,t=e.altTextNudgeType,n=e.previousTweetMedia,r=this._getAltTextMetadata().numberOfDescriptionsMissing,i=(0,Jn.y8)(this.props.composerData[0].media,n.map(function(e){return e.uploadId;})),a=!this.context.featureSwitches.isTrue("responsive_web_alt_text_nudges_enabled");return 0!==r&&!a&&t===vo.f.Prompt&&!(this.isEdit&&!i);}},{key:"_canSaveDraft",get:function get(){if(this.props.isInline)return!1;if(this.isThread)return!1;if(this.isExclusiveTweet||this.isCommunityTweet||this.isEdit)return!1;var e=(0,a.Z)(this.props.composerData,1)[0],t=this.context.featureSwitches.isTrue("longform_notetweets_drafts_enabled");return(!this.is_composing_note_tweet||t)&&!this.has_video&&!e.pollActive&&0===e.mediaTags.length;}},{key:"isCommunityTweet",get:function get(){var e=this.props,t=e.audienceControlsValue,n=e.inReplyToStatus;return!!(null!=n&&n.community_id_str||"community_members"===t._type);}},{key:"isCommunityTweetFromProtectedUser",get:function get(){var e;return!(!this.isCommunityTweet||null===(e=this.props.activeUser)||void 0===e||!e["protected"]);}},{key:"isReply",get:function get(){return!(!this.props.inReplyToStatus&&!this.props.inReplyToStatusId);}},{key:"isExclusiveTweet",get:function get(){return!!this.props.audienceControlsValue.exclusivityControlValue;}},{key:"isTrustedFriendsTweet",get:function get(){return!!this.props.audienceControlsValue.trustedFriendsValue;}},{key:"tweetType",get:function get(){return this.isQuoteTweet?io.Quote:this.isThread?io.Thread:this.isReply?io.Reply:io.Original;}},{key:"_undoEnabledForTweetType",value:function value(e){var t=this.props.undoTweetSettings;return!t||void 0===t[this.tweetType]||t[e];}},{key:"isPreview",get:function get(){var e,t;if(this._isBoosting)return!1;var n=this.props.composerData;return!(!(null==this||null===(e=this.context)||void 0===e||null===(t=e.userClaims)||void 0===t?void 0:t.isTrueAndEnabled("subscriptions_feature_1003"))||this.isEdit)&&(this._hasValidPoll(n[0])?this._undoEnabledForTweetType("poll"):this._undoEnabledForTweetType(this.tweetType));}},{key:"_attachPreviousTweetTags",value:function value(){var e=this.props.previousTweetTags;this._updateSingleComposer({mediaTags:e});}}]),n;}(p.Component);(0,m.Z)(Ol,"defaultProps",{externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:function setValidity(){}}),(0,m.Z)(Ol,"contextType",Hn.rC);var Vl=I.Z.create(function(e){return{root:{paddingBottom:e.spaces.space4},composerMask:{position:"fixed",top:0,start:0,width:"100%",height:"100%"},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomStartRadius:e.borderRadii.xLarge,borderBottomEndRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:I.Z.absoluteFillObject,inlineSendButton:{marginStart:e.spaces.space12},progressBar:{position:"absolute",borderTopStartRadius:e.borderRadii.small,borderTopEndRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},editTweetLimitedMarketPrompt:{gap:e.spaces.space24},altTextPromptParagraph:{marginTop:e.spaces.space8},hidden:{position:"absolute",visibility:"hidden",width:"100%"}};});var zl=(Ul=(0,q.Z)(js(Ol)),Hl={fallbackToCurrentSelectedDelegate:!0},p.memo(p.forwardRef(function(e,t){return(0,zo.h)("twitter_delegate_enabled")?p.createElement(Vo.p,Hl,p.createElement(Ul,(0,W.Z)({},e,{ref:t}))):p.createElement(Ul,(0,W.Z)({},e,{ref:t}));})));var Ul,Hl;function Wl(e,t){return e>=t.getNumberValue("longform_notetweets_max_tweet_per_thread",25);}var jl={composeTweetRoute:/^\/compose\/tweet\/?$/,unsentRoutes:/^\/compose\/tweet\/unsent\//};},325559:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return o;},m:function m(){return a;}});n(890103);var r=n(202784),i=n(250177);function a(e){var t=(0,i.A)();return[!!t&&!t.flags[e],r.useCallback(function(){null==t||t.addFlag(e);},[t,e])];}var o=a;},310264:function _(e,t,n){"use strict";n.d(t,{f:function f(){return r;}});n(22144);var r=Object.freeze({None:"None",Nudge:"Nudge",Prompt:"Prompt",Require:"Require"});},414537:function _(e,t,n){"use strict";n.d(t,{d:function d(){return c;}});n(818178);var r=n(473228),i=n.n(r),a=n(463174),o=n(799629),s=n(472599),l=i().a5d4fda0,c=function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{customErrorHandler:function customErrorHandler(n){var r=n.context;return!n instanceof a.Z&&(n.message="Strato error occurred in ".concat(r.id,": ").concat(r.action)),(0,s.ZP)(n,{extra:{context:r,isStrato:!0}}),t?(0,o.fz)({text:e}):[];}};};},691335:function _(e,t,n){"use strict";n.d(t,{U:function U(){return d;},Z:function Z(){return c;}});var r=n(196234),i=(n(543450),n(372147),n(358188),n(888233),n(416781),n(995342),n(818178),n(473228)),a=n.n(i),o=n(871768),s=a().b2e94283,l=["title","screen_name","text","url","hashtags","via"];var c=function c(e){var t=e.state||{},n=e.query||{},i=l.map(function(e){return t[e]||n[e];}),a=(0,r.Z)(i,6),o=a[0],c=a[1],d=a[2],u=a[3],m=a[4],p=a[5],h=[o,c&&"@".concat(c.toString()),d,u,m&&m.toString().split(",").map(function(e){return"#".concat(e);}).join(" "),p&&s({viaScreenName:p})].filter(Boolean).join(" ");return h?"".concat(h).concat(" "):void 0;};var d=function d(e){return(0,o.Z)(e,l);};},944139:function _(e,t,n){"use strict";n.d(t,{Px:function Px(){return Z;},BJ:function BJ(){return T;},k6:function k6(){return w;},Xm:function Xm(){return _;},ke:function ke(){return g;},jK:function jK(){return f;},tn:function tn(){return y;},uD:function uD(){return v;},T5:function T5(){return E;}});var r=n(256666),i=n(133028),a=(n(22144),n(477950),n(94908),n(358188),n(73439),n(526853)),o=n(753392),s=n(823803),l=n(791670),c=n(335434),d=n(917341),u=n(114615),m=(n(449228),"placePicker"),p=Object.freeze({REQUEST:"rweb/placePicker/SEARCH_REQUEST",SUCCESS:"rweb/placePicker/SEARCH_SUCCESS",FAILURE:"rweb/placePicker/SEARCH_FAILURE"}),h=Object.freeze({initial:{fetchStatus:s.ZP.NONE},lastSearch:{fetchStatus:s.ZP.NONE},lastSelectedPlace:void 0});var f=function f(e){return e.placePicker.initial.results;},g=function g(e){return e.placePicker.initial.fetchStatus;},v=function v(e){return e.placePicker.lastSearch.results;},y=function y(e){return e.placePicker.lastSearch.fetchStatus;},_=function _(e){var t=f(e),n=function(e){return e.placePicker.lastSelectedPlace;}(e);return function(e,t){return null!=t?t:null==e?void 0:e.places.find(function(t){return(null==e?void 0:e.autotag_place_id)===t.place.id;});}(t,n);},b=function b(e,t){return function(n,r,i){var a=i.api;return(0,o._O)(n,{request:a.Places.search,params:e})({actionTypes:p,context:"SEARCH_PLACES_ACTION",meta:{resultSet:t}});};},w=function w(e){return function(t,n,r){r.api;var i=(0,l.Bz)(n());return t(b({query_type:u.ZV.tweet_compose_location,lat:null==i?void 0:i.coords.latitude,"long":null==i?void 0:i.coords.longitude,hacc:null==i?void 0:i.coords.accuracy,search_term:e},u.Z0.lastSearch));};},T=function T(){return function(e,t,n){n.api;var r=g(t()),i=f(t());if(r===s.ZP.LOADING||i)return Promise.resolve();var a=(0,l.Bz)(t());return a?e(b({lat:a.coords.latitude,"long":a.coords.longitude,hacc:a.coords.accuracy,query_type:u.ZV.tweet_compose_location,count:50},u.Z0.initial)):Promise.resolve();};},Z=function Z(){return function(e,t,n){n.api;return(0,d.t$)(t())&&(0,l.wM)(t())===c.S.granted?e((0,l.ZW)()).then(function(){return e(T());}).then(function(){return _(t());}):Promise.resolve();};},C="rweb/placePicker/UPDATE_LAST_SELECTED_PLACE",E=function E(e){return{type:C,payload:e};};a.Z.register((0,r.Z)({},m,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;if(!t)return e;switch(t.type){case p.REQUEST:var n=t.meta.resultSet;return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},n,{fetchStatus:s.ZP.LOADING}));case p.FAILURE:var a=t.meta.resultSet;return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},a,{fetchStatus:s.ZP.FAILED}));case p.SUCCESS:var o=t.meta.resultSet,l=t.payload;return(0,i.Z)((0,i.Z)({},e),{},(0,r.Z)({},o,{fetchStatus:s.ZP.LOADED,results:l}));case C:var c=t.payload;return(0,i.Z)((0,i.Z)({},e),{},{lastSelectedPlace:null!=c?c:void 0});default:return e;}}));},114615:function _(e,t,n){"use strict";n.d(t,{Z0:function Z0(){return a;},ZV:function ZV(){return r;},xt:function xt(){return i;}});n(22144);var r=Object.freeze({profile_location:"profile_location",tweet_compose_location:"tweet_compose_location"}),i=Object.freeze({foursquare:"foursquare",yelp:"yelp"}),a=Object.freeze({initial:"initial",lastSearch:"lastSearch"});},768808:function _(e,t,n){"use strict";n.d(t,{O:function O(){return s;},d:function d(){return o;}});n(202784),n(818178);var r=n(765526),i=n(300482),a=n(979768),o=function o(e){(0,r.q)(function(){var t=i.P_(),n=function n(){t.resume();},r=function r(){t.pause();};return window.addEventListener("focus",n),window.addEventListener("blur",r),function(){i.IM("".concat(a.uB,":dwell:").concat(e),t.end()),window.removeEventListener("focus",n),window.removeEventListener("blur",r);};});},s=function s(e){var t=e.screenType;return o(t),null;};},799436:function _(e,t,n){"use strict";n.d(t,{$_:function $_(){return l;},FR:function FR(){return s;},ZP:function ZP(){return d;}});n(108532);var r=n(202784),i=n(325686),a=n(854044),o=n(973186);var s=function s(e){return r.createElement(a.Z,null,function(t){var n=t.windowWidth<o.Z.theme.breakpoints.small;return e(n?"space32":"space80");});},l=function l(e){return r.createElement(a.Z,null,function(t){var n=t.windowWidth<o.Z.theme.breakpoints.small;return e(n?c.mobileContainer:c.webContainer);});},c=o.Z.create(function(e){return{webContainer:{paddingHorizontal:e.spaces.space80},mobileContainer:{paddingHorizontal:e.spaces.space32}};});var d=function d(e){var t=e.children,n=(0,a.F)().windowWidth<o.Z.theme.breakpoints.small?c.mobileContainer:c.webContainer;return r.createElement(i.Z,{style:n},t);};},188328:function _(e,t,n){"use strict";n.d(t,{LW:function LW(){return x;},ZP:function ZP(){return S;}});var r=n(196234),i=(n(477950),n(74069),n(345794),n(467321),n(358188),n(818178),n(416781),n(543450),n(995342),n(202784)),a=n(325686),o=n(378705),s=n(431165),l=n(594836),c=n(434740),d=n(973186),u=n(765526),m=n(768808),p=n(799436),h=n(667647),f=n(123791),g=n(392160),v=n(414854),y=function y(e){return e.quickPromote.targeting.contextualKeywords;};var _=(0,g.Z)().propsFromState(function(){return{selectedContextualKeywords:y};}).propsFromActions(function(){return{setTargetedContextualKeywords:v.ch};}).withAnalytics(f.EP);var b=(0,g.Z)().propsFromState(function(){return{selectedContextualKeywords:y};}).propsFromActions(function(){return{setTargetedContextualKeywords:v.ch};}).withAnalytics(f.EP),w=function w(e){var t=e.children,n=e.onBack,r=i.useMemo(function(){return i.createElement(s.Z,{onClick:n});},[n]);return i.createElement(a.Z,{style:C.qpContainer,testID:h.Z.targetingKeywordsScreen},i.createElement(o.Z,{leftControl:r,style:C.appBar,title:"Select some keywords"}),t);};function T(e){var t=e.analytics,n=e.recommendedKeywords,o=void 0===n?[]:n,s=e.selectedContextualKeywords,c=e.setTargetedContextualKeywords,d=i.useState(""),p=(0,r.Z)(d,2),g=p[0],v=p[1],y=i.useCallback(function(e){var t=e.target.value;v(t);},[]),_=i.useCallback(function(e){switch(e.key){case",":case"Enter":e.preventDefault();var t=g.trim(),n=s.some(function(e){return e.toLowerCase()===t.toLowerCase();});""===t||n||(c(s.concat(t)),v(""));}},[g,s,c]);return(0,u.q)(function(){return function(){(0,f.hq)(t)(f.Ur.setTargetingKeywords(s.join(",")));};}),(0,u.q)(function(){c(o);}),(0,m.d)(f.MN.TargetingKeywords),i.createElement(i.Fragment,null,i.createElement(a.Z,{style:C.selectionGroupContainer},i.createElement(l.Z,{editable:s.length<200,label:"Add keywords",name:"keywords",onChange:y,onKeyDown:_,style:C.noSpacing,testID:h.Z.targetingKeywordsInput,value:g})),i.createElement(a.Z,{style:C.row},s.map(function(e,t){return i.createElement(Z,{index:t,key:t,keyword:e,selectedContextualKeywords:s,setTargetedContextualKeywords:c});})));}function Z(e){var t=e.index,n=e.keyword,r=e.selectedContextualKeywords,o=e.setTargetedContextualKeywords,s=i.useCallback(function(){return o(r.filter(function(e,n){return n!==t;}));},[t,r,o]);return i.createElement(a.Z,{style:C.withMarginEnd},i.createElement(c.Z,{mode:"remove",onClick:s,text:n}));}var C=d.Z.create(function(e){return{qpContainer:{flex:1},appBar:{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,paddingStart:e.spaces.space8},selectionGroupContainer:{paddingTop:e.spaces.space16},row:{flexDirection:"row",flexWrap:"wrap",minHeight:"150px",alignContent:"flex-start"},withMarginEnd:{marginEnd:e.spaces.space8,marginBlockEnd:e.spaces.space8},noSpacing:{paddingHorizontal:"0"}};}),E=_(function(e){var t=e.analytics,n=e.history,r=e.location,a=e.match,o=e.selectedContextualKeywords,s=e.setTargetedContextualKeywords,l=i.useCallback(function(){var e=a.params,t=e.quickPromotePlatform,i=e.quickPromoteScreenName,o=e.screenName,s=e.statusId;(0,f.Mi)(n,r)(o,s,t,i);},[n,r,a.params]),c={analytics:t,selectedContextualKeywords:o,setTargetedContextualKeywords:s};return i.createElement(w,{onBack:l},i.createElement(p.ZP,null,i.createElement(T,c)));}),x=b(T);var S=E;},667647:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return r;}});var r={introButton:"introButton",nextButton:"nextButton",objectiveScreen:"objectiveScreen",targetingScreen:"targetingScreen",getObjective:function getObjective(e){return"objectiveScreenObjective".concat(e);},targetingLocationScreen:"targetingLocationScreen",targetingGenderScreen:"targetingGenderScreen",targetingKeywordsScreen:"targetingKeywordsScreen",budgetSelectScreen:"budgetSelectScreen",reviewScreen:"reviewScreen",reviewButton:"reviewButton",reviewObjectiveDescription:"reviewObjectiveDescription",reviewTargetingDescription:"reviewTargetingDescription",reviewBudgetAndDurationDescription:"reviewBudgetAndDurationDescription",reviewPaymentPivot:"reviewPaymentPivot",reviewPromotionTotalDescription:"reviewPromotionTotalDescription",targetingLocationPivot:"targetingLocationPivot",targetingGenderPivot:"targetingGenderPivot",targetingKeywordsPivot:"targetingKeywordsPivot",backButton:"backButton",targetingLocationSearch:"targetingLocationSearch",targetingLocationItem:"targetingLocationItem",getTargetingGender:function getTargetingGender(e){return"targetingGenderScreenGender".concat(e);},targetingKeywordsInput:"targetingKeywordsInput",paymentMethodSelect:"paymentMethodSelect",dropoffScreen:"dropoffScreen"};},248734:function _(e,t,n){"use strict";n.d(t,{Z:function Z(){return b;}});var r=n(196234),i=(n(172023),n(271245),n(202784)),a=n(325686),o=n(473228),s=n.n(o),l=n(418958),c=n(911711),d=n(35953),u=n(436934),m=n(744329),p=n(229496),h=n(430318),f=n(354484),g=n(973186),v=g.Z.create(function(e){return{root:{borderRadius:e.borderRadii.medium,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},contentContainer:{display:"flex",flexDirection:"row",flex:1},contentTextContainer:{flex:1,alignItems:"flex-start",justifyContent:"center"},dismissButton:{paddingStart:e.spaces.space12},icon:{color:e.colors.text,marginEnd:e.spaces.space8},illustration:{marginEnd:e.spaces.space8,height:e.spaces.space28,width:e.spaces.space28},arrow:{borderStyle:"none"},arrowContainer:{display:"flex",width:"100%",alignItems:"center"},arrowDirectionUp:{top:e.spacesPx.space4+e.spacesPx.space2},arrowDirectionDown:{top:0-e.spacesPx.space4-e.spacesPx.space2},arrowDown:{transform:"rotate(180deg)"},hidden:{opacity:0}};}),y=g.Z.create(function(e){return{primary:{backgroundColor:e.colors.primary0},purple:{backgroundColor:e.colors.purple0},plum:{backgroundColor:e.colors.plum0}};}),_=g.Z.create(function(e){return{primary:{color:e.colors.primary0},purple:{color:e.colors.purple0},plum:{color:e.colors.plum0}};});var b=function b(e){var t,n,o,g,b,w,T,Z,C,E=e.backgroundColor,x=void 0===E?"primary":E,S=e.containerRef,I=e.icon,P=e.illustration,k=e.onClose,A=e.text,R=s().af8fa2ae,D=(0,f.b)(),N=(0,h.Z)().direction,F=i.useState(Number.MIN_SAFE_INTEGER),M=(0,r.Z)(F,2),L=M[0],B=M[1],O=i.useState(Number.MIN_SAFE_INTEGER),V=(0,r.Z)(O,2),z=V[0],U=V[1],H="rtl"===N,W=function W(e){var t=e.getBoundingClientRect().top;return z>t;};return i.createElement(i.Fragment,null,i.createElement(a.Z,{onLayout:function onLayout(e){var t=e.nativeEvent.layout,n=t.left,r=t.top,i=t.width;U(r),B(n+i/2);}},(g=!(!S||z>=0&&L>=0),b=null!=S&&S.current?(t=S.current,W(t)?{flexDirection:"column"}:{flexDirection:"column-reverse"}):void 0,w=null==S||!S.current||W(S.current),T=null!=S&&S.current?function(e){var t=e.getBoundingClientRect(),n=t.left+t.width/2-L;return{start:H?void 0:n,end:H?n:void 0};}(S.current):void 0,Z=S?function(e,t){return i.createElement(a.Z,{style:[v.arrowContainer,t,e?v.arrowDirectionUp:v.arrowDirectionDown],testID:"tooltip-arrow"},i.createElement(c["default"],{style:[v.arrow,_[x],!e&&v.arrowDown]}));}(w,T):void 0,C=[b,g&&v.hidden],i.createElement(a.Z,{style:C,testID:"tooltip-content"},Z,i.createElement(a.Z,{style:[v.root,y[x]]},i.createElement(a.Z,{style:v.contentContainer},I&&!P?(o=I,i.createElement(o,{style:[v.icon,{alignItem:"flex-start"}],testID:"tooltip-icon"})):null,P&&!I?(n=P,i.createElement(a.Z,{style:v.illustration,testID:"tooltip-illustration"},i.createElement(d.Z,{accessibilityLabel:"",aspectMode:m.Z.SQUARE,image:n}))):null,i.createElement(a.Z,{style:v.contentTextContainer},i.createElement(u.ZP,{nativeID:D},A))),i.createElement(a.Z,{style:v.dismissButton},i.createElement(p.ZP,{accessibilityDescribedBy:D,accessibilityLabel:R,icon:i.createElement(l["default"],{testID:"tooltip-close-icon"}),onPress:k,size:"xSmall",type:"primaryText"})))))));};},142683:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M11.999 22.25c-5.652 0-10.25-4.598-10.25-10.25S6.347 1.75 11.999 1.75 22.249 6.348 22.249 12s-4.598 10.25-10.25 10.25zm0-18.5c-4.549 0-8.25 3.701-8.25 8.25s3.701 8.25 8.25 8.25 8.25-3.701 8.25-8.25-3.701-8.25-8.25-8.25zm.445 6.992c1.747-.096 3.748-.689 3.768-.695l.575 1.916c-.077.022-1.616.48-3.288.689v.498c.287 1.227 1.687 2.866 2.214 3.405l-1.428 1.4c-.188-.191-1.518-1.576-2.286-3.144-.769 1.568-2.098 2.952-2.286 3.144l-1.428-1.4c.527-.54 1.927-2.178 2.214-3.405v-.498c-1.672-.209-3.211-.667-3.288-.689l.575-1.916c.02.006 2.021.6 3.768.695m0 0c.301.017.59.017.891 0M12 6.25c-.967 0-1.75.78-1.75 1.75s.783 1.75 1.75 1.75 1.75-.78 1.75-1.75-.784-1.75-1.75-1.75z"}))}));};s.metadata={width:24,height:24};var l=s;},391883:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M6 5c-1.1 0-2 .895-2 2s.9 2 2 2 2-.895 2-2-.9-2-2-2zM2 7c0-2.209 1.79-4 4-4s4 1.791 4 4-1.79 4-4 4-4-1.791-4-4zm20 1H12V6h10v2zM6 15c-1.1 0-2 .895-2 2s.9 2 2 2 2-.895 2-2-.9-2-2-2zm-4 2c0-2.209 1.79-4 4-4s4 1.791 4 4-1.79 4-4 4-4-1.791-4-4zm20 1H12v-2h10v2zM7 7c0 .552-.45 1-1 1s-1-.448-1-1 .45-1 1-1 1 .448 1 1z"}))}));};s.metadata={width:24,height:24};var l=s;},515834:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M19.996 10h-16V8h16v2zm0 6h-16v-2h16v2z"}))}));};s.metadata={width:24,height:24};var l=s;},673707:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M12 7c-1.93 0-3.5 1.57-3.5 3.5S10.07 14 12 14s3.5-1.57 3.5-3.5S13.93 7 12 7zm0 5c-.827 0-1.5-.673-1.5-1.5S11.173 9 12 9s1.5.673 1.5 1.5S12.827 12 12 12zm0-10c-4.687 0-8.5 3.813-8.5 8.5 0 5.967 7.621 11.116 7.945 11.332l.555.37.555-.37c.324-.216 7.945-5.365 7.945-11.332C20.5 5.813 16.687 2 12 2zm0 17.77c-1.665-1.241-6.5-5.196-6.5-9.27C5.5 6.916 8.416 4 12 4s6.5 2.916 6.5 6.5c0 4.073-4.835 8.028-6.5 9.27z"}))}));};s.metadata={width:24,height:24};var l=s;},840685:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M10 4c-1.105 0-2 .9-2 2s.895 2 2 2 2-.9 2-2-.895-2-2-2zM6 6c0-2.21 1.791-4 4-4s4 1.79 4 4-1.791 4-4 4-4-1.79-4-4zM3.651 19h12.698c-.337-1.8-1.023-3.21-1.945-4.19C13.318 13.65 11.838 13 10 13s-3.317.65-4.404 1.81c-.922.98-1.608 2.39-1.945 4.19zm.486-5.56C5.627 11.85 7.648 11 10 11s4.373.85 5.863 2.44c1.477 1.58 2.366 3.8 2.632 6.46l.11 1.1H1.395l.11-1.1c.266-2.66 1.155-4.88 2.632-6.46zm19.75-7.22l-4.141 6.21L16.1 9.7l1.2-1.6 1.954 1.47 2.969-4.46 1.664 1.11z"}))}));};s.metadata={width:24,height:24};var l=s;},128428:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M17.928 9.026l.095 3.545H19l.1-3.544h-1.172zm.586 5.394c.414 0 .667-.238.667-.623 0-.388-.252-.626-.666-.626-.41 0-.667.24-.667.627 0 .385.257.623.667.623zm-4.57-.11h.813l.278-1.384h.89l.15-.813h-.883l.198-.96h.875l.15-.805h-.864l.268-1.326h-.813l-.27 1.326h-.946l.263-1.326h-.81l-.27 1.326h-.846l-.154.806h.846l-.2.96h-.83l-.15.812h.824l-.278 1.384h.81l.277-1.384h.952l-.28 1.384zm-.578-2.124l.227-1.102h1.055l-.23 1.102h-1.052zm-5.889-.941c.388 0 .634.32.634.835s-.244.835-.636.835c-.385 0-.615-.315-.615-.835-.002-.524.23-.835.617-.835zM7.595 9C5.763 9 4.5 10.245 4.5 12.054c0 1.838 1.25 3.05 3.157 3.05.388 0 .765-.047 1.05-.13v-.598c-.204.073-.603.12-.995.12-1.556 0-2.542-.937-2.542-2.423 0-1.46.985-2.48 2.402-2.48 1.392 0 2.307.865 2.307 2.19 0 .744-.24 1.213-.61 1.213-.222 0-.35-.15-.35-.41v-1.94h-.74v.435h-.065c-.147-.325-.465-.515-.857-.515-.732 0-1.23.604-1.23 1.494 0 .93.505 1.544 1.267 1.544.425 0 .725-.19.88-.56h.065c.08.352.414.57.872.57.886 0 1.44-.728 1.44-1.892C10.55 10.106 9.348 9 7.594 9z"}))}));};s.metadata={width:24,height:24};var l=s;},707038:function _(e,t,n){"use strict";n.r(t),n.d(t,{"default":function _default(){return l;}});var r=n(133028),i=n(202784),a=n(890601),o=n(473569),s=function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)("svg",(0,r.Z)((0,r.Z)({},e),{},{accessibilityRole:e.accessibilityLabel?e.accessibilityRole||"img":void 0,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.Z.root,e.style],viewBox:"0 0 24 24",children:i.createElement("g",null,i.createElement("path",{d:"M6 3V2h2v1h6V2h2v1h1.5C18.88 3 20 4.119 20 5.5v2h-2v-2c0-.276-.22-.5-.5-.5H16v1h-2V5H8v1H6V5H4.5c-.28 0-.5.224-.5.5v12c0 .276.22.5.5.5h3v2h-3C3.12 20 2 18.881 2 17.5v-12C2 4.119 3.12 3 4.5 3H6zm9.5 8c-2.49 0-4.5 2.015-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.015 4.5-4.5-2.01-4.5-4.5-4.5zM9 15.5C9 11.91 11.91 9 15.5 9s6.5 2.91 6.5 6.5-2.91 6.5-6.5 6.5S9 19.09 9 15.5zm5.5-2.5h2v2.086l1.71 1.707-1.42 1.414-2.29-2.293V13z"}))}));};s.metadata={width:24,height:24};var l=s;},172023:function _(e,t,n){n(23103)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991});}}]);

//# sourceMappingURL=shared~bundle.Compose~bundle.RichTextCompose.a2fa6b8a.js.map